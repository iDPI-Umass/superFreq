import { c as create_ssr_component, v as validate_component, d as add_attribute, f as escape } from "../../../../chunks/ssr.js";
import "devalue";
import "../../../../chunks/client.js";
import { M as MusicBrainzSearch } from "../../../../chunks/MusicBrainzSearch.js";
import { P as PanelHeader } from "../../../../chunks/PanelHeader.js";
const css = {
  code: ".form-wrapper.svelte-427bvk{display:flex;flex-direction:row;gap:var(--freq-width-spacer);margin:var(--freq-height-spacer) var(--freq-width-spacer)}.mb-search.svelte-427bvk{margin:var(--freq-height-spacer-half) 0}.actions.svelte-427bvk{display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin:var(--freq-height-spacer-quarter) 0}img.svelte-427bvk{margin:var(--freq-height-spacer-half) 0 0 0;width:90%}@media screen and (max-width: 700px){.form-wrapper.svelte-427bvk{max-width:700px;display:flex;flex-direction:column;gap:var(--freq-width-spacer);margin:var(--freq-height-spacer) var(--freq-width-spacer)}img.svelte-427bvk{width:50%}}",
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { enhance } from \\"$app/forms\\";\\nimport MusicBrainzSearch from \\"$lib/components/MusicBrainzSearch.svelte\\";\\nimport PanelHeader from \\"$lib/components/PanelHeader.svelte\\";\\nexport let data;\\nexport let form;\\nlet { user, sessionUserId, profile } = data;\\n$: ({ user, sessionUserId, profile } = data);\\nlet avatarItem;\\nlet newItemAdded;\\nlet profileForm;\\nlet loading = false;\\nlet complete = false;\\nlet displayName = profile?.display_name ?? \\"\\";\\nlet username = profile?.username ?? \\"\\";\\nlet website = profile?.website ?? \\"\\";\\n$: avatarMbid = avatarItem?.release_group_mbid ?? profile?.avatar_mbid ?? \\"\\";\\nlet avatarUrl = avatarItem?.avatar_url ?? profile?.avatar_url ?? \\"\\";\\nlet about = profile?.about ?? \\"\\";\\nlet email = user?.email;\\n<\/script>\\n\\n<svelte:head>\\n\\t<title>\\n\\t\\tAccount\\n\\t</title>\\n</svelte:head>\\n\\n<div class=\\"panel\\" id=\\"profile-info\\">\\n\\t<PanelHeader>\\n\\t\\tprofile info\\n\\t</PanelHeader>\\n\\t<div class=\\"form-wrapper\\">\\n\\t\\t<form\\n\\t\\t\\tid=\\"account-data\\"\\n\\t\\t\\tclass=\\"form-column\\"\\n\\t\\t\\tmethod=\\"post\\"\\n\\t\\t\\taction=\\"?/update\\"\\n\\t\\t\\tbind:this={profileForm}\\n\\t\\t>\\n\\t\\t\\t<div class=\\"label-group\\">\\n\\t\\t\\t\\t<label \\n\\t\\t\\t\\t\\tclass=\\"text-label\\" \\n\\t\\t\\t\\t\\tfor=\\"email\\"\\n\\t\\t\\t\\t\\tform=\\"account-data\\"\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\tEmail\\n\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t<a class=\\"label-link\\" href=\\"/account/update-email\\">\\n\\t\\t\\t\\t\\tupdate email\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t</div>\\n\\t\\t\\t<input\\n\\t\\t\\t\\tclass=\\"text\\" \\n\\t\\t\\t\\ttype=\\"text\\" \\n\\t\\t\\t\\tname=\\"email\\" \\n\\t\\t\\t\\tid=\\"email\\"\\n\\t\\t\\t\\tform=\\"account-data\\"\\n\\t\\t\\t\\tvalue={email} \\n\\t\\t\\t\\tdisabled \\n\\t\\t\\t/>\\n\\t\\t\\t<div class=\\"label-group\\">\\n\\t\\t\\t\\t<label \\n\\t\\t\\t\\t\\tclass=\\"text-label\\"  \\n\\t\\t\\t\\t\\tfor=\\"username\\"\\n\\t\\t\\t\\t\\tform=\\"account-data\\"\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\tUsername\\n\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t<a class=\\"label-link\\" href=\\"/account/update-username\\">\\n\\t\\t\\t\\t\\tupdate username\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t</div>\\n\\t\\t\\t<input\\n\\t\\t\\t\\tclass=\\"text\\"\\n\\t\\t\\t\\ttype=\\"text\\"\\n\\t\\t\\t\\tname=\\"username\\"\\n\\t\\t\\t\\tid=\\"username\\"\\n\\t\\t\\t\\tform=\\"account-data\\"\\n\\t\\t\\t\\tvalue={username}\\n\\t\\t\\t\\tdisabled \\n\\t\\t\\t/>\\n\\t\\t\\t<label \\n\\t\\t\\t\\tclass=\\"text-label\\"\\n\\t\\t\\t\\tfor=\\"displayName\\"\\n\\t\\t\\t>\\n\\t\\t\\t\\tDisplay name\\n\\t\\t\\t</label>\\n\\t\\t\\t<input \\n\\t\\t\\t\\tclass=\\"text\\" \\n\\t\\t\\t\\ttype=\\"text\\" \\n\\t\\t\\t\\tname=\\"displayName\\" \\n\\t\\t\\t\\tid=\\"displayName\\" \\n\\t\\t\\t\\tvalue={displayName} \\n\\t\\t\\t/>\\n\\n\\t\\t\\t\\n\\t\\t\\t<label \\n\\t\\t\\t\\tclass=\\"text-label\\" \\n\\t\\t\\t\\tfor=\\"description\\"\\n\\t\\t\\t>\\n\\t\\t\\t\\tabout me\\n\\t\\t\\t</label>\\n\\t\\t\\t<textarea\\n\\t\\t\\t\\tid=\\"about\\"\\n\\t\\t\\t\\tname=\\"about\\"\\n\\t\\t\\t\\trows=\\"3\\"\\n\\t\\t\\t\\tcols=\\"1\\"\\n\\t\\t\\t\\tmaxlength=\\"140\\"\\n\\t\\t\\t\\tspellcheck=true \\n\\t\\t\\t\\tvalue={about}\\n\\t\\t\\t></textarea>\\n\\n\\t\\t\\t<label \\n\\t\\t\\t\\tclass=\\"text-label\\" \\n\\t\\t\\t\\tfor=\\"website\\"\\n\\t\\t\\t>\\n\\t\\t\\t\\tWebsite\\n\\t\\t\\t</label>\\n\\t\\t\\t<input \\n\\t\\t\\t\\tclass=\\"text\\" \\n\\t\\t\\t\\ttype=\\"url\\" \\n\\t\\t\\t\\tname=\\"website\\" \\n\\t\\t\\t\\tid=\\"website\\" \\n\\t\\t\\t\\tvalue={website} \\n\\t\\t\\t/>\\n\\t\\t\\t<input \\n\\t\\t\\t\\ttype=\\"hidden\\" \\n\\t\\t\\t\\tname=\\"avatarUrl\\" \\n\\t\\t\\t\\tid=\\"avatarUrl\\" \\n\\t\\t\\t\\tvalue={avatarUrl} \\n\\t\\t\\t/>\\n\\t\\t\\t<input \\n\\t\\t\\t\\ttype=\\"hidden\\" \\n\\t\\t\\t\\tname=\\"newAvatarUrl\\" \\n\\t\\t\\t\\tid=\\"newAvatarUrl\\" \\n\\t\\t\\t\\tvalue={avatarItem?.img_url} \\n\\t\\t\\t/>\\n\\t\\t\\t<input \\n\\t\\t\\t\\ttype=\\"hidden\\" \\n\\t\\t\\t\\tname=\\"avatarMbid\\" \\n\\t\\t\\t\\tid=\\"avatarMbid\\" \\n\\t\\t\\t\\tvalue={avatarMbid} \\n\\t\\t\\t/>\\n\\t\\t\\t<input \\n\\t\\t\\t\\ttype=\\"hidden\\" \\n\\t\\t\\t\\tname=\\"newAvatarMbid\\" \\n\\t\\t\\t\\tid=\\"newAvatarMbid\\" \\n\\t\\t\\t\\tvalue={avatarItem?.release_group_mbid} \\n\\t\\t\\t/>\\n\\t\\t\\t<input \\n\\t\\t\\t\\ttype=\\"hidden\\" \\n\\t\\t\\t\\tname=\\"avatarName\\" \\n\\t\\t\\t\\tid=\\"avatarName\\" \\n\\t\\t\\t\\tvalue={avatarItem?.release_group_name} \\n\\t\\t\\t/>\\n\\t\\t</form>\\n\\t\\t<div class=\\"form-column\\">\\n\\t\\t\\t<label \\n\\t\\t\\t\\tclass=\\"text-label\\" \\n\\t\\t\\t\\tfor=\\"avatarUrl\\"\\n\\t\\t\\t>\\n\\t\\t\\t\\tchoose an album cover for your avatar\\n\\t\\t\\t</label>\\n\\t\\t\\t<!--\\n\\t\\t\\t\\tForm to search for avatar url\\n\\t\\t\\t-->\\n\\t\\t\\t<div class=\\"mb-search\\">\\n\\t\\t\\t\\t<MusicBrainzSearch\\n\\t\\t\\t\\t\\tsearchCategory=\\"release_groups\\"\\n\\t\\t\\t\\t\\tsearchButtonText=\\"search\\"\\n\\t\\t\\t\\t\\tsearchPlaceholder=\\"Search for an album\\"\\n\\t\\t\\t\\t\\tbind:addedItems={avatarItem}\\n\\t\\t\\t\\t\\tbind:newItemAdded={newItemAdded}\\n\\t\\t\\t\\t\\tmode=\\"single\\"\\n\\t\\t\\t\\t\\tlimit=\\"10\\"\\n\\t\\t\\t\\t\\tavatarSearch={true}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t</MusicBrainzSearch>\\n\\t\\t\\t</div>\\n\\t\\t\\t<!-- add alt text and change column in postgres -->\\n\\t\\t\\t{#if avatarUrl && !newItemAdded}\\n\\t\\t\\t\\t<img src={avatarUrl} alt=\\"user avatar\\"/>\\n\\t\\t\\t{:else if avatarItem && newItemAdded}\\n\\t\\t\\t\\t<img src={avatarItem.img_url} alt=\\"user avatar\\"/>\\n\\t\\t\\t{/if}\\n\\t\\t\\t{#if form?.success}\\n\\t\\t\\t\\t<p>update submitted</p>\\n\\t\\t\\t{/if}\\n\\t\\t\\t<div class=\\"actions\\">\\n\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\tform=\\"account-data\\"\\n\\t\\t\\t\\t\\tclass=\\"double-border-top\\"\\n\\t\\t\\t\\t\\ttype=\\"submit\\"\\n\\t\\t\\t\\t\\tdisabled={loading}\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<div class=\\"inner-border\\">\\n\\t\\t\\t\\t\\t\\t{loading ? 'Loading...' : 'Update profile'}\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t<form \\n\\t\\t\\t\\t\\tclass=\\"signout\\"\\n\\t\\t\\t\\t\\tmethod=\\"post\\" \\n\\t\\t\\t\\t\\taction=\\"?/signout\\" \\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<button \\n\\t\\t\\t\\t\\t\\tclass=\\"double-border-top\\" \\n\\t\\t\\t\\t\\t\\ttype=\\"submit\\" \\n\\t\\t\\t\\t\\t\\tdisabled={loading}\\n\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t<div class=\\"inner-border\\">\\n\\t\\t\\t\\t\\t\\t\\tSign Out\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</form>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n\\n\\n\\n<style>\\n\\t.form-wrapper {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: row;\\n\\t\\tgap: var(--freq-width-spacer);\\n\\t\\tmargin: var(--freq-height-spacer) var(--freq-width-spacer);\\n\\t}\\n\\t.mb-search {\\n\\t\\tmargin: var(--freq-height-spacer-half) 0;\\n\\t}\\n\\t.actions {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: row;\\n\\t\\talign-items: center;\\n\\t\\tjustify-content: space-between;\\n\\t\\tmargin: var(--freq-height-spacer-quarter) 0;\\n\\t}\\n\\timg {\\n\\t\\tmargin: var(--freq-height-spacer-half) 0 0 0;\\n\\t\\twidth: 90%;\\n\\t}\\n\\t@media screen and (max-width: 700px) {\\n\\t\\t.form-wrapper {\\n\\t\\t\\tmax-width: 700px;\\n\\t\\t\\tdisplay: flex;\\n\\t\\t\\tflex-direction: column;\\n\\t\\t\\tgap: var(--freq-width-spacer);\\n\\t\\t\\tmargin: var(--freq-height-spacer) var(--freq-width-spacer);\\n\\t\\t}\\n\\t\\timg {\\n\\t\\t\\twidth: 50%;\\n\\t\\t}\\n\\t}\\n</style>"],"names":[],"mappings":"AA8NC,2BAAc,CACb,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,GAAG,CAAE,IAAI,mBAAmB,CAAC,CAC7B,MAAM,CAAE,IAAI,oBAAoB,CAAC,CAAC,IAAI,mBAAmB,CAC1D,CACA,wBAAW,CACV,MAAM,CAAE,IAAI,yBAAyB,CAAC,CAAC,CACxC,CACA,sBAAS,CACR,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,aAAa,CAC9B,MAAM,CAAE,IAAI,4BAA4B,CAAC,CAAC,CAC3C,CACA,iBAAI,CACH,MAAM,CAAE,IAAI,yBAAyB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAC5C,KAAK,CAAE,GACR,CACA,OAAO,MAAM,CAAC,GAAG,CAAC,YAAY,KAAK,CAAE,CACpC,2BAAc,CACb,SAAS,CAAE,KAAK,CAChB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,IAAI,mBAAmB,CAAC,CAC7B,MAAM,CAAE,IAAI,oBAAoB,CAAC,CAAC,IAAI,mBAAmB,CAC1D,CACA,iBAAI,CACH,KAAK,CAAE,GACR,CACD"}`
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let avatarMbid;
  let { data } = $$props;
  let { form } = $$props;
  let { user, sessionUserId, profile } = data;
  let avatarItem;
  let newItemAdded;
  let profileForm;
  let displayName = profile?.display_name ?? "";
  let username = profile?.username ?? "";
  let website = profile?.website ?? "";
  let avatarUrl = avatarItem?.avatar_url ?? profile?.avatar_url ?? "";
  let about = profile?.about ?? "";
  let email = user?.email;
  if ($$props.data === void 0 && $$bindings.data && data !== void 0) $$bindings.data(data);
  if ($$props.form === void 0 && $$bindings.form && form !== void 0) $$bindings.form(form);
  $$result.css.add(css);
  let $$settled;
  let $$rendered;
  let previous_head = $$result.head;
  do {
    $$settled = true;
    $$result.head = previous_head;
    ({ user, sessionUserId, profile } = data);
    avatarMbid = avatarItem?.release_group_mbid ?? profile?.avatar_mbid ?? "";
    $$rendered = `${$$result.head += `<!-- HEAD_svelte-y5tsqi_START -->${$$result.title = `<title>
		Account
	</title>`, ""}<!-- HEAD_svelte-y5tsqi_END -->`, ""} <div class="panel" id="profile-info">${validate_component(PanelHeader, "PanelHeader").$$render($$result, {}, {}, {
      default: () => {
        return `profile info`;
      }
    })} <div class="form-wrapper svelte-427bvk"><form id="account-data" class="form-column" method="post" action="?/update"${add_attribute("this", profileForm, 0)}><div class="label-group" data-svelte-h="svelte-183sajv"><label class="text-label" for="email" form="account-data">Email</label> <a class="label-link" href="/account/update-email">update email</a></div> <input class="text" type="text" name="email" id="email" form="account-data"${add_attribute("value", email, 0)} disabled> <div class="label-group" data-svelte-h="svelte-h704yv"><label class="text-label" for="username" form="account-data">Username</label> <a class="label-link" href="/account/update-username">update username</a></div> <input class="text" type="text" name="username" id="username" form="account-data"${add_attribute("value", username, 0)} disabled> <label class="text-label" for="displayName" data-svelte-h="svelte-1sm0p9x">Display name</label> <input class="text" type="text" name="displayName" id="displayName"${add_attribute("value", displayName, 0)}> <label class="text-label" for="description" data-svelte-h="svelte-12v3eeq">about me</label> <textarea id="about" name="about" rows="3" cols="1" maxlength="140" spellcheck="true">${escape(about, false)}</textarea> <label class="text-label" for="website" data-svelte-h="svelte-1r1mu05">Website</label> <input class="text" type="url" name="website" id="website"${add_attribute("value", website, 0)}> <input type="hidden" name="avatarUrl" id="avatarUrl"${add_attribute("value", avatarUrl, 0)}> <input type="hidden" name="newAvatarUrl" id="newAvatarUrl"${add_attribute("value", avatarItem?.img_url, 0)}> <input type="hidden" name="avatarMbid" id="avatarMbid"${add_attribute("value", avatarMbid, 0)}> <input type="hidden" name="newAvatarMbid" id="newAvatarMbid"${add_attribute("value", avatarItem?.release_group_mbid, 0)}> <input type="hidden" name="avatarName" id="avatarName"${add_attribute("value", avatarItem?.release_group_name, 0)}></form> <div class="form-column"><label class="text-label" for="avatarUrl" data-svelte-h="svelte-1auqosk">choose an album cover for your avatar</label>  <div class="mb-search svelte-427bvk">${validate_component(MusicBrainzSearch, "MusicBrainzSearch").$$render(
      $$result,
      {
        searchCategory: "release_groups",
        searchButtonText: "search",
        searchPlaceholder: "Search for an album",
        mode: "single",
        limit: "10",
        avatarSearch: true,
        addedItems: avatarItem,
        newItemAdded
      },
      {
        addedItems: ($$value) => {
          avatarItem = $$value;
          $$settled = false;
        },
        newItemAdded: ($$value) => {
          newItemAdded = $$value;
          $$settled = false;
        }
      },
      {}
    )}</div>  ${avatarUrl && !newItemAdded ? `<img${add_attribute("src", avatarUrl, 0)} alt="user avatar" class="svelte-427bvk">` : `${avatarItem && newItemAdded ? `<img${add_attribute("src", avatarItem.img_url, 0)} alt="user avatar" class="svelte-427bvk">` : ``}`} ${form?.success ? `<p data-svelte-h="svelte-lqrnc8">update submitted</p>` : ``} <div class="actions svelte-427bvk"><button form="account-data" class="double-border-top" type="submit" ${""}><div class="inner-border">${escape("Update profile")}</div></button> <form class="signout" method="post" action="?/signout"><button class="double-border-top" type="submit" ${""}><div class="inner-border" data-svelte-h="svelte-178fjze">Sign Out</div></button></form></div></div></div> </div>`;
  } while (!$$settled);
  return $$rendered;
});
export {
  Page as default
};
