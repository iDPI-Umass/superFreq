import { c as create_ssr_component, v as validate_component, h as each, d as add_attribute, f as escape } from "../../../../chunks/ssr.js";
import "devalue";
import "../../../../chunks/client.js";
import { d as decoration } from "../../../../chunks/feed-item-decoration.js";
import { P as PanelHeader } from "../../../../chunks/PanelHeader.js";
import { N as NowPlayingPost } from "../../../../chunks/NowPlayingPost.js";
const css = {
  code: "form.svelte-n7l4ta{display:flex;flex-direction:row;align-items:center;margin:var(--freq-height-spacer-half) auto}button.svelte-n7l4ta{margin:0 auto}",
  map: '{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { enhance } from \\"$app/forms\\";\\nimport decoration from \\"$lib/assets/images/feed-item-decoration.svg\\";\\nimport PanelHeader from \\"$lib/components/PanelHeader.svelte\\";\\nimport NowPlayingPost from \\"$lib/components/Posts/NowPlayingPost.svelte\\";\\nexport let data;\\nexport let form;\\nlet { feedData, remaining, totalRowCount, timestampStart, timestampEnd, batchSize, options } = data;\\n$: ({ feedData, remaining, totalRowCount, timestampStart, timestampEnd, batchSize, options } = data);\\nconst feedItems = feedData;\\n<\/script>\\n\\n<svelte:head>\\n\\t<title>\\n\\t\\tFeed\\n\\t</title>\\n</svelte:head>\\n\\n<div class=\\"feed-panel\\">\\n    <PanelHeader>\\n        feed\\n    </PanelHeader>\\n    {#if totalRowCount == 0}\\n        <p>Nothing in your feed? Try following some more <a href=\\"/users\\">users</a> and <a href=\\"/collections\\" >collections</a>.</p>\\n    {/if}\\n    {#each (form?.feedItems ?? feedItems) as item}\\n    <div class=\\"feed-item\\">\\n        {#if Object.keys(item).includes( \'now_playing_post_id\' )}      \\n            <a href={`/posts/${item.username}/now-playing/${item.feed_item_timestamp.toISOString()}`}>\\n                <div class=\\"feed-item-user-data\\">\\n                    <img src={item.avatar_url} alt={`${item.display_name}\'s avatar`} class=\\"feed-avatar\\" />\\n                    {item.display_name}\\n                    posted: \\n                </div>\\n            </a>\\n            <div class=\\"feed-item-row\\">\\n                <img class=\\"feed-item-ornament\\" src={decoration} alt=\\"decoration\\" />\\n                <div class=\\"feed-item-now-playing\\">\\n                    <NowPlayingPost\\n                        post={item}\\n                        mode=\\"feed\\"\\n                    ></NowPlayingPost>\\n                </div>\\n            </div>\\n        {:else if Object.keys(item).includes( \'comment_id\' )}\\n            <a href={`/posts/${item.original_poster_username}/now-playing/${item.feed_item_timestamp.toISOString()}`}>\\n                <div class=\\"feed-item-one-liner\\">\\n                    <img csrc={item.avatar_url} alt={`${item.display_name}\'s avatar`} class=\\"feed-avatar\\" />\\n                    {item.display_name} commented on {item.original_poster_display_name}\'s post\\n                </div>\\n            </a>\\n        {:else if Object.keys(item).includes( \'reaction_id\' )}\\n            <a href={`/posts/${item.original_poster_username}/now-playing/${item.feed_item_timestamp.toISOString()}`}>\\n                <div class=\\"feed-item-one-liner\\">\\n                    <img src={item.avatar_url} alt={`${item.display_name}\'s avatar`} class=\\"feed-avatar\\" />\\n                    {item.display_name} liked {item.original_poster_display_name}\'s post\\n                </div>\\n            </a>\\n        {:else if Object.keys(item).includes( \'collection_follow_id\' )}\\n            <a href={`/collection/${item.collection_id}`}>\\n                <div class=\\"feed-item-one-liner\\">\\n                    <img src={item.avatar_url} alt={`${item.display_name}\'s avatar`} class=\\"feed-avatar\\" />\\n                    {item.display_name}\\n                    followed a collection: \\n                    <span class=\\"feed-item-subject\\">\\n                        {item.title}\\n                    </span>\\n                </div>\\n            </a>\\n        {:else if Object.keys(item).includes( \'collection_edit_id\' )}\\n            <a href={`/collection/${item.collection_id}`}>\\n                <div class=\\"feed-item-one-liner\\">\\n                    <img src={item.avatar_url} alt={`${item.display_name}\'s avatar`} class=\\"feed-avatar\\" />\\n                    {item.display_name}\\n                    edited the collection: \\n                    <span class=\\"feed-item-subject\\">\\n                        {item.title}\\n                    </span>\\n                </div>\\n            </a>\\n        {/if}\\n        </div>\\n    {/each}\\n    <form method=\\"POST\\" action=\\"?/loadMore\\" use:enhance>\\n        <input\\n            type=\\"hidden\\"\\n            name=\\"feed-items\\"\\n            id=\\"feed-items\\"\\n            value={JSON.stringify(form?.feedItems ?? feedItems)}\\n        />\\n        <input\\n            type=\\"hidden\\"\\n            name=\\"batch-size\\"\\n            id=\\"batch-size\\"\\n            value={batchSize}\\n        />\\n        <input\\n            type=\\"hidden\\"\\n            name=\\"batch-iterator\\"\\n            id=\\"batch-iterator\\"\\n            value={form?.batchIterator ?? 0}\\n        />\\n        <input\\n            type=\\"hidden\\"\\n            name=\\"timestamp-start\\"\\n            id=\\"timestamp-start\\"\\n            value={timestampStart.toISOString()}\\n        />\\n        <input\\n            type=\\"hidden\\"\\n            name=\\"timestamp-end\\"\\n            id=\\"timestamp-end\\"\\n            value={timestampEnd.toISOString()}\\n        />\\n        <input\\n            type=\\"hidden\\"\\n            name=\\"options\\"\\n            id=\\"options\\"\\n            value={JSON.stringify(options)}\\n        />\\n        {#if (form?.remaining ?? remaining) > 0}\\n            <button\\n                class=\\"standard\\"\\n                formaction=\\"?/loadMore\\"\\n            >\\n            load more\\n        </button>\\n        {/if}\\n    </form>\\n</div>\\n\\n\\n\\n\\n<style>\\n    form {\\n        display: flex;\\n        flex-direction: row;\\n        align-items: center;\\n        margin: var(--freq-height-spacer-half) auto;\\n    }\\n    button {\\n        margin: 0 auto;\\n    }\\n</style>"],"names":[],"mappings":"AAsII,kBAAK,CACD,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,IAAI,yBAAyB,CAAC,CAAC,IAC3C,CACA,oBAAO,CACH,MAAM,CAAE,CAAC,CAAC,IACd"}'
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let { data } = $$props;
  let { form } = $$props;
  let { feedData, remaining, totalRowCount, timestampStart, timestampEnd, batchSize, options } = data;
  const feedItems = feedData;
  if ($$props.data === void 0 && $$bindings.data && data !== void 0) $$bindings.data(data);
  if ($$props.form === void 0 && $$bindings.form && form !== void 0) $$bindings.form(form);
  $$result.css.add(css);
  ({ feedData, remaining, totalRowCount, timestampStart, timestampEnd, batchSize, options } = data);
  return `${$$result.head += `<!-- HEAD_svelte-wsbhpv_START -->${$$result.title = `<title>
		Feed
	</title>`, ""}<!-- HEAD_svelte-wsbhpv_END -->`, ""} <div class="feed-panel">${validate_component(PanelHeader, "PanelHeader").$$render($$result, {}, {}, {
    default: () => {
      return `feed`;
    }
  })} ${totalRowCount == 0 ? `<p data-svelte-h="svelte-6uetj4">Nothing in your feed? Try following some more <a href="/users">users</a> and <a href="/collections">collections</a>.</p>` : ``} ${each(form?.feedItems ?? feedItems, (item) => {
    return `<div class="feed-item">${Object.keys(item).includes("now_playing_post_id") ? `<a${add_attribute("href", `/posts/${item.username}/now-playing/${item.feed_item_timestamp.toISOString()}`, 0)}><div class="feed-item-user-data"><img${add_attribute("src", item.avatar_url, 0)}${add_attribute("alt", `${item.display_name}'s avatar`, 0)} class="feed-avatar"> ${escape(item.display_name)}
                    posted: 
                </div></a> <div class="feed-item-row"><img class="feed-item-ornament"${add_attribute("src", decoration, 0)} alt="decoration"> <div class="feed-item-now-playing">${validate_component(NowPlayingPost, "NowPlayingPost").$$render($$result, { post: item, mode: "feed" }, {}, {})}</div> </div>` : `${Object.keys(item).includes("comment_id") ? `<a${add_attribute("href", `/posts/${item.original_poster_username}/now-playing/${item.feed_item_timestamp.toISOString()}`, 0)}><div class="feed-item-one-liner"><img${add_attribute("csrc", item.avatar_url, 0)}${add_attribute("alt", `${item.display_name}'s avatar`, 0)} class="feed-avatar"> ${escape(item.display_name)} commented on ${escape(item.original_poster_display_name)}&#39;s post</div> </a>` : `${Object.keys(item).includes("reaction_id") ? `<a${add_attribute("href", `/posts/${item.original_poster_username}/now-playing/${item.feed_item_timestamp.toISOString()}`, 0)}><div class="feed-item-one-liner"><img${add_attribute("src", item.avatar_url, 0)}${add_attribute("alt", `${item.display_name}'s avatar`, 0)} class="feed-avatar"> ${escape(item.display_name)} liked ${escape(item.original_poster_display_name)}&#39;s post</div> </a>` : `${Object.keys(item).includes("collection_follow_id") ? `<a${add_attribute("href", `/collection/${item.collection_id}`, 0)}><div class="feed-item-one-liner"><img${add_attribute("src", item.avatar_url, 0)}${add_attribute("alt", `${item.display_name}'s avatar`, 0)} class="feed-avatar"> ${escape(item.display_name)}
                    followed a collection: 
                    <span class="feed-item-subject">${escape(item.title)} </span></div> </a>` : `${Object.keys(item).includes("collection_edit_id") ? `<a${add_attribute("href", `/collection/${item.collection_id}`, 0)}><div class="feed-item-one-liner"><img${add_attribute("src", item.avatar_url, 0)}${add_attribute("alt", `${item.display_name}'s avatar`, 0)} class="feed-avatar"> ${escape(item.display_name)}
                    edited the collection: 
                    <span class="feed-item-subject">${escape(item.title)} </span></div> </a>` : ``}`}`}`}`} </div>`;
  })} <form method="POST" action="?/loadMore" class="svelte-n7l4ta"><input type="hidden" name="feed-items" id="feed-items"${add_attribute("value", JSON.stringify(form?.feedItems ?? feedItems), 0)}> <input type="hidden" name="batch-size" id="batch-size"${add_attribute("value", batchSize, 0)}> <input type="hidden" name="batch-iterator" id="batch-iterator"${add_attribute("value", form?.batchIterator ?? 0, 0)}> <input type="hidden" name="timestamp-start" id="timestamp-start"${add_attribute("value", timestampStart.toISOString(), 0)}> <input type="hidden" name="timestamp-end" id="timestamp-end"${add_attribute("value", timestampEnd.toISOString(), 0)}> <input type="hidden" name="options" id="options"${add_attribute("value", JSON.stringify(options), 0)}> ${(form?.remaining ?? remaining) > 0 ? `<button class="standard svelte-n7l4ta" formaction="?/loadMore" data-svelte-h="svelte-vnsqr3">load more</button>` : ``}</form> </div>`;
});
export {
  Page as default
};
