import"../chunks/CWj6FrbW.js";import{p as ma,a as D,ai as da,f as ua,t as pa,b as va,d as r,c as d,g as a,e as l,r as u,s as F}from"../chunks/DKxP8oaF.js";import{s as _a}from"../chunks/d8TzcK2t.js";import{t as f,a as b}from"../chunks/DCT9fmD9.js";import{b as o,r as n}from"../chunks/DubPOQGL.js";import{b as ba}from"../chunks/o4T939ll.js";import{p as c}from"../chunks/DIWzF7VF.js";import{i as ca}from"../chunks/ryZ2lNj1.js";import"../chunks/DSfPsCr9.js";import{S as fa}from"../chunks/CdBRc-Mf.js";import{P as ga}from"../chunks/BNhe8YCt.js";import{N as xa}from"../chunks/BPwSGjQ8.js";import"../chunks/-Ocsa0V4.js";import"../chunks/mnVZ5n0Q.js";import{A as ha}from"../chunks/BHEnHpZZ.js";var ya=f("<span>profile info</span>"),wa=f("<span>Success!</span>"),Aa=f("<span>Your profile has been updated.</span>"),Ia=f('<!> <div class="panel" id="profile-info"><!> <div class="form-wrapper svelte-427bvk"><form id="account-data" class="form-column" method="post" action="?/update"><div class="label-group"><label class="text-label" for="email" form="account-data">Email</label> <a class="label-link" href="/account/update-email">update email</a></div> <input class="text" type="text" name="email" id="email" form="account-data" disabled> <div class="label-group"><label class="text-label" for="username" form="account-data">Username</label> <a class="label-link" href="/account/update-username">update username</a></div> <input class="text" type="text" name="username" id="username" form="account-data" disabled> <label class="text-label" for="displayName">Display name</label> <input class="text" type="text" name="displayName" id="displayName"> <label class="text-label" for="description">about me</label> <textarea id="about" name="about" rows="3" cols="1" maxlength="140" spellcheck="true"></textarea> <label class="text-label" for="website">Website</label> <input class="text" type="text" name="website" id="website"> <input type="hidden" name="avatarItem" id="avatarmItem"> <input type="hidden" name="avatarUrl" id="avatarUrl"> <input type="hidden" name="newAvatarUrl" id="newAvatarUrl"> <input type="hidden" name="avatarMbid" id="avatarMbid"> <input type="hidden" name="newAvatarMbid" id="newAvatarMbid"> <input type="hidden" name="avatarName" id="avatarName"></form> <div class="form-column"><label class="text-label" for="avatarUrl">Avatar</label> <!> <div class="actions svelte-427bvk"><button form="account-data" class="double-border-top" type="submit"><div class="inner-border"> </div></button> <form class="signout" method="post" action="?/signout"><button class="double-border-top" type="submit"><div class="inner-border">Sign Out</div></button></form></div></div></div></div> <!>',1);function Ra(Q,v){ma(v,!0);let V=l(()=>v.data.user),m=l(()=>v.data.profile),X=l(()=>{var e;return(e=v.form)==null?void 0:e.success}),g=D(!1),G=l(()=>{var e;return((e=a(m))==null?void 0:e.display_name)??""}),Z=l(()=>{var e;return((e=a(m))==null?void 0:e.username)??""}),$=l(()=>{var e;return((e=a(m))==null?void 0:e.website)??""}),aa=l(()=>{var e;return((e=a(m))==null?void 0:e.about)??""}),ea=l(()=>{var e;return(e=a(V))==null?void 0:e.email}),s=D(c({})),ta=l(()=>{var e,t;return((e=a(s))==null?void 0:e.release_group_mbid)??((t=a(m))==null?void 0:t.avatar_mbid)??""}),x=l(()=>{var e,t;return((e=a(s))==null?void 0:e.avatar_url)??((t=a(m))==null?void 0:t.avatar_url)??""}),ra=l(()=>{var e,t;return((e=a(s))==null?void 0:e.last_fm_img_url)??((t=a(m))==null?void 0:t.avatar_last_fm_img_url)??""}),la=l(()=>{var e,t;return((e=a(s))==null?void 0:e.artist_name)??((t=a(m))==null?void 0:t.avatar_artist_name)??""}),sa=l(()=>{var e,t;return((e=a(s))==null?void 0:e.release_group_name)??((t=a(m))==null?void 0:t.avatar_release_group_name)??""}),H=l(()=>{var e,t,i;return{img_url:a(x),last_fm_img_url:a(ra),artist_name:a(la),artist_mbid:(e=a(s))==null?void 0:e.artist_mbid,release_group_name:a(sa),release_group_mbid:(t=a(s))==null?void 0:t.release_group_mbid,label:(i=a(s))==null?void 0:i.label}}),h=D(null),y=l(()=>!!(a(g)&&!a(h)));da(()=>{ca()});var J=Ia(),L=ua(J);fa(L,{title:"Account"});var w=r(L,2),R=d(w);ga(R,{headerText:t=>{var i=ya();b(t,i)}});var W=r(R,2),A=d(W),I=r(d(A),2);n(I);var N=r(I,4);n(N);var U=r(N,4);n(U);var M=r(U,4);ba(M);var S=r(M,4);n(S);var k=r(S,2);n(k);var P=r(k,2);n(P);var T=r(P,2);n(T);var O=r(T,2);n(O);var E=r(O,2);n(E);var Y=r(E,2);n(Y),u(A);var j=r(A,2),q=r(d(j),2);ha(q,{get displayName(){return a(G)},get avatarUrl(){return a(x)},get avatarInfo(){return a(H)},get newItemAdded(){return a(g)},set newItemAdded(e){F(g,c(e))},get avatarItem(){return a(s)},set avatarItem(e){F(s,c(e))},get imgPromise(){return a(h)},set imgPromise(e){F(h,c(e))}});var z=r(q,2),_=d(z),B=d(_),ia=d(B,!0);u(B),u(_);var C=r(_,2),oa=d(C);u(C),u(z),u(j),u(W),u(w);var na=r(w,2);xa(na,{get showModal(){return a(X)},headerText:i=>{var p=wa();b(i,p)},message:i=>{var p=Aa();b(i,p)},$$slots:{headerText:!0,message:!0}}),pa(e=>{var t,i,p,K;o(I,a(ea)),o(N,a(Z)),o(U,a(G)),o(M,a(aa)),o(S,a($)),o(k,e),o(P,a(x)),o(T,((t=a(s))==null?void 0:t.img_url)??((i=a(s))==null?void 0:i.last_fm_img_url)??null),o(O,a(ta)),o(E,((p=a(s))==null?void 0:p.release_group_mbid)??null),o(Y,((K=a(s))==null?void 0:K.release_group_name)??null),_.disabled=a(y),_a(ia,a(y)?"Loading...":"Update profile"),oa.disabled=a(y)},[()=>JSON.stringify(a(H))]),b(Q,J),va()}export{Ra as component};
