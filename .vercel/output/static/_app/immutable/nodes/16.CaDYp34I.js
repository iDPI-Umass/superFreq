import"../chunks/CWj6FrbW.js";import{p as Te,f as B,b as Fe,c as r,d as i,g as e,r as t,t as O,e as s,n as j}from"../chunks/DKxP8oaF.js";import{s as x}from"../chunks/d8TzcK2t.js";import{i as y}from"../chunks/XPA7DDzn.js";import{d as ca,a as v,t as f,b as Ae}from"../chunks/DCT9fmD9.js";import{a as ua}from"../chunks/Pq-04fzQ.js";import{s as F,r as ma,b as fa}from"../chunks/DubPOQGL.js";import{d as Me}from"../chunks/o4T939ll.js";import{g as D}from"../chunks/ryZ2lNj1.js";import{e as pa}from"../chunks/B9Qn1ecM.js";import{S as _a}from"../chunks/CdBRc-Mf.js";import{N as ga,U as ba}from"../chunks/D1y81lpy.js";import{P as ie}from"../chunks/BNhe8YCt.js";import{G as wa}from"../chunks/CPwN5FOA.js";import{N as ha}from"../chunks/gW6TRNy1.js";import{F as xa}from"../chunks/DFGlx1D8.js";import{e as Ua,i as ya}from"../chunks/Cpe_MceB.js";import{p as Ia}from"../chunks/C6N4_jbr.js";import"../chunks/-Ocsa0V4.js";import{C as Pa}from"../chunks/mnVZ5n0Q.js";import"../chunks/C15yfjWY.js";import{I as ka}from"../chunks/DT_Qv_zU.js";var Ca=f('<a class="panel-header-link"> </a>'),Na=(G,o)=>D(`/user/${o.username}/now-playing-posts`),Sa=f('<div class="panel-medium"><!> <div class="posts-spacing svelte-1mvojoo"></div> <div class="button-spacer svelte-1mvojoo"><button class="standard svelte-1mvojoo">see more</button></div></div>'),Aa=f(`<div class="panel-medium"><div class="panel-button-buffer svelte-1mvojoo"><p class="svelte-1mvojoo">This user hasn't posted anything yet.</p></div></div>`);function Ta(G,o){Te(o,!0);let P=Ia(o,"sessionUserId",3,null);var p=ca(),L=B(p);{var E=I=>{var C=Sa(),n=r(C);ie(n,{headerText:A=>{var T=Ca(),q=r(T);t(T),O(()=>{F(T,"href",`/user/${o.username}/now-playing-posts`),x(q,`${o.displayName??""}'s Now Playing posts`)}),v(A,T)}});var U=i(n,2);Ua(U,21,()=>o.posts,ya,(R,A)=>{ga(R,{get post(){return e(A)},get sessionUserId(){return P()},mode:"feed"})}),t(U);var b=i(U,2),H=r(b);H.__click=[Na,o],t(b),t(C),v(I,C)},k=(I,C)=>{{var n=U=>{var b=Aa();v(U,b)};y(I,U=>{(!o.posts||o.posts.length==0)&&U(n)},C)}};y(L,I=>{o.posts&&o.posts.length>0?I(E):I(k,!1)})}v(G,p),Fe()}Me(["click"]);var Fa=()=>D("/account"),Ma=f('<button class="mini svelte-x2fbvr">edit</button>'),ja=()=>D("/account"),Ba=f('<button class="double-border-top"><div class="inner-border-condensed">edit profile</div></button>'),Da=f('<form method="POST" action="?/followUser"><input type="hidden" name="profile-user-id" id="profile-user-id"> <button class="standard" type="submit" formaction="?/followUser"><!></button></form> <!>',1),Ga=f("<span>top albums</span>"),La=()=>D("/user/top-albums"),Ra=f('<button class="standard">edit</button>'),Oa=f("<span><!></span>"),Ea=f('<div class="panel-medium"><!> <!></div>'),Ha=f("<span>top albums</span>"),qa=()=>D("/user/top-albums"),za=f('<div class="panel-medium"><!> <div class="panel-button-buffer"><button class="standard">choose your top albums</button></div></div>'),Ja=f('New <a href="/about/updates#updates">updates and bug fixes</a> ',1),Ka=f("<!> <!> <!>",1),Qa=f('<!> <div class="profile-info"><div class="profile-info-box-left"><div class="avatar-user-data"><div class="cover-art-widget svelte-x2fbvr"><div class="avatar-image svelte-x2fbvr"><!></div> <!></div> <div class="profile-info-box-column"><div class="profile-user-data-column"><div class="profile-displayname-username-column"><h2> </h2> <p class="data-muted"> </p></div> <p class="profile-about"> </p> <a class="profile-website"> </a></div></div></div> <div class="profile-buttons-group"><!></div></div> <div class="profile-info-box-right"><div class="profile-stats-box" aria-label="user metrics"><div class="metric" aria-label="metric"><a class="metrics"><div class="numeral"><p class="metric-numerals"> </p></div> <p class="data-muted-uppercase">collections</p></a></div> <div class="metric" aria-label="metric"><a class="metrics"><div class="numeral"><p class="metric-numerals"> </p></div> <p class="data-muted-uppercase">posts</p></a></div> <div class="metric" aria-label="metric"><a class="metrics"><div class="numeral"><p class="metric-numerals"> </p></div> <p class="data-muted-uppercase">collections followed</p></a></div> <div class="metric" aria-label="metric"><a class="metrics"><div class="numeral"><p class="metric-numerals"> </p></div> <p class="data-muted-uppercase">users followed</p></a></div></div></div></div> <div class="border-full-vw"></div> <div class="content svelte-x2fbvr"><!> <!></div>',1);function _t(G,o){Te(o,!0);let P=s(()=>o.data.sessionUserId),p=s(()=>o.data.profileData),L=s(()=>o.data.feedItems),E=s(()=>o.data.remaining),k=s(()=>o.data.profileUsername),I=s(()=>o.data.sessionUserCollections),C=s(()=>o.data.updatesPageUpdatedAt),n=s(()=>e(p).profileUserData),U=s(()=>e(p).followInfo),b=s(()=>e(p).permission),H=s(()=>e(p).profileUserBlockInfo),R=s(()=>e(p).profileUserFlagInfo);const A=s(()=>{var a;return(a=e(n))==null?void 0:a.id});let T=s(()=>{var a;return e(b)?(a=e(p))==null?void 0:a.collectionCount:null}),q=s(()=>{var a;return e(b)?(a=e(p))==null?void 0:a.collectionFollowingCount:null}),je=s(()=>{var a;return e(b)?(a=e(p))==null?void 0:a.userFollowingCount:null}),Be=s(()=>{var a;return e(b)?(a=e(p))==null?void 0:a.nowPlayingPostsCount:null}),M=s(()=>{var a;return e(b)?(a=e(p))==null?void 0:a.topAlbumsCollection.slice(0,8):null}),De=s(()=>!!e(M)),Ge=s(()=>{var a;return((a=e(U))==null?void 0:a.follows_now)??!1}),Le=s(()=>{var a;return((a=e(H))==null?void 0:a.active)??!1}),Re=s(()=>{var a;return((a=e(R))==null?void 0:a.active)??!1}),z=s(()=>{var a;return(a=e(n))==null?void 0:a.display_name}),Oe=s(()=>{var a;return(a=e(n))==null?void 0:a.avatar_url}),Ee=s(()=>{var a;return(a=e(n))==null?void 0:a.last_fm_img_url}),ne=s(()=>{var a;return(a=e(n))==null?void 0:a.avatar_artist_name}),ve=s(()=>{var a;return(a=e(n))==null?void 0:a.avatar_release_group_name}),He=s(()=>({img_url:e(Oe),last_fm_img_url:e(Ee),artist_name:e(ne),release_group_name:e(ve)})),de=s(()=>{var a;return((a=e(n))==null?void 0:a.id)==e(P)}),qe=s(()=>{var a;return((a=o.form)==null?void 0:a.showCollectionsModal)??!1}),ze=s(()=>{var a;return((a=o.form)==null?void 0:a.updateSuccess)??!1});var ce=Qa(),ue=B(ce);_a(ue,{get title(){return`${e(z)??""}'s Profile`}});var J=i(ue,2),K=r(J),Q=r(K),V=r(Q),W=r(V),Je=r(W);const Ke=s(()=>`${e(z)}'s avatar: ${e(ve)} by ${e(ne)}`);Pa(Je,{get item(){return e(He)},get altText(){return e(Ke)}}),t(W);var Qe=i(W,2);{var Ve=a=>{var l=Ma();l.__click=[Fa],v(a,l)};y(Qe,a=>{e(de)&&a(Ve)})}t(V);var me=i(V,2),fe=r(me),X=r(fe),Y=r(X),We=r(Y,!0);t(Y);var pe=i(Y,2),Xe=r(pe,!0);t(pe),t(X);var Z=i(X,2),Ye=r(Z,!0);t(Z);var $=i(Z,2),Ze=r($,!0);t($),t(fe),t(me),t(Q);var _e=i(Q,2),$e=r(_e);{var ea=a=>{var l=Ba();l.__click=[ja],v(a,l)},aa=a=>{var l=Da(),c=B(l),u=r(c);ma(u);var m=i(u,2),w=r(m);{var _=d=>{var g=Ae("unfollow");v(d,g)},h=d=>{var g=Ae("+ follow");v(d,g)};y(w,d=>{e(Ge)==!0?d(_):d(h,!1)})}t(m),t(c),ua(c,d=>{var g;return(g=pa)==null?void 0:g(d)});var N=i(c,2);const S=s(()=>{var d;return(d=o.form)==null?void 0:d.userActionSuccess});ba(N,{mode:"profileMenu",get blocked(){return e(Le)},get flagged(){return e(Re)},get profileUserId(){return e(A)},get success(){return e(S)}}),O(()=>fa(u,e(A))),v(a,l)};y($e,a=>{e(de)?a(ea):a(aa,!1)})}t(_e),t(K);var ge=i(K,2),be=r(ge),ee=r(be),ae=r(ee),we=r(ae),he=r(we),ta=r(he,!0);t(he),t(we),j(2),t(ae),t(ee);var te=i(ee,2),re=r(te),xe=r(re),Ue=r(xe),ra=r(Ue,!0);t(Ue),t(xe),j(2),t(re),t(te);var se=i(te,2),oe=r(se),ye=r(oe),Ie=r(ye),sa=r(Ie,!0);t(Ie),t(ye),j(2),t(oe),t(se);var Pe=i(se,2),le=r(Pe),ke=r(le),Ce=r(ke),oa=r(Ce,!0);t(Ce),t(ke),j(2),t(le),t(Pe),t(be),t(ge),t(J);var Ne=i(J,4),Se=r(Ne);{var la=a=>{var l=Ea(),c=r(l);ie(c,{headerText:_=>{var h=Ga();v(_,h)},button:_=>{var h=Oa(),N=r(h);{var S=d=>{var g=Ra();g.__click=[La],v(d,g)};y(N,d=>{var g;((g=e(n))==null?void 0:g.id)==e(P)&&d(S)})}t(h),v(_,h)}});var u=i(c,2);wa(u,{get collectionContents(){return e(M)},get collectionReturned(){return e(De)},collectionType:"release_groups",showTags:!1,layout:"condensed-grid",mode:"view"}),t(l),v(a,l)},ia=(a,l)=>{{var c=u=>{var m=za(),w=r(m);ie(w,{headerText:S=>{var d=Ha();v(S,d)}});var _=i(w,2),h=r(_);h.__click=[qa],t(_),t(m),v(u,m)};y(a,u=>{var m,w;((m=e(M))==null?void 0:m.length)==0&&((w=e(n))==null?void 0:w.id)==e(P)&&u(c)},l)}};y(Se,a=>{e(M)&&e(M).length>0?a(la):a(ia,!1)})}var na=i(Se,2);{var va=a=>{var l=Ka(),c=B(l);ka(c,{mode:"compact",children:(_,h)=>{j();var N=Ja(),S=i(B(N),2);O(()=>x(S,` as of ${e(C)??""}`)),v(_,N)},$$slots:{default:!0}});var u=i(c,2);ha(u,{});var m=i(u,2);const w=s(()=>{var _;return(_=o.form)==null?void 0:_.userActionSuccess});xa(m,{get sessionUserId(){return e(P)},get feedItems(){return e(L)},mode:"feed",get userActionSuccess(){return e(w)},get remaining(){return e(E)},get collections(){return e(I)},get showCollectionsListModal(){return e(qe)},get showSaveSucessModal(){return e(ze)}}),v(a,l)},da=a=>{Ta(a,{get posts(){return e(L)},get displayName(){return e(z)},get username(){return e(k)}})};y(na,a=>{var l;((l=e(n))==null?void 0:l.id)==e(P)?a(va):a(da,!1)})}t(Ne),O(()=>{var a,l,c,u,m;x(We,(a=e(n))==null?void 0:a.display_name),x(Xe,(l=e(n))==null?void 0:l.username),x(Ye,((c=e(n))==null?void 0:c.about)??""),F($,"href",((u=e(n))==null?void 0:u.website)??""),x(Ze,((m=e(n))==null?void 0:m.website)??""),F(ae,"href",`/user/${e(k)??""}/collections`),x(ta,e(T)),F(re,"href",`/user/${e(k)??""}/now-playing-posts`),x(ra,e(Be)),F(oe,"href",`/user/${e(k)??""}/collections-following`),x(sa,e(q)),F(le,"href",`/user/${e(k)??""}/users-following`),x(oa,e(je))}),v(G,ce),Fe()}Me(["click"]);export{_t as component};
