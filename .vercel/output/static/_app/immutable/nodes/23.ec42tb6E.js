import{T as at,U as ft,s as de,H as re,i as E,f as c,O as Ce,k as De,J as G,K as it,A as oe,l as x,e as y,c as I,b as O,V as L,D as ae,u as ee,m as te,o as ie,W as Ae,w as Oe,r as h,n as ve,a as N,t as Ie,g as M,d as Te,C as We,h as P,j as Ee,B as ut,p as dt,q as _t}from"../chunks/scheduler.CXRP0wEC.js";import{S as _e,i as ce,g as me,a as S,f as pe,t as T,h as nt,j as st,k as je,c as X,b as Y,m as Z,d as $,e as ct}from"../chunks/index.a6HmqSPn.js";import{e as Be}from"../chunks/each.Chb-s0GO.js";import{d as mt,w as pt}from"../chunks/entry.a6gQbV6m.js";import{U as lt,N as ht}from"../chunks/NowPlayingPost.BrL7UJq2.js";import{c as gt}from"../chunks/index.CvmYViMX.js";/* empty css                      */import{t as bt,o as vt,b as Ct,m as Se,x as be,g as kt,d as yt,h as It,l as Tt,r as Et,q as St}from"../chunks/updater.C1ZFZVgO.js";import{g as fe}from"../chunks/spread.CgU5AtxT.js";import{d as ze}from"../chunks/parseData.CC0748Oa.js";const Pt={defaultOpen:!1,disabled:!1,forceVisible:!1},{name:Pe}=It("collapsible");function Dt(t){const e={...Pt,...t},n=bt(vt(e,"open","defaultOpen","onOpenChange")),{disabled:i,forceVisible:o}=n,f=e.open??pt(e.defaultOpen),a=Ct(f,e==null?void 0:e.onOpenChange),u=Se(Pe(),{stores:[a,i],returned:([d,v])=>({"data-state":d?"open":"closed","data-disabled":be(v)})}),r=Se(Pe("trigger"),{stores:[a,i],returned:([d,v])=>({"data-state":d?"open":"closed","data-disabled":be(v),disabled:be(v)}),action:d=>({destroy:kt(d,"click",()=>{d.dataset.disabled===void 0&&a.update(g=>!g)})})}),s=mt([a,o],([d,v])=>d||v),l=Se(Pe("content"),{stores:[s,i],returned:([d,v])=>({"data-state":d?"open":"closed","data-disabled":be(v),hidden:d?void 0:!0,style:yt({display:d?void 0:"none"})})});return{elements:{root:u,trigger:r,content:l},states:{open:a},options:n}}function ot(){return{NAME:"collapsible",PARTS:["root","content","trigger"]}}function At(t){const{NAME:e,PARTS:n}=ot(),i=Tt(e,n),o={...Dt(Et(t)),getAttrs:i};return at(e,o),{...o,updateOption:St(o.options)}}function Ot(){const{NAME:t}=ot();return ft(t)}const Ut=t=>({builder:t&4}),Ge=t=>({builder:t[2]}),Vt=t=>({builder:t&4}),Je=t=>({builder:t[2]});function Nt(t){let e,n,i,o;const f=t[10].default,a=x(f,t,t[9],Ge);let u=[t[2],t[4]],r={};for(let s=0;s<u.length;s+=1)r=G(r,u[s]);return{c(){e=y("div"),a&&a.c(),this.h()},l(s){e=I(s,"DIV",{});var l=O(e);a&&a.l(l),l.forEach(c),this.h()},h(){L(e,r)},m(s,l){E(s,e,l),a&&a.m(e,null),t[11](e),n=!0,i||(o=ae(t[2].action(e)),i=!0)},p(s,l){a&&a.p&&(!n||l&516)&&ee(a,f,s,s[9],n?ie(f,s[9],l,Ut):te(s[9]),Ge),L(e,r=fe(u,[l&4&&s[2],l&16&&s[4]]))},i(s){n||(T(a,s),n=!0)},o(s){S(a,s),n=!1},d(s){s&&c(e),a&&a.d(s),t[11](null),i=!1,o()}}}function Mt(t){let e;const n=t[10].default,i=x(n,t,t[9],Je);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,f){i&&i.m(o,f),e=!0},p(o,f){i&&i.p&&(!e||f&516)&&ee(i,n,o,o[9],e?ie(n,o[9],f,Vt):te(o[9]),Je)},i(o){e||(T(i,o),e=!0)},o(o){S(i,o),e=!1},d(o){i&&i.d(o)}}}function Rt(t){let e,n,i,o;const f=[Mt,Nt],a=[];function u(r,s){return r[1]?0:1}return e=u(t),n=a[e]=f[e](t),{c(){n.c(),i=re()},l(r){n.l(r),i=re()},m(r,s){a[e].m(r,s),E(r,i,s),o=!0},p(r,[s]){let l=e;e=u(r),e===l?a[e].p(r,s):(me(),S(a[l],1,1,()=>{a[l]=null}),pe(),n=a[e],n?n.p(r,s):(n=a[e]=f[e](r),n.c()),T(n,1),n.m(i.parentNode,i))},i(r){o||(T(n),o=!0)},o(r){S(n),o=!1},d(r){r&&c(i),a[e].d(r)}}}function Ft(t,e,n){let i;const o=["disabled","open","onOpenChange","asChild","el"];let f=Ce(e,o),a,{$$slots:u={},$$scope:r}=e,{disabled:s=void 0}=e,{open:l=void 0}=e,{onOpenChange:d=void 0}=e,{asChild:v=!1}=e,{el:A=void 0}=e;const{elements:{root:g},states:{open:V},updateOption:R,getAttrs:C}=At({disabled:s,forceVisible:!0,defaultOpen:l,onOpenChange:({next:p})=>(l!==p&&(d==null||d(p),n(5,l=p)),p)});De(t,g,p=>n(8,a=p));const _=C("root");function b(p){oe[p?"unshift":"push"](()=>{A=p,n(0,A)})}return t.$$set=p=>{e=G(G({},e),it(p)),n(4,f=Ce(e,o)),"disabled"in p&&n(6,s=p.disabled),"open"in p&&n(5,l=p.open),"onOpenChange"in p&&n(7,d=p.onOpenChange),"asChild"in p&&n(1,v=p.asChild),"el"in p&&n(0,A=p.el),"$$scope"in p&&n(9,r=p.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&l!==void 0&&V.set(l),t.$$.dirty&64&&R("disabled",s),t.$$.dirty&256&&n(2,i=a),t.$$.dirty&4&&Object.assign(i,_)},[A,v,i,g,f,l,s,d,a,r,u,b]}class Ht extends _e{constructor(e){super(),ce(this,e,Ft,Rt,de,{disabled:6,open:5,onOpenChange:7,asChild:1,el:0})}}const qt=t=>({builder:t&256}),Ke=t=>({builder:t[8]}),Lt=t=>({builder:t&256}),we=t=>({builder:t[8]}),Wt=t=>({builder:t&256}),Qe=t=>({builder:t[8]}),jt=t=>({builder:t&256}),Xe=t=>({builder:t[8]}),Bt=t=>({builder:t&256}),Ye=t=>({builder:t[8]}),zt=t=>({builder:t&256}),Ze=t=>({builder:t[8]});function Gt(t){let e,n,i,o;const f=t[15].default,a=x(f,t,t[14],Ke);let u=[t[8],t[12]],r={};for(let s=0;s<u.length;s+=1)r=G(r,u[s]);return{c(){e=y("div"),a&&a.c(),this.h()},l(s){e=I(s,"DIV",{});var l=O(e);a&&a.l(l),l.forEach(c),this.h()},h(){L(e,r)},m(s,l){E(s,e,l),a&&a.m(e,null),t[20](e),n=!0,i||(o=ae(t[8].action(e)),i=!0)},p(s,l){a&&a.p&&(!n||l&16640)&&ee(a,f,s,s[14],n?ie(f,s[14],l,qt):te(s[14]),Ke),L(e,r=fe(u,[l&256&&s[8],l&4096&&s[12]]))},i(s){n||(T(a,s),n=!0)},o(s){S(a,s),n=!1},d(s){s&&c(e),a&&a.d(s),t[20](null),i=!1,o()}}}function Jt(t){let e,n,i,o,f;const a=t[15].default,u=x(a,t,t[14],we);let r=[t[8],t[12]],s={};for(let l=0;l<r.length;l+=1)s=G(s,r[l]);return{c(){e=y("div"),u&&u.c(),this.h()},l(l){e=I(l,"DIV",{});var d=O(e);u&&u.l(d),d.forEach(c),this.h()},h(){L(e,s)},m(l,d){E(l,e,d),u&&u.m(e,null),t[19](e),i=!0,o||(f=ae(t[8].action(e)),o=!0)},p(l,d){t=l,u&&u.p&&(!i||d&16640)&&ee(u,a,t,t[14],i?ie(a,t[14],d,Lt):te(t[14]),we),L(e,s=fe(r,[d&256&&t[8],d&4096&&t[12]]))},i(l){i||(T(u,l),n&&n.end(1),i=!0)},o(l){S(u,l),l&&(n=nt(e,t[5],t[6])),i=!1},d(l){l&&c(e),u&&u.d(l),t[19](null),l&&n&&n.end(),o=!1,f()}}}function Kt(t){let e,n,i,o,f;const a=t[15].default,u=x(a,t,t[14],Qe);let r=[t[8],t[12]],s={};for(let l=0;l<r.length;l+=1)s=G(s,r[l]);return{c(){e=y("div"),u&&u.c(),this.h()},l(l){e=I(l,"DIV",{});var d=O(e);u&&u.l(d),d.forEach(c),this.h()},h(){L(e,s)},m(l,d){E(l,e,d),u&&u.m(e,null),t[18](e),i=!0,o||(f=ae(t[8].action(e)),o=!0)},p(l,d){t=l,u&&u.p&&(!i||d&16640)&&ee(u,a,t,t[14],i?ie(a,t[14],d,Wt):te(t[14]),Qe),L(e,s=fe(r,[d&256&&t[8],d&4096&&t[12]]))},i(l){i||(T(u,l),l&&(n||Ae(()=>{n=st(e,t[3],t[4]),n.start()})),i=!0)},o(l){S(u,l),i=!1},d(l){l&&c(e),u&&u.d(l),t[18](null),o=!1,f()}}}function wt(t){let e,n,i,o,f,a;const u=t[15].default,r=x(u,t,t[14],Xe);let s=[t[8],t[12]],l={};for(let d=0;d<s.length;d+=1)l=G(l,s[d]);return{c(){e=y("div"),r&&r.c(),this.h()},l(d){e=I(d,"DIV",{});var v=O(e);r&&r.l(v),v.forEach(c),this.h()},h(){L(e,l)},m(d,v){E(d,e,v),r&&r.m(e,null),t[17](e),o=!0,f||(a=ae(t[8].action(e)),f=!0)},p(d,v){t=d,r&&r.p&&(!o||v&16640)&&ee(r,u,t,t[14],o?ie(u,t[14],v,jt):te(t[14]),Xe),L(e,l=fe(s,[v&256&&t[8],v&4096&&t[12]]))},i(d){o||(T(r,d),d&&Ae(()=>{o&&(i&&i.end(1),n=st(e,t[3],t[4]),n.start())}),o=!0)},o(d){S(r,d),n&&n.invalidate(),d&&(i=nt(e,t[5],t[6])),o=!1},d(d){d&&c(e),r&&r.d(d),t[17](null),d&&i&&i.end(),f=!1,a()}}}function Qt(t){let e,n,i,o,f;const a=t[15].default,u=x(a,t,t[14],Ye);let r=[t[8],t[12]],s={};for(let l=0;l<r.length;l+=1)s=G(s,r[l]);return{c(){e=y("div"),u&&u.c(),this.h()},l(l){e=I(l,"DIV",{});var d=O(e);u&&u.l(d),d.forEach(c),this.h()},h(){L(e,s)},m(l,d){E(l,e,d),u&&u.m(e,null),t[16](e),i=!0,o||(f=ae(t[8].action(e)),o=!0)},p(l,d){t=l,u&&u.p&&(!i||d&16640)&&ee(u,a,t,t[14],i?ie(a,t[14],d,Bt):te(t[14]),Ye),L(e,s=fe(r,[d&256&&t[8],d&4096&&t[12]]))},i(l){i||(T(u,l),l&&Ae(()=>{i&&(n||(n=je(e,t[1],t[2],!0)),n.run(1))}),i=!0)},o(l){S(u,l),l&&(n||(n=je(e,t[1],t[2],!1)),n.run(0)),i=!1},d(l){l&&c(e),u&&u.d(l),t[16](null),l&&n&&n.end(),o=!1,f()}}}function Xt(t){let e;const n=t[15].default,i=x(n,t,t[14],Ze);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,f){i&&i.m(o,f),e=!0},p(o,f){i&&i.p&&(!e||f&16640)&&ee(i,n,o,o[14],e?ie(n,o[14],f,zt):te(o[14]),Ze)},i(o){e||(T(i,o),e=!0)},o(o){S(i,o),e=!1},d(o){i&&i.d(o)}}}function Yt(t){let e,n,i,o;const f=[Xt,Qt,wt,Kt,Jt,Gt],a=[];function u(r,s){return r[7]&&r[9]?0:r[1]&&r[9]?1:r[3]&&r[5]&&r[9]?2:r[3]&&r[9]?3:r[5]&&r[9]?4:r[9]?5:-1}return~(e=u(t))&&(n=a[e]=f[e](t)),{c(){n&&n.c(),i=re()},l(r){n&&n.l(r),i=re()},m(r,s){~e&&a[e].m(r,s),E(r,i,s),o=!0},p(r,[s]){let l=e;e=u(r),e===l?~e&&a[e].p(r,s):(n&&(me(),S(a[l],1,1,()=>{a[l]=null}),pe()),~e?(n=a[e],n?n.p(r,s):(n=a[e]=f[e](r),n.c()),T(n,1),n.m(i.parentNode,i)):n=null)},i(r){o||(T(n),o=!0)},o(r){S(n),o=!1},d(r){r&&c(i),~e&&a[e].d(r)}}}function Zt(t,e,n){let i;const o=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","el"];let f=Ce(e,o),a,u,{$$slots:r={},$$scope:s}=e,{transition:l=void 0}=e,{transitionConfig:d=void 0}=e,{inTransition:v=void 0}=e,{inTransitionConfig:A=void 0}=e,{outTransition:g=void 0}=e,{outTransitionConfig:V=void 0}=e,{asChild:R=!1}=e,{el:C=void 0}=e;const{elements:{content:_},states:{open:b},getAttrs:p}=Ot();De(t,_,m=>n(13,a=m)),De(t,b,m=>n(9,u=m));const K=p("content");function W(m){oe[m?"unshift":"push"](()=>{C=m,n(0,C)})}function D(m){oe[m?"unshift":"push"](()=>{C=m,n(0,C)})}function J(m){oe[m?"unshift":"push"](()=>{C=m,n(0,C)})}function ue(m){oe[m?"unshift":"push"](()=>{C=m,n(0,C)})}function j(m){oe[m?"unshift":"push"](()=>{C=m,n(0,C)})}return t.$$set=m=>{e=G(G({},e),it(m)),n(12,f=Ce(e,o)),"transition"in m&&n(1,l=m.transition),"transitionConfig"in m&&n(2,d=m.transitionConfig),"inTransition"in m&&n(3,v=m.inTransition),"inTransitionConfig"in m&&n(4,A=m.inTransitionConfig),"outTransition"in m&&n(5,g=m.outTransition),"outTransitionConfig"in m&&n(6,V=m.outTransitionConfig),"asChild"in m&&n(7,R=m.asChild),"el"in m&&n(0,C=m.el),"$$scope"in m&&n(14,s=m.$$scope)},t.$$.update=()=>{t.$$.dirty&8192&&n(8,i=a),t.$$.dirty&256&&Object.assign(i,K)},[C,l,d,v,A,g,V,R,i,u,_,b,f,a,s,r,W,D,J,ue,j]}class $t extends _e{constructor(e){super(),ce(this,e,Zt,Yt,de,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,el:0})}}function xt(t,{delay:e=0,duration:n=400,easing:i=gt,axis:o="y"}={}){const f=getComputedStyle(t),a=+f.opacity,u=o==="y"?"height":"width",r=parseFloat(f[u]),s=o==="y"?["top","bottom"]:["left","right"],l=s.map(C=>`${C[0].toUpperCase()}${C.slice(1)}`),d=parseFloat(f[`padding${l[0]}`]),v=parseFloat(f[`padding${l[1]}`]),A=parseFloat(f[`margin${l[0]}`]),g=parseFloat(f[`margin${l[1]}`]),V=parseFloat(f[`border${l[0]}Width`]),R=parseFloat(f[`border${l[1]}Width`]);return{delay:e,duration:n,easing:i,css:C=>`overflow: hidden;opacity: ${Math.min(C*20,1)*a};${u}: ${C*r}px;padding-${s[0]}: ${C*d}px;padding-${s[1]}: ${C*v}px;margin-${s[0]}: ${C*A}px;margin-${s[1]}: ${C*g}px;border-${s[0]}-width: ${C*V}px;border-${s[1]}-width: ${C*R}px;`}}function ei(t){let e,n='<form class="reply" method="post" action="?/submitReply"><textarea rows="4" cols="1" id="reply-text" name="reply-text" spellcheck="true" placeholder="Reply..." required=""></textarea> <button class="standard svelte-zeyi1k" formaction="?/submitReply">submit</button></form>';return{c(){e=y("div"),e.innerHTML=n,this.h()},l(i){e=I(i,"DIV",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-pitdg8"&&(e.innerHTML=n),this.h()},h(){h(e,"class","reply-editor")},m(i,o){E(i,e,o)},p:ve,i:ve,o:ve,d(i){i&&c(e)}}}class rt extends _e{constructor(e){super(),ce(this,e,null,ei,de,{})}}function $e(t){let e,n="edited";return{c(){e=y("span"),e.textContent=n,this.h()},l(i){e=I(i,"SPAN",{class:!0,"data-svelte-h":!0}),Oe(e)!=="svelte-1f8ii9m"&&(e.textContent=n),this.h()},h(){h(e,"class","status-badge")},m(i,o){E(i,e,o)},d(i){i&&c(e)}}}function ti(t){let e,n;return e=new lt({props:{mode:"postMenu"}}),{c(){X(e.$$.fragment)},l(i){Y(e.$$.fragment,i)},m(i,o){Z(e,i,o),n=!0},p:ve,i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function ii(t){let e,n,i;function o(a){t[4](a)}let f={mode:"sessionUserPostMenu"};return t[0]!==void 0&&(f.editState=t[0]),e=new lt({props:f}),oe.push(()=>ct(e,"editState",o)),{c(){X(e.$$.fragment)},l(a){Y(e.$$.fragment,a)},m(a,u){Z(e,a,u),i=!0},p(a,u){const r={};!n&&u&1&&(n=!0,r.editState=a[0],ut(()=>n=!1)),e.$set(r)},i(a){i||(T(e.$$.fragment,a),i=!0)},o(a){S(e.$$.fragment,a),i=!1},d(a){$(e,a)}}}function ni(t){let e,n;return e=new rt({}),{c(){X(e.$$.fragment)},l(i){Y(e.$$.fragment,i)},m(i,o){Z(e,i,o),n=!0},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function si(t){let e,n;return e=new $t({props:{transition:xt,$$slots:{default:[ni]},$$scope:{ctx:t}}}),{c(){X(e.$$.fragment)},l(i){Y(e.$$.fragment,i)},m(i,o){Z(e,i,o),n=!0},p(i,o){const f={};o&32&&(f.$$scope={dirty:o,ctx:i}),e.$set(f)},i(i){n||(T(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function li(t){let e,n,i,o,f,a,u,r,s,l,d=t[1].display_name+"",v,A,g,V,R=ze(t[1].created_at)+"",C,_,b,p,K,W,D=t[1].text+"",J,ue,j,m,Ue="",ke,ne,H,q,ye,w,B,F=t[1].status==="edited"&&$e();const Ve=[ii,ti],Q=[];function Ne(k,U){return k[1].userId==k[2]?0:1}return H=Ne(t),q=Q[H]=Ve[H](t),w=new Ht({props:{open:t[3],$$slots:{default:[si]},$$scope:{ctx:t}}}),{c(){e=y("div"),n=y("div"),i=y("div"),o=y("div"),f=y("img"),r=N(),s=y("div"),l=y("span"),v=Ie(d),A=N(),g=y("span"),V=y("a"),C=Ie(R),b=N(),p=y("div"),F&&F.c(),K=N(),W=y("p"),J=Ie(D),ue=N(),j=y("div"),m=y("div"),m.innerHTML=Ue,ke=N(),ne=y("div"),q.c(),ye=N(),X(w.$$.fragment),this.h()},l(k){e=I(k,"DIV",{class:!0});var U=O(e);n=I(U,"DIV",{class:!0});var z=O(n);i=I(z,"DIV",{class:!0});var se=O(i);o=I(se,"DIV",{class:!0});var le=O(o);f=I(le,"IMG",{class:!0,src:!0,alt:!0}),r=M(le),s=I(le,"DIV",{class:!0});var he=O(s);l=I(he,"SPAN",{class:!0});var Me=O(l);v=Te(Me,d),Me.forEach(c),A=M(he),g=I(he,"SPAN",{class:!0});var Re=O(g);V=I(Re,"A",{href:!0});var Fe=O(V);C=Te(Fe,R),Fe.forEach(c),Re.forEach(c),he.forEach(c),le.forEach(c),b=M(se),p=I(se,"DIV",{class:!0});var He=O(p);F&&F.l(He),He.forEach(c),se.forEach(c),K=M(z),W=I(z,"P",{class:!0});var qe=O(W);J=Te(qe,D),qe.forEach(c),ue=M(z),j=I(z,"DIV",{class:!0});var ge=O(j);m=I(ge,"DIV",{class:!0,"data-svelte-h":!0}),Oe(m)!=="svelte-asnvvb"&&(m.innerHTML=Ue),ke=M(ge),ne=I(ge,"DIV",{class:!0});var Le=O(ne);q.l(Le),Le.forEach(c),ge.forEach(c),z.forEach(c),ye=M(U),Y(w.$$.fragment,U),U.forEach(c),this.h()},h(){var k;h(f,"class","comment-avatar"),We(f.src,a=t[1].avatar_url)||h(f,"src",a),h(f,"alt",u=`${t[1].display_name}'s avatar`),h(l,"class","comment-display-name"),h(V,"href",_=`/${t[1].original_poster_username}/now-playing/${t[1].original_post_date}#${(k=t[1].username)==null?void 0:k.concat(t[1].created_at.valueOf().toString())}`),h(g,"class","comment-date"),h(s,"class","row-group-column"),h(o,"class","row-group-user-data"),h(p,"class","row-group"),h(i,"class","comment-metadata"),h(W,"class","comment-text"),h(m,"class","row-group"),h(ne,"class","row-group-icon-description"),h(j,"class","comment-reaction-row"),h(n,"class","comment"),h(e,"class","comment-panel")},m(k,U){E(k,e,U),P(e,n),P(n,i),P(i,o),P(o,f),P(o,r),P(o,s),P(s,l),P(l,v),P(s,A),P(s,g),P(g,V),P(V,C),P(i,b),P(i,p),F&&F.m(p,null),P(n,K),P(n,W),P(W,J),P(n,ue),P(n,j),P(j,m),P(j,ke),P(j,ne),Q[H].m(ne,null),P(e,ye),Z(w,e,null),B=!0},p(k,[U]){var le;(!B||U&2&&!We(f.src,a=k[1].avatar_url))&&h(f,"src",a),(!B||U&2&&u!==(u=`${k[1].display_name}'s avatar`))&&h(f,"alt",u),(!B||U&2)&&d!==(d=k[1].display_name+"")&&Ee(v,d),(!B||U&2)&&R!==(R=ze(k[1].created_at)+"")&&Ee(C,R),(!B||U&2&&_!==(_=`/${k[1].original_poster_username}/now-playing/${k[1].original_post_date}#${(le=k[1].username)==null?void 0:le.concat(k[1].created_at.valueOf().toString())}`))&&h(V,"href",_),k[1].status==="edited"?F||(F=$e(),F.c(),F.m(p,null)):F&&(F.d(1),F=null),(!B||U&2)&&D!==(D=k[1].text+"")&&Ee(J,D);let z=H;H=Ne(k),H===z?Q[H].p(k,U):(me(),S(Q[z],1,1,()=>{Q[z]=null}),pe(),q=Q[H],q?q.p(k,U):(q=Q[H]=Ve[H](k),q.c()),T(q,1),q.m(ne,null));const se={};U&32&&(se.$$scope={dirty:U,ctx:k}),w.$set(se)},i(k){B||(T(q),T(w.$$.fragment,k),B=!0)},o(k){S(q),S(w.$$.fragment,k),B=!1},d(k){k&&c(e),F&&F.d(),Q[H].d(),$(w)}}}function oi(t,e,n){let{reply:i}=e,{sessionUserId:o}=e,{editState:f=!1}=e,a;function u(r){f=r,n(0,f)}return t.$$set=r=>{"reply"in r&&n(1,i=r.reply),"sessionUserId"in r&&n(2,o=r.sessionUserId),"editState"in r&&n(0,f=r.editState)},[f,i,o,a,u]}class ri extends _e{constructor(e){super(),ce(this,e,oi,li,de,{reply:1,sessionUserId:2,editState:0})}}function xe(t,e,n){const i=t.slice();return i[7]=e[n],i}function et(t){var R,C;let e,n,i,o,f,a,u,r,s,l,d,v;u=new ht({props:{sessionUserId:t[1],post:t[2],formData:((R=t[0])==null?void 0:R.success)??null,editState:((C=t[0])==null?void 0:C.editState)??!1,reactionActive:t[3]??!1}}),s=new rt({});let A=Be(t[4]),g=[];for(let _=0;_<A.length;_+=1)g[_]=tt(xe(t,A,_));const V=_=>S(g[_],1,1,()=>{g[_]=null});return{c(){e=y("input"),n=N(),i=y("input"),o=N(),f=y("input"),a=N(),X(u.$$.fragment),r=N(),X(s.$$.fragment),l=N();for(let _=0;_<g.length;_+=1)g[_].c();d=re(),this.h()},l(_){e=I(_,"INPUT",{type:!0,name:!0,id:!0,form:!0}),n=M(_),i=I(_,"INPUT",{type:!0,name:!0,id:!0,form:!0}),o=M(_),f=I(_,"INPUT",{type:!0,name:!0,id:!0,form:!0}),a=M(_),Y(u.$$.fragment,_),r=M(_),Y(s.$$.fragment,_),l=M(_);for(let b=0;b<g.length;b+=1)g[b].l(_);d=re(),this.h()},h(){h(e,"type","hidden"),h(e,"name","post-id"),h(e,"id","post-id"),h(e,"form","submitReply"),e.value=t[5],h(i,"type","hidden"),h(i,"name","post-id"),h(i,"id","post-id"),h(i,"form","deletePost"),i.value=t[5],h(f,"type","hidden"),h(f,"name","post-id"),h(f,"id","post-id"),h(f,"form","flagPost"),f.value=t[5]},m(_,b){E(_,e,b),E(_,n,b),E(_,i,b),E(_,o,b),E(_,f,b),E(_,a,b),Z(u,_,b),E(_,r,b),Z(s,_,b),E(_,l,b);for(let p=0;p<g.length;p+=1)g[p]&&g[p].m(_,b);E(_,d,b),v=!0},p(_,b){var K,W;const p={};if(b&2&&(p.sessionUserId=_[1]),b&4&&(p.post=_[2]),b&1&&(p.formData=((K=_[0])==null?void 0:K.success)??null),b&1&&(p.editState=((W=_[0])==null?void 0:W.editState)??!1),b&8&&(p.reactionActive=_[3]??!1),u.$set(p),b&18){A=Be(_[4]);let D;for(D=0;D<A.length;D+=1){const J=xe(_,A,D);g[D]?(g[D].p(J,b),T(g[D],1)):(g[D]=tt(J),g[D].c(),T(g[D],1),g[D].m(d.parentNode,d))}for(me(),D=A.length;D<g.length;D+=1)V(D);pe()}},i(_){if(!v){T(u.$$.fragment,_),T(s.$$.fragment,_);for(let b=0;b<A.length;b+=1)T(g[b]);v=!0}},o(_){S(u.$$.fragment,_),S(s.$$.fragment,_),g=g.filter(Boolean);for(let b=0;b<g.length;b+=1)S(g[b]);v=!1},d(_){_&&(c(e),c(n),c(i),c(o),c(f),c(a),c(r),c(l),c(d)),$(u,_),$(s,_),_t(g,_)}}}function tt(t){let e,n,i,o,f,a,u,r;return a=new ri({props:{reply:t[7],sessionUserId:t[1]}}),{c(){e=y("input"),n=N(),i=y("input"),o=N(),f=y("div"),X(a.$$.fragment),u=N(),this.h()},l(s){e=I(s,"INPUT",{type:!0,name:!0,id:!0,form:!0}),n=M(s),i=I(s,"INPUT",{type:!0,name:!0,id:!0,form:!0}),o=M(s),f=I(s,"DIV",{id:!0});var l=O(f);Y(a.$$.fragment,l),u=M(l),l.forEach(c),this.h()},h(){var s;h(e,"type","hidden"),h(e,"name","post-id"),h(e,"id","post-id"),h(e,"form","deletePost"),e.value=t[7].id,h(i,"type","hidden"),h(i,"name","post-id"),h(i,"id","post-id"),h(i,"form","flagPost"),i.value=t[7].id,h(f,"id",(s=t[7].username)==null?void 0:s.concat(t[7].created_at.valueOf().toString()))},m(s,l){E(s,e,l),E(s,n,l),E(s,i,l),E(s,o,l),E(s,f,l),Z(a,f,null),P(f,u),r=!0},p(s,l){const d={};l&2&&(d.sessionUserId=s[1]),a.$set(d)},i(s){r||(T(a.$$.fragment,s),r=!0)},o(s){S(a.$$.fragment,s),r=!1},d(s){s&&(c(e),c(n),c(i),c(o),c(f)),$(a)}}}function ai(t){var a;let e,n,i,o;document.title=e=`
		`+((a=t[2])==null?void 0:a.display_name)+`'s Now Playing Post
	`;let f=t[1]&&et(t);return{c(){n=N(),i=y("div"),f&&f.c(),this.h()},l(u){dt("svelte-1trb7xo",document.head).forEach(c),n=M(u),i=I(u,"DIV",{class:!0});var s=O(i);f&&f.l(s),s.forEach(c),this.h()},h(){h(i,"class","post-panel")},m(u,r){E(u,n,r),E(u,i,r),f&&f.m(i,null),o=!0},p(u,[r]){var s;(!o||r&4)&&e!==(e=`
		`+((s=u[2])==null?void 0:s.display_name)+`'s Now Playing Post
	`)&&(document.title=e),u[1]?f?(f.p(u,r),r&2&&T(f,1)):(f=et(u),f.c(),T(f,1),f.m(i,null)):f&&(me(),S(f,1,1,()=>{f=null}),pe())},i(u){o||(T(f),o=!0)},o(u){S(f),o=!1},d(u){u&&(c(n),c(i)),f&&f.d()}}}function fi(t,e,n){let{data:i}=e,{form:o}=e,{sessionUserId:f,post:a,postReactionActive:u}=i,r=i==null?void 0:i.replies;const s=a==null?void 0:a.id;return t.$$set=l=>{"data"in l&&n(6,i=l.data),"form"in l&&n(0,o=l.form)},t.$$.update=()=>{t.$$.dirty&64&&n(1,{sessionUserId:f,post:a,postReactionActive:u}=i,f,(n(2,a),n(6,i)),(n(3,u),n(6,i)))},[o,f,a,u,r,s,i]}class Ci extends _e{constructor(e){super(),ce(this,e,fi,ai,de,{data:6,form:0})}}export{Ci as component};
