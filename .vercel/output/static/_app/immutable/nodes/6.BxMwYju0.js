import"../chunks/CWj6FrbW.js";import{p as mt,f as b,b as pt,ag as ut,d as s,c as o,g as t,e as ht,r,s as T,a as U,t as u,n as x}from"../chunks/DKxP8oaF.js";import{s as i}from"../chunks/d8TzcK2t.js";import{i as j}from"../chunks/XPA7DDzn.js";import{e as gt,i as ft}from"../chunks/Cpe_MceB.js";import{t as m,a as d,b as y}from"../chunks/DCT9fmD9.js";import{h as bt}from"../chunks/15cUv8OK.js";import{a as xt}from"../chunks/Pq-04fzQ.js";import{r as X,s as E,b as Y}from"../chunks/DubPOQGL.js";import{d as jt}from"../chunks/o4T939ll.js";import{e as yt}from"../chunks/B9Qn1ecM.js";import{p as Tt}from"../chunks/-Ocsa0V4.js";import{S as $t}from"../chunks/CdBRc-Mf.js";import{N as Z}from"../chunks/BPwSGjQ8.js";var kt=m("<a> </a>"),Mt=($,_)=>T(_,!0),wt=m('<button class="more-info svelte-48cl4j">post changelog</button> <!>',1),Ot=m("<!> <a> </a>",1),St=($,_)=>T(_,!0),Nt=m('<button class="more-info svelte-48cl4j">moderation log</button> <!>',1),Pt=m('<tr class="svelte-48cl4j"><td class="svelte-48cl4j"> </td><td class="svelte-48cl4j"> </td><td class="svelte-48cl4j"><a> </a></td><td class="svelte-48cl4j"><!></td><td class="svelte-48cl4j"><!></td><td class="svelte-48cl4j"><!> <form method="POST" action="?/update"><input type="hidden" name="item-id" id="item-id"> <input type="hidden" name="item-type" id="item-type"> <textarea name="notes" id="notes"></textarea> <div class="cell-row svelte-48cl4j"><div class="input-column svelte-48cl4j"><label for="resolved">archive</label> <input type="checkbox" name="resolved" id="resolved"></div> <button class="standard" type="submit">update</button></div></form></td></tr>'),Dt=m('<!> <div class="panel svelte-48cl4j"><h1>Moderation Dashboard</h1> <table class="svelte-48cl4j"><thead><tr><th scope="col" class="svelte-48cl4j">Time</th><th scope="col" class="svelte-48cl4j">Type</th><th scope="col" class="svelte-48cl4j">User</th><th scope="col" class="svelte-48cl4j">Target User</th><th scope="col" class="svelte-48cl4j">Target Post</th><th scope="col" class="svelte-48cl4j">Moderate</th></tr></thead><tbody class="svelte-48cl4j"></tbody></table></div>',1);function Vt($,_){mt(_,!0);let tt=ht(()=>_.data.queueItems),k=U(!1);function et(p){if(p.target_user_id)return"user";if(p.target_post_id)return"post"}let z=U(!1),A=U(!1);var B=Dt();bt(p=>{ut.title=`
        Moderation Dashboard
    `});var F=b(B);$t(F,{title:"Moderation Dashboard"});var G=s(F,2),H=s(o(G),2),K=s(o(H));gt(K,21,()=>t(tt),ft,(p,e)=>{var M=Pt(),w=o(M),at=o(w,!0);r(w);var O=s(w),st=o(O,!0);r(O);var S=s(O),N=o(S),rt=o(N,!0);r(N),r(S);var P=s(S),ot=o(P);{var lt=a=>{var l=kt(),n=o(l,!0);r(l),u(()=>{E(l,"href",`/user/${t(e).target_username??""}`),i(n,t(e).target_username)}),d(a,l)};j(ot,a=>{t(e).target_username&&a(lt)})}r(P);var D=s(P),nt=o(D);{var dt=a=>{var l=Ot(),n=b(l);{var J=c=>{var v=wt(),g=b(v);g.__click=[Mt,A];var it=s(g,2);Z(it,{get showModal(){return t(A)},headerText:L=>{x();var f=y("Post Changelog");d(L,f)},message:L=>{x();var f=y();u(_t=>i(f,_t),[()=>JSON.stringify(t(e).post_changelog)]),d(L,f)},$$slots:{headerText:!0,message:!0}}),d(c,v)};j(n,c=>{Object.keys(t(e).post_changelog).length>0&&c(J)})}var h=s(n,2),W=o(h);r(h),u(c=>{E(h,"href",`/posts/${t(e).target_post_username??""}/now-playing/${c??""}`),i(W,`${t(e).target_post_username??""}: ${t(e).target_post_timestamp??""}`)},[()=>Tt(t(e).target_post_timestamp)]),d(a,l)};j(nt,a=>{t(e).target_post_timestamp&&a(dt)})}r(D);var Q=s(D),R=o(Q);{var ct=a=>{var l=Nt(),n=b(l);n.__click=[St,z];var J=s(n,2);Z(J,{get showModal(){return t(z)},headerText:c=>{x();var v=y("Moderation Log");d(c,v)},message:c=>{x();var v=y();u(g=>i(v,g),[()=>JSON.stringify(t(e).moderation_log)]),d(c,v)},$$slots:{headerText:!0,message:!0}}),d(a,l)};j(R,a=>{Object.keys(t(e).moderation_log).length>0&&a(ct)})}var q=s(R,2),C=o(q);X(C);var I=s(C,2);X(I);var V=s(I,4),vt=s(o(V),2);r(V),r(q),xt(q,(a,l)=>{var n;return(n=yt)==null?void 0:n(a,l)},()=>()=>(T(k,!0),async({update:a})=>{await a(),T(k,!1)})),r(Q),r(M),u(a=>{i(at,t(e).timestamp),i(st,t(e).type),E(N,"href",`/user/${t(e).username??""}`),i(rt,t(e).username),Y(C,t(e).moderation_item_id),Y(I,a),vt.disabled=t(k)},[()=>et(t(e))]),d(p,M)}),r(K),r(H),r(G),d($,B),pt()}jt(["click"]);export{Vt as component};
