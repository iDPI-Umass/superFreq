import"../chunks/CWj6FrbW.js";import{p as Ae,u as Ue,a as T,c as i,d as a,t as E,b as Me,av as je,s as n,g as e,r as l,a1 as Fe,f as ye,e as xe,n as u}from"../chunks/DKxP8oaF.js";import{s as Oe}from"../chunks/d8TzcK2t.js";import{i as we}from"../chunks/XPA7DDzn.js";import{k as Te}from"../chunks/CPwN5FOA.js";import{t as A,a as y,b as U}from"../chunks/DCT9fmD9.js";import{s as ke,r as h,b as j}from"../chunks/DubPOQGL.js";import{d as Ee,e as Pe,b as Ge}from"../chunks/o4T939ll.js";import{b as Ke,a as C}from"../chunks/Nvk8_zKA.js";import{p as f}from"../chunks/DIWzF7VF.js";import{S as Qe}from"../chunks/CdBRc-Mf.js";import{C as Ve}from"../chunks/CnuENGoH.js";import{T as Ie}from"../chunks/WGsPBJr4.js";import{I as We}from"../chunks/DT_Qv_zU.js";import{P as Ze}from"../chunks/BNhe8YCt.js";import{s as Se}from"../chunks/BpB5Zjcp.js";import{a as $e}from"../chunks/Pq-04fzQ.js";import{b as et}from"../chunks/CYaf7cAz.js";import{p as Ce}from"../chunks/C6N4_jbr.js";import{e as tt}from"../chunks/B9Qn1ecM.js";function at(M,o,v,k){o(!1),e(v).close(),k(null)}function it(M,o,v){n(o,!0),Promise.resolve(v()).then(()=>{n(o,!1)})}var lt=A('<dialog class="notification svelte-1p4us4r" aria-label="notification modal"><div class="dialog-header"><h1 class="notification"><!></h1></div> <p class="notification"><!></p> <div class="options svelte-1p4us4r"><form method="POST"><button class="standard" type="submit"> </button></form> <button class="standard" aria-label="close modal" formmethod="dialog">cancel</button></div></dialog>');function ot(M,o){Ae(o,!0);let v=Ce(o,"showModal",15),k=Ce(o,"success",7,null),b=T(void 0),p=T(!1);Ue(()=>{e(b).addEventListener("click",m=>{const _=e(b).getBoundingClientRect();(m.clientX<_.left||m.clientX>_.right||m.clientY<_.top||m.clientY>_.bottom)&&e(b).close()}),e(b)&&v()&&e(b).showModal(),e(b)&&!v()&&e(b).close()});var P=lt();Pe("keydown",je,m=>{m.key});var D=i(P),q=i(D),z=i(q);Se(z,()=>o.headerText),l(q),l(D);var g=a(D,2),O=i(g);Se(O,()=>o.message??Fe),l(g);var B=a(g,2),r=i(B),I=i(r);I.__click=[it,p,k];var x=i(I,!0);l(I),l(r),$e(r,m=>{var _;return(_=tt)==null?void 0:_(m)});var S=a(r,2);S.__click=[at,v,b,k],l(B),l(P),et(P,m=>n(b,m),()=>e(b)),E(()=>{ke(r,"action",o.formAction),ke(I,"aria-label",`submit ${o.buttonText??""}`),I.disabled=e(p),Oe(x,o.buttonText),S.disabled=e(p)}),Pe("close",P,()=>v(!1)),y(M,P),Me()}Ee(["click"]);var rt=A("<span>edit collection</span>"),st=A('<input type="hidden" name="collection-contents">'),nt=A('<input type="hidden" name="deleted-items">'),dt=A("<u>Open</u> collections can be viewed and edited by anyone. <br> <br> <u>Public</u> collections can be viewed by anyone, but only edited by you. <br> <br> <u>Private</u> collections can only be viewed and edited by you.",1),ct=A('<fieldset><div class="label-group"><legend>view sort</legend> <!></div> <ul><li><input class="radio" type="radio" name="view-sort" id="view-sort"> <label for="default">default</label></li> <li><input class="radio" type="radio" name="view-sort" id="view-sort"> <label for="reverse">reverse</label></li> <li><input class="radio" type="radio" name="view-sort" id="view-sort"> <label for="artist-asc">artists a --> z</label></li> <li><input class="radio" type="radio" name="view-sort" id="view-sort"> <label for="artist-desc">artists z --> a</label></li></ul></fieldset> <fieldset><div class="label-group"><legend>Status of collection</legend> <!></div> <ul><li><input class="radio" type="radio" name="status" id="open"> <label for="open">open</label></li> <li><input class="radio" type="radio" name="status" id="public"> <label for="public">public</label></li> <li><input class="radio" type="radio" name="status" id="private"> <label for="private">private</label></li></ul></fieldset>',1),ut=(M,o)=>n(o,!0),vt=A('<!> <div class="collection-container"><!> <form class="horizontal" method="POST" action="?/updateCollection"><div class="form-column"><div class="label-group"><label class="text-label" for="collection-title">collection name</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="collection-title" id="collection-title" required> <input type="hidden" name="status"> <!> <!> <!> <!></div> <div class="form-column"><label class="text-label" for="description">Collection Description</label> <textarea id="description" name="description" rows="10" cols="1" spellcheck="true" required></textarea> <div class="collection-info-button-spacing"><button type="button" class="double-border-top"><div class="inner-border">delete collection</div></button> <button class="double-border-top" formAction="?/updateCollection"><div class="inner-border">save edits</div></button></div></div></form> <!> <div class="bottom-double-border svelte-gc6ymb"></div></div> <!> <div class="buffer svelte-gc6ymb"></div>',1);function Dt(M,o){Ae(o,!0);const v=[],k=[];let b=o.data,p=f(b.collection);const{sessionUserId:P,collectionId:D,infoBoxText:q}=o.data;let z=T(null);const g=f(p==null?void 0:p.info);let O=T(f(g.title)),B=g.type,r=T(f(g.status)),I=f(g.description_text),x=T(f(g.default_view_sort)),S=T(f(p==null?void 0:p.collectionContents)),m=T(!1),_=T(f(p==null?void 0:p.deletedCollectionContents));const De=xe(()=>P==g.owner_id);let F=T(!1);var re=vt(),se=ye(re);Qe(se,{get title(){return`Edit ${g.title??""}`}});var G=a(se,2),ne=i(G);Ze(ne,{headerText:c=>{var d=rt();y(c,d)}});var K=a(ne,2),Q=i(K),V=a(i(Q),2);h(V);var W=a(V,2);h(W);var de=a(W,2);Te(de,()=>{var t;return(t=e(S))==null?void 0:t.length},t=>{var c=st();h(c),E(d=>j(c,d),[()=>JSON.stringify(e(S))]),y(t,c)});var ce=a(de,2);Te(ce,()=>{var t;return(t=e(_))==null?void 0:t.length},t=>{var c=nt();h(c),E(d=>j(c,d),[()=>JSON.stringify(e(_))]),y(t,c)});var ue=a(ce,2);{var qe=t=>{var c=ct(),d=ye(c),w=i(d),He=a(i(w),2);Ie(He,{children:(s,Re)=>{u();var oe=U("This how your collection is sorted by default when other users view it. This does not change or effect the order of the items in the editor below.");y(s,oe)}}),l(w);var fe=a(w,2),$=i(fe),Y=i($);h(Y),Y.value=(Y.__value="default")==null?"":"default",u(2),l($);var ee=a($,2),J=i(ee);h(J),J.value=(J.__value="reverse")==null?"":"reverse",u(2),l(ee);var te=a(ee,2),N=i(te);h(N),N.value=(N.__value="artist_asc")==null?"":"artist_asc",u(2),l(te);var be=a(te,2),X=i(be);h(X),X.value=(X.__value="artist_desc")==null?"":"artist_desc",u(2),l(be),l(fe),l(d);var _e=a(d,2),ae=i(_e),Le=a(i(ae),2);Ie(Le,{children:(s,Re)=>{var oe=dt();u(13),y(s,oe)}}),l(ae);var ge=a(ae,2),ie=i(ge),H=i(ie);h(H),H.value=(H.__value="open")==null?"":"open",u(2),l(ie);var le=a(ie,2),L=i(le);h(L),L.value=(L.__value="public")==null?"":"public",u(2),l(le);var he=a(le,2),R=i(he);h(R),R.value=(R.__value="private")==null?"":"private",u(2),l(he),l(ge),l(_e),C(v,[],Y,()=>e(x),s=>n(x,s)),C(v,[],J,()=>e(x),s=>n(x,s)),C(v,[],N,()=>e(x),s=>n(x,s)),C(v,[],X,()=>e(x),s=>n(x,s)),C(k,[],H,()=>e(r),s=>n(r,s)),C(k,[],L,()=>e(r),s=>n(r,s)),C(k,[],R,()=>e(r),s=>n(r,s)),y(t,c)};we(ue,t=>{e(De)&&t(qe)})}var ze=a(ue,2);{var Be=t=>{We(t,{mode:"inline",children:(c,d)=>{u();var w=U();E(()=>Oe(w,q[e(r)])),y(c,w)},$$slots:{default:!0}})};we(ze,t=>{e(r)&&e(r)!="public"&&t(Be)})}l(Q);var ve=a(Q,2),Z=a(i(ve),2);Ge(Z);var pe=a(Z,2),me=i(pe);me.__click=[ut,F];var Ye=a(me,2);l(pe),l(ve),l(K);var Je=a(K,2);Ve(Je,{collectionType:B,get collectionStatus(){return e(r)},get collectionItems(){return e(S)},set collectionItems(t){n(S,f(t))},get deletedItems(){return e(_)},set deletedItems(t){n(_,f(t))},get itemAdded(){return e(m)},set itemAdded(t){n(m,f(t))},get imgPromise(){return e(z)},set imgPromise(t){n(z,f(t))}}),u(2),l(G);var Ne=a(G,2);const Xe=xe(()=>{var t;return(t=o.form)==null?void 0:t.success});ot(Ne,{formAction:"?/deleteCollection",buttonText:"delete collection",get success(){return e(Xe)},get showModal(){return e(F)},set showModal(d){n(F,f(d))},headerText:d=>{u();var w=U("delete collection?");y(d,w)},message:d=>{u();var w=U("Do you want to delete this collection? You will never be able to access it again.");y(d,w)},$$slots:{headerText:!0,message:!0}}),u(2),E(()=>{j(W,e(r)),j(Z,I),Ye.disabled=!(e(r)&&e(O))}),Ke(V,()=>e(O),t=>n(O,t)),y(M,re),Me()}Ee(["click"]);export{Dt as component};
