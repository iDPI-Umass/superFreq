import"../chunks/CWj6FrbW.js";import{p as re,a as n,ai as se,u as le,f as ie,g as a,t as K,b as oe,d as r,c as d,s as o,e as y,r as u}from"../chunks/DKxP8oaF.js";import{s as ne}from"../chunks/d8TzcK2t.js";import{t as v,a as p}from"../chunks/DCT9fmD9.js";import{a as me}from"../chunks/Pq-04fzQ.js";import{b as c,r as m}from"../chunks/DubPOQGL.js";import{b as de}from"../chunks/o4T939ll.js";import{b as L}from"../chunks/Nvk8_zKA.js";import{p as b}from"../chunks/DIWzF7VF.js";import{i as ue}from"../chunks/ryZ2lNj1.js";import{e as pe}from"../chunks/B9Qn1ecM.js";import{S as ce}from"../chunks/CdBRc-Mf.js";import{P as ve}from"../chunks/BNhe8YCt.js";import"../chunks/DSfPsCr9.js";import{N as fe}from"../chunks/BPwSGjQ8.js";import{R as be}from"../chunks/Q8xIgErW.js";import{A as _e}from"../chunks/BHEnHpZZ.js";var ge=v("<span>create profile</span>"),xe=v("<span>Try Another Username</span>"),he=v("<span>That Username is already taken, but you can use it for your Display Name. <br> <br> Your Display Name is what other people on the site will actually see.</span>"),ye=v("<span>Profiled created!</span>"),we=v("<span> </span>"),Ie=v('<!> <div class="panel" id="profile-info"><!> <div class="form-wrapper svelte-427bvk"><form id="account-data" class="form-column" method="POST" action="?/create"><label class="text-label" for="email" form="account-data">Email</label> <input class="text" type="text" name="email" id="email" form="account-data" disabled> <div class="label-group"><label class="text-label" for="username" form="account-data">Username</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="username" id="username" form="account-data" required> <div class="label-group"><label class="text-label" for="display-name">Display name</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="display-name" id="display-name" form="account-data" required> <label class="text-label" for="description">about me</label> <textarea id="about" name="about" rows="3" cols="1" maxlength="140" spellcheck="true"></textarea> <label class="text-label" for="website">Website</label> <input class="text" type="url" name="website" id="website"> <input type="hidden" name="avatarItem" id="avatarItem"> <input type="hidden" name="avatarUrl" id="avatarUrl"> <input type="hidden" name="avatarMbid" id="avatarMbid"></form> <div class="form-column"><label class="text-label" for="avatarUrl">Avatar</label> <!> <div class="actions svelte-427bvk"><button class="double-border-top" type="submit" form="account-data" formaction="?/create"><div class="inner-border">submit</div></button></div></div></div></div> <!> <!>',1);function We(Q,f){re(f,!0);const V=f.data.email;let w=n(""),_=n(""),X="",Z="",q=n(!1),l=n(b({})),D=5,g=n(0),O=n(null),I=n(!1),R=y(()=>{var e;return((e=a(l))==null?void 0:e.avatar_url)??""}),$=y(()=>{var e,s,t,i,h,F;return{img_url:a(R),last_fm_img_url:(e=a(l))==null?void 0:e.last_fm_img_url,artist_name:(s=a(l))==null?void 0:s.artist_name,artist_mbid:(t=a(l))==null?void 0:t.artist_mbid,release_group_name:(i=a(l))==null?void 0:i.release_group_name,release_group_mbid:(h=a(l))==null?void 0:h.release_group_mbid,label:(F=a(l))==null?void 0:F.label}}),ee=y(()=>{var e;return((e=f.form)==null?void 0:e.success)==!1}),C=y(()=>{var e,s;return(e=f.form)!=null&&e.success?(s=f.form)==null?void 0:s.success:!1});se(()=>{ue()}),le(()=>{a(C)&&(o(g,b(D)),setInterval(()=>o(g,a(g)-1),1e3))});var E=Ie(),G=ie(E);ce(G,{title:"Create profile"});var T=r(G,2),H=d(T);ve(H,{headerText:s=>{var t=ge();p(s,t)}});var J=r(H,2),x=d(J),A=r(d(x),2);m(A),c(A,V);var P=r(A,4);m(P);var M=r(P,4);m(M);var N=r(M,4);de(N),c(N,X);var U=r(N,4);m(U),c(U,Z);var S=r(U,2);m(S);var k=r(S,2);m(k);var W=r(k,2);m(W),u(x),me(x,(e,s)=>{var t;return(t=pe)==null?void 0:t(e,s)},()=>()=>(o(I,!0),async({update:e})=>{o(I,!1),await e()}));var Y=r(x,2),j=r(d(Y),2);_e(j,{get displayName(){return a(_)},get avatarUrl(){return a(R)},get avatarInfo(){return a($)},get newItemAdded(){return a(q)},set newItemAdded(e){o(q,b(e))},get avatarItem(){return a(l)},set avatarItem(e){o(l,b(e))},get imgPromise(){return a(O)},set imgPromise(e){o(O,b(e))}});var z=r(j,2),ae=d(z);u(z),u(Y),u(J),u(T);var B=r(T,2);fe(B,{get showModal(){return a(ee)},headerText:t=>{var i=xe();p(t,i)},message:t=>{var i=he();p(t,i)},$$slots:{headerText:!0,message:!0}});var te=r(B,2);be(te,{get showModal(){return a(C)},get delay(){return D},redirectPath:"/about/guidelines",headerText:t=>{var i=ye();p(t,i)},message:t=>{var i=we(),h=d(i);u(i),K(()=>ne(h,`Automatically redirecting to our Community Guidelines in ${a(g)??""} seconds.`)),p(t,i)},$$slots:{headerText:!0,message:!0}}),K(e=>{var s;c(S,e),c(k,((s=a(l))==null?void 0:s.img_url)??null),c(W,a(l).release_group_mbid??null),ae.disabled=!(a(w)&&a(_))||a(I)},[()=>JSON.stringify(a(l))]),L(P,()=>a(w),e=>o(w,e)),L(M,()=>a(_),e=>o(_,e)),p(Q,E),oe()}export{We as component};
