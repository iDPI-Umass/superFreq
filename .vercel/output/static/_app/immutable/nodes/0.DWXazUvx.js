const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/browser.BaUz-1h7.js","../chunks/_commonjsHelpers.BosuxZz1.js"])))=>i.map(i=>d[i]);
import{a as Bn,c as De}from"../chunks/_commonjsHelpers.BosuxZz1.js";import{_ as Ct}from"../chunks/17.Bb4s-aXr.js";import{w as _e,d as Bt,g as Ys,c as xn}from"../chunks/entry.a6gQbV6m.js";import{ad as Kn,G as er,U as Hn,T as zn,s as Qe,H as Xe,i as v,f as _,O as Pt,k as It,J as $e,K as qt,ae as qn,A as ot,l as Ce,u as Pe,m as Ie,o as je,e as ae,c as le,b as Ae,af as ds,D as dt,x as ye,v as ht,V as Le,W as Zr,a as B,p as Vn,g as x,w as ct,r as ie,h as qe,t as Y,d as Z,C as ur,j as Zs,y as Jn}from"../chunks/scheduler.CXRP0wEC.js";import{S as ft,i as mt,g as Vt,a as w,f as Jt,t as y,h as en,j as tn,k as hs,c as O,b as S,m as A,d as C}from"../chunks/index.a6HmqSPn.js";/* empty css                                    *//* empty css                      */import{w as we,a as L,t as Kt,m as Oe,d as Dt,p as Gn,e as Ne,f as Be,g as G,F as fs,k as be,S as cr,u as Wn,n as Lt,C as xe,s as St,c as ms,B as tt,i as Ot,h as Xn,b as lr,x as Lr,o as rn,l as Qn,r as Yn,q as Zn,v as es,z as ei}from"../chunks/updater.C1ZFZVgO.js";import{g as Ye,a as ti}from"../chunks/spread.CgU5AtxT.js";import{w as ri,g as gs,d as _s,u as ps,a as vs,b as si,h as ni,r as ii,c as oi}from"../chunks/helpers.CwfhyKXk.js";import{h as ve,g as ai,a as li}from"../chunks/rovingFocus.Cm4I5pJX.js";import{I as ui}from"../chunks/Icon.3yADeopG.js";const ci=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ct(async()=>{const{default:r}=await Promise.resolve().then(()=>Rt);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class ts extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class di extends ts{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hi extends ts{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class fi extends ts{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zr;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(zr||(zr={}));var mi=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class gi{constructor(e,{headers:t={},customFetch:r,region:i=zr.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=ci(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return mi(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(g=>{throw new di(g)}),d=c.headers.get("x-relay-error");if(d&&d==="true")throw new hi(c);if(!c.ok)throw new fi(c);let f=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),h;return f==="application/json"?h=yield c.json():f==="application/octet-stream"?h=yield c.blob():f==="text/event-stream"?h=c:f==="multipart/form-data"?h=yield c.formData():h=yield c.text(),{data:h,error:null}}catch(i){return{data:null,error:i}}})}}var Re={},rs={},hr={},Wt={},fr={},mr={},_i=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jt=_i();const pi=jt.fetch,sn=jt.fetch.bind(jt),nn=jt.Headers,vi=jt.Request,wi=jt.Response,Rt=Object.freeze(Object.defineProperty({__proto__:null,Headers:nn,Request:vi,Response:wi,default:sn,fetch:pi},Symbol.toStringTag,{value:"Module"})),yi=Bn(Rt);var ss={};Object.defineProperty(ss,"__esModule",{value:!0});class bi extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}ss.default=bi;var on=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(mr,"__esModule",{value:!0});const $i=on(yi),ki=on(ss);let Ti=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=$i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let u=null,c=null,d=null,f=s.status,h=s.statusText;if(s.ok){if(this.method!=="HEAD"){const P=await s.text();P===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=P:c=JSON.parse(P))}const E=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),p=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");E&&p&&p.length>1&&(d=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,h="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const E=await s.text();try{u=JSON.parse(E),Array.isArray(u)&&s.status===404&&(c=[],u=null,f=200,h="OK")}catch{s.status===404&&E===""?(f=204,h="No Content"):u={message:E}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,f=200,h="OK"),u&&this.shouldThrowOnError)throw new ki.default(u)}return{error:u,data:c,count:d,status:f,statusText:h}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}};mr.default=Ti;var Ei=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(fr,"__esModule",{value:!0});const Oi=Ei(mr);let Si=class extends Oi.default{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};fr.default=Si;var Ai=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Wt,"__esModule",{value:!0});const Ci=Ai(fr);let Pi=class extends Ci.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Wt.default=Pi;var Ii=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(hr,"__esModule",{value:!0});const Ut=Ii(Wt);let ji=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Ut.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Ut.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ut.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new Ut.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Ut.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};hr.default=ji;var gr={},_r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.version=void 0;_r.version="0.0.0-automated";Object.defineProperty(gr,"__esModule",{value:!0});gr.DEFAULT_HEADERS=void 0;const Ri=_r;gr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Ri.version}`};var an=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(rs,"__esModule",{value:!0});const Di=an(hr),Li=an(Wt),Ui=gr;let Mi=class ln{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ui.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new Di.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ln(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(o=r?"HEAD":"GET",Object.entries(t).filter(([c,d])=>d!==void 0).map(([c,d])=>[c,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([c,d])=>{a.searchParams.append(c,d)})):(o="POST",l=t);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new Li.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};rs.default=Mi;var Xt=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Re,"__esModule",{value:!0});Re.PostgrestBuilder=Re.PostgrestTransformBuilder=Re.PostgrestFilterBuilder=Re.PostgrestQueryBuilder=Re.PostgrestClient=void 0;const un=Xt(rs);Re.PostgrestClient=un.default;const cn=Xt(hr);Re.PostgrestQueryBuilder=cn.default;const dn=Xt(Wt);Re.PostgrestFilterBuilder=dn.default;const hn=Xt(fr);Re.PostgrestTransformBuilder=hn.default;const fn=Xt(mr);Re.PostgrestBuilder=fn.default;var Ni=Re.default={PostgrestClient:un.default,PostgrestQueryBuilder:cn.default,PostgrestFilterBuilder:dn.default,PostgrestTransformBuilder:hn.default,PostgrestBuilder:fn.default};const{PostgrestClient:Fi,PostgrestQueryBuilder:Uu,PostgrestFilterBuilder:Mu,PostgrestTransformBuilder:Nu,PostgrestBuilder:Fu}=Ni,Bi="2.10.2",xi={"X-Client-Info":`realtime-js/${Bi}`},Ki="1.0.0",mn=1e4,Hi=1e3;var At;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(At||(At={}));var Se;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Se||(Se={}));var Me;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Me||(Me={}));var qr;(function(n){n.websocket="websocket"})(qr||(qr={}));var at;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(at||(at={}));class zi{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class gn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var te;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(te||(te={}));const ws=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=qi(o,n,e,i),s),{})},qi=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?_n(s,o):Vr(o)},_n=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Wi(e,t)}switch(n){case te.bool:return Vi(e);case te.float4:case te.float8:case te.int2:case te.int4:case te.int8:case te.numeric:case te.oid:return Ji(e);case te.json:case te.jsonb:return Gi(e);case te.timestamp:return Xi(e);case te.abstime:case te.date:case te.daterange:case te.int4range:case te.int8range:case te.money:case te.reltime:case te.text:case te.time:case te.timestamptz:case te.timetz:case te.tsrange:case te.tstzrange:return Vr(e);default:return Vr(e)}},Vr=n=>n,Vi=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Ji=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Gi=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Wi=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>_n(e,a))}return n},Xi=n=>typeof n=="string"?n.replace(" ","T"):n,pn=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ur{constructor(e,t,r={},i=mn){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ys;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(ys||(ys={}));class Ht{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ht.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Ht.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ht.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=s[u];if(d){const f=c.map(p=>p.presence_ref),h=d.map(p=>p.presence_ref),g=c.filter(p=>h.indexOf(p.presence_ref)<0),E=d.filter(p=>f.indexOf(p.presence_ref)<0);g.length>0&&(a[u]=g),E.length>0&&(l[u]=E)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const d=e[a].map(h=>h.presence_ref),f=c.filter(h=>d.indexOf(h.presence_ref)<0);e[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bs;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(bs||(bs={}));var $s;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})($s||($s={}));var ks;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ks||(ks={}));class ns{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ur(this,Me.join,this.params,this.timeout),this.rejoinTimer=new gn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Se.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Me.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Ht(this),this.broadcastEndpointURL=pn(this.socket.endPoint)+"/api/broadcast"}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const l={},u={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var d;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,h=(d=f==null?void 0:f.length)!==null&&d!==void 0?d:0,g=[];for(let E=0;E<h;E++){const p=f[E],{filter:{event:P,schema:R,table:D,filter:M}}=p,W=c&&c[E];if(W&&W.event===P&&W.schema===R&&W.table===D&&W.filter===M)g.push(Object.assign(Object.assign({},p),{id:W.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Se.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Me.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Ur(this,Me.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ur(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Me;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,t,r);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(h=>{var g,E,p;return((g=h.filter)===null||g===void 0?void 0:g.event)==="*"||((p=(E=h.filter)===null||E===void 0?void 0:E.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(h=>h.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(h=>{var g,E,p,P,R,D;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const M=h.id,W=(g=h.filter)===null||g===void 0?void 0:g.event;return M&&((E=t.ids)===null||E===void 0?void 0:E.includes(M))&&(W==="*"||(W==null?void 0:W.toLocaleLowerCase())===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const M=(R=(P=h==null?void 0:h.filter)===null||P===void 0?void 0:P.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return M==="*"||M===((D=t==null?void 0:t.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:E,table:p,commit_timestamp:P,type:R,errors:D}=g;f=Object.assign(Object.assign({},{schema:E,table:p,commit_timestamp:P,eventType:R,new:{},old:{},errors:D}),this._getPayloadRecords(g))}h.callback(f,r)})}_isClosed(){return this.state===Se.closed}_isJoined(){return this.state===Se.joined}_isJoining(){return this.state===Se.joining}_isLeaving(){return this.state===Se.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&ns.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Me.close,{},e)}_onError(e){this._on(Me.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Se.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ws(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ws(e.columns,e.old_record)),t}}const Qi=()=>{},Yi=typeof WebSocket<"u";class Zi{constructor(e,t){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=xi,this.params={},this.timeout=mn,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Qi,this.conn=null,this.sendBuffer=[],this.serializer=new zi,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Ct(async()=>{const{default:l}=await Promise.resolve().then(()=>Rt);return{default:l}},void 0,import.meta.url).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${qr.websocket}`,this.httpEndpoint=pn(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new gn(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Yi){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new eo(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Ct(async()=>{const{default:e}=await import("../chunks/browser.BaUz-1h7.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1]),import.meta.url).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case At.connecting:return at.Connecting;case At.open:return at.Open;case At.closing:return at.Closing;default:return at.Closed}}isConnected(){return this.connectionState()===at.Open}channel(e,t={config:{}}){const r=new ns(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(Me.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ki}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;(o&&o===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Me.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Hi,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class eo{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=At.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class is extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ge(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class to extends is{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Jr extends is{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ro=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const vn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ct(async()=>{const{default:r}=await Promise.resolve().then(()=>Rt);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},so=()=>ro(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ct(()=>Promise.resolve().then(()=>Rt),void 0,import.meta.url)).Response:Response}),Gr=n=>{if(Array.isArray(n))return n.map(t=>Gr(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Gr(r)}),e};var gt=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Mr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),no=(n,e,t)=>gt(void 0,void 0,void 0,function*(){const r=yield so();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{e(new to(Mr(i),n.status||500))}).catch(i=>{e(new Jr(Mr(i),i))}):e(new Jr(Mr(n),n))}),io=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),t))};function Qt(n,e,t,r,i,s){return gt(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,io(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>no(l,a,r))})})}function dr(n,e,t,r){return gt(this,void 0,void 0,function*(){return Qt(n,"GET",e,t,r)})}function Ge(n,e,t,r,i){return gt(this,void 0,void 0,function*(){return Qt(n,"POST",e,r,i,t)})}function oo(n,e,t,r,i){return gt(this,void 0,void 0,function*(){return Qt(n,"PUT",e,r,i,t)})}function ao(n,e,t,r){return gt(this,void 0,void 0,function*(){return Qt(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function wn(n,e,t,r,i){return gt(this,void 0,void 0,function*(){return Qt(n,"DELETE",e,r,i,t)})}var Ee=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const lo={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ts={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class uo{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=vn(i)}uploadOrUpdate(e,t,r,i){return Ee(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Ts),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",r),l&&s.append("metadata",this.encodeMetadata(l))):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield d.json();return d.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Ee(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:Ts.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),f=yield d.json();return d.ok?{data:{path:s,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(ge(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Ee(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield Ge(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new is("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}update(e,t,r){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Ee(this,void 0,void 0,function*(){try{return{data:yield Ge(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Ee(this,void 0,void 0,function*(){try{return{data:{path:(yield Ge(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Ee(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Ge(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Ee(this,void 0,void 0,function*(){try{const i=yield Ge(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}download(e,t){return Ee(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield dr(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ge(a))return{data:null,error:a};throw a}})}info(e){return Ee(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield dr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Gr(r),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}exists(e){return Ee(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield ao(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ge(r)&&r instanceof Jr){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}list(e,t,r){return Ee(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},lo),t),{prefix:e||""});return{data:yield Ge(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(ge(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const co="2.7.0",ho={"X-Client-Info":`storage-js/${co}`};var $t=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class fo{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},ho),t),this.fetch=vn(r)}listBuckets(){return $t(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ge(e))return{data:null,error:e};throw e}})}getBucket(e){return $t(this,void 0,void 0,function*(){try{return{data:yield dr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return $t(this,void 0,void 0,function*(){try{return{data:yield Ge(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return $t(this,void 0,void 0,function*(){try{return{data:yield oo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}emptyBucket(e){return $t(this,void 0,void 0,function*(){try{return{data:yield Ge(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}deleteBucket(e){return $t(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}}class mo extends fo{constructor(e,t={},r){super(e,t,r)}from(e){return new uo(this.url,this.headers,e,this.fetch)}}const go="2.45.4";let xt="";typeof Deno<"u"?xt="deno":typeof document<"u"?xt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xt="react-native":xt="node";const _o={"X-Client-Info":`supabase-js-${xt}/${go}`},po={headers:_o},vo={schema:"public"},wo={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yo={};var bo=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const $o=n=>{let e;return n?e=n:typeof fetch>"u"?e=sn:e=fetch,(...t)=>e(...t)},ko=()=>typeof Headers>"u"?nn:Headers,To=(n,e,t)=>{const r=$o(t),i=ko();return(s,o)=>bo(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var Eo=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};function Oo(n){return n.replace(/\/$/,"")}function So(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s),accessToken:()=>Eo(this,void 0,void 0,function*(){return""})};return n.accessToken?c.accessToken=n.accessToken:delete c.accessToken,c}const yn="2.65.0",Ao="http://localhost:9999",Co="supabase.auth.token",Po={"X-Client-Info":`gotrue-js/${yn}`},Es=10,Wr="X-Supabase-Api-Version",bn={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Io(n){return Math.round(Date.now()/1e3)+n}function jo(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Ue=()=>typeof document<"u",rt={tested:!1,writable:!1},zt=()=>{if(!Ue())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rt.tested)return rt.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),rt.tested=!0,rt.writable=!0}catch{rt.tested=!0,rt.writable=!1}return rt.writable};function Nr(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const $n=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ct(async()=>{const{default:r}=await Promise.resolve().then(()=>Rt);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Ro=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",kn=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},tr=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},rr=async(n,e)=>{await n.removeItem(e)};function Do(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,s,o,a,l,u,c=0;for(n=n.replace("-","+").replace("_","/");c<n.length;)o=e.indexOf(n.charAt(c++)),a=e.indexOf(n.charAt(c++)),l=e.indexOf(n.charAt(c++)),u=e.indexOf(n.charAt(c++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|u,t=t+String.fromCharCode(r),l!=64&&i!=0&&(t=t+String.fromCharCode(i)),u!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class pr{constructor(){this.promise=new pr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}pr.promiseConstructor=Promise;function Os(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(Do(r))}async function Lo(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Uo(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function Mo(n){return("0"+n.toString(16)).substr(-2)}function No(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Mo).join("")}async function Fo(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function Bo(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xo(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Fo(n);return Bo(t)}async function kt(n,e,t=!1){const r=No();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await kn(n,`${e}-code-verifier`,i);const s=await xo(r);return[s,r===s?"plain":"s256"]}const Ko=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ho(n){const e=n.headers.get(Wr);if(!e||!e.match(Ko))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class os extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function F(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class zo extends os{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function qo(n){return F(n)&&n.name==="AuthApiError"}class Tn extends os{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class _t extends os{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Ve extends _t{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Vo(n){return F(n)&&n.name==="AuthSessionMissingError"}class Fr extends _t{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sr extends _t{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class nr extends _t{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ss extends _t{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xr extends _t{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Br(n){return F(n)&&n.name==="AuthRetryableFetchError"}class As extends _t{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var Jo=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const st=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Go=[502,503,504];async function Cs(n){var e;if(!Ro(n))throw new Xr(st(n),0);if(Go.includes(n.status))throw new Xr(st(n),n.status);let t;try{t=await n.json()}catch(s){throw new Tn(st(s),s)}let r;const i=Ho(n);if(i&&i.getTime()>=bn["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new As(st(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ve}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new As(st(t),n.status,t.weak_password.reasons);throw new zo(st(t),n.status||500,r)}const Wo=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function z(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Wr]||(s[Wr]=bn["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Xo(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Xo(n,e,t,r,i,s){const o=Wo(e,r,i,s);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new Xr(st(l),0)}if(a.ok||await Cs(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Cs(l)}}function Je(n){var e;let t=null;ea(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Io(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Ps(n){const e=Je(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function We(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Qo(n){return{data:n,error:null}}function Yo(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=Jo(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Zo(n){return n}function ea(n){return n.access_token&&n.refresh_token&&n.expires_in}var ta=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class ra{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=$n(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:We})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=ta(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Yo,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(F(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:We})}catch(t){if(F(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Zo});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(g=>{const E=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(g.split(";")[1].split("=")[1]);u[`${p}Page`]=E}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(F(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await z(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:We})}catch(t){if(F(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:We})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:We})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await z(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(F(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(F(t))return{data:null,error:t};throw t}}}const sa={getItem:n=>zt()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{zt()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{zt()&&globalThis.localStorage.removeItem(n)}};function Is(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function na(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Tt={debug:!!(globalThis&&zt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class En extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ia extends En{}async function oa(n,e,t){Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new ia(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Tt.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}na();const aa={url:Ao,storageKey:Co,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Po,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Mt=30*1e3,js=3;async function Rs(n,e,t){return await t()}class Gt{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Gt.nextInstanceID,Gt.nextInstanceID+=1,this.instanceID>0&&Ue()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},aa),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ra({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=$n(i.fetch),this.lock=i.lock||Rs,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ue()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=oa:this.lock=Rs,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:zt()?this.storage=sa:(this.memoryStorage={},this.storage=Is(this.memoryStorage)):(this.memoryStorage={},this.storage=Is(this.memoryStorage)),Ue()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yn}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Ue()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromURL(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:i,redirectType:s}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return F(e)?{error:e}:{error:new Tn("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Je}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(F(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:c,password:d,options:f}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await kt(this.storage,this.storageKey)),s=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:g},xform:Je})}else if("phone"in e){const{phone:c,password:d,options:f}=e;s=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Je})}else throw new sr("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(F(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ps})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ps})}else throw new sr("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Fr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await tr(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:o}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Je});if(await rr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Fr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(F(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Je}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Fr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await kt(this.storage,this.storageKey));const{error:d}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new sr("You must provide either an email or phone number.")}catch(a){if(F(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Je});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(F(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await kt(this.storage,this.storageKey)),await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Qo})}catch(s){if(F(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Ve;const{error:i}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(F(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await z(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await z(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new sr("You must provide either an email or phone number and a type")}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await tr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:We}):await this._useSession(async t=>{var r,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ve}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:We})})}catch(t){if(F(t))return Vo(t)&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Ve;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await kt(this.storage,this.storageKey));const{data:u,error:c}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:We});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Os(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ve;const t=Date.now()/1e3;let r=t,i=!0,s=null;const o=Os(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(F(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ve;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e){try{if(!Ue())throw new nr("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new nr("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Ss("Not a valid PKCE flow url.");const t=Nr(window.location.href);if(e){if(!t.code)throw new Ss("No code detected.");const{data:R,error:D}=await this._exchangeCodeForSession(t.code);if(D)throw D;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:R.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new nr(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!s||!a||!o||!u)throw new nr("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const h=f-c;h*1e3<=Mt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const g=f-d;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,c);const{data:E,error:p}=await this._getUser(s);if(p)throw p;const P={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:P,redirectType:t.type},error:null}}catch(t){if(F(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){const e=Nr(window.location.href);return!!(Ue()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=Nr(window.location.href),t=await tr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(qo(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=jo(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await kt(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(F(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(F(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:d,error:f}=s;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",h,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Ue()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(F(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(F(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Uo(async i=>(i>0&&await Lo(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Je})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Br(s)&&Date.now()+o-r<Mt})}catch(r){if(this._debug(t,"error",r),F(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Ue()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await tr(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+Es;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${Es}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Br(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Ve;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new pr;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Ve;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),F(s)){const o={session:null,error:s};return Br(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await kn(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await rr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ue()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Mt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Mt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Mt}ms, refresh threshold is ${js} ticks`),i<=js&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof En)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ue()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await kt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await z(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(F(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await z(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="phone"&&delete l.totp,e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(F(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(F(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(F(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}Gt.nextInstanceID=0;const la=Gt;class ua extends la{constructor(e){super(e)}}var ca=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class da{constructor(e,t,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=Oo(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:vo,realtime:yo,auth:Object.assign(Object.assign({},wo),{storageKey:l}),global:po},c=So(r??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=To(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},c.realtime)),this.rest=new Fi(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new gi(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new mo(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return ca(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},u,c){var d;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ua({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:(d="Authorization"in this.headers)!==null&&d!==void 0?d:!1})}_initRealtimeClient(e){return new Zi(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Qr=(n,e,t)=>new da(n,e,t);function ne(n){return n!=null&&typeof n=="object"&&n["@@functional/placeholder"]===!0}function lt(n){return function e(t){return arguments.length===0||ne(t)?e:n.apply(this,arguments)}}function nt(n){return function e(t,r){switch(arguments.length){case 0:return e;case 1:return ne(t)?e:lt(function(i){return n(t,i)});default:return ne(t)&&ne(r)?e:ne(t)?lt(function(i){return n(i,r)}):ne(r)?lt(function(i){return n(t,i)}):n(t,r)}}}function On(n){return function e(t,r,i){switch(arguments.length){case 0:return e;case 1:return ne(t)?e:nt(function(s,o){return n(t,s,o)});case 2:return ne(t)&&ne(r)?e:ne(t)?nt(function(s,o){return n(s,r,o)}):ne(r)?nt(function(s,o){return n(t,s,o)}):lt(function(s){return n(t,r,s)});default:return ne(t)&&ne(r)&&ne(i)?e:ne(t)&&ne(r)?nt(function(s,o){return n(s,o,i)}):ne(t)&&ne(i)?nt(function(s,o){return n(s,r,o)}):ne(r)&&ne(i)?nt(function(s,o){return n(t,s,o)}):ne(t)?lt(function(s){return n(s,r,i)}):ne(r)?lt(function(s){return n(t,s,i)}):ne(i)?lt(function(s){return n(t,r,s)}):n(t,r,i)}}}function ir(n,e){return Object.prototype.hasOwnProperty.call(e,n)}function Ds(n){return Object.prototype.toString.call(n)==="[object Object]"}var ha=On(function(e,t,r){var i={},s;t=t||{},r=r||{};for(s in t)ir(s,t)&&(i[s]=ir(s,r)?e(s,t[s],r[s]):t[s]);for(s in r)ir(s,r)&&!ir(s,i)&&(i[s]=r[s]);return i}),fa=On(function n(e,t,r){return ha(function(i,s,o){return Ds(s)&&Ds(o)?n(e,s,o):e(i,s,o)},t,r)}),Sn=nt(function(e,t){return fa(function(r,i,s){return s},e,t)});/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Yr=ga,Ls=_a,ma=Object.prototype.toString,or=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function ga(n,e){if(typeof n!="string")throw new TypeError("argument str must be a string");for(var t={},r=e||{},i=r.decode||pa,s=0;s<n.length;){var o=n.indexOf("=",s);if(o===-1)break;var a=n.indexOf(";",s);if(a===-1)a=n.length;else if(a<o){s=n.lastIndexOf(";",o-1)+1;continue}var l=n.slice(s,o).trim();if(t[l]===void 0){var u=n.slice(o+1,a).trim();u.charCodeAt(0)===34&&(u=u.slice(1,-1)),t[l]=ya(u,i)}s=a+1}return t}function _a(n,e,t){var r=t||{},i=r.encode||va;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!or.test(n))throw new TypeError("argument name is invalid");var s=i(e);if(s&&!or.test(s))throw new TypeError("argument val is invalid");var o=n+"="+s;if(r.maxAge!=null){var a=r.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(r.domain){if(!or.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!or.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){var l=r.expires;if(!wa(l)||isNaN(l.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+l.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.priority){var u=typeof r.priority=="string"?r.priority.toLowerCase():r.priority;switch(u){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(r.sameSite){var c=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(c){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function pa(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function va(n){return encodeURIComponent(n)}function wa(n){return ma.call(n)==="[object Date]"||n instanceof Date}function ya(n,e){try{return e(n)}catch{return n}}function Fe(){return typeof window<"u"&&typeof window.document<"u"}var Ke={path:"/",sameSite:"lax",httpOnly:!1,maxAge:60*60*24*365*1e3},ba=3180;function An(n,e,t){const r=ba;let i=encodeURIComponent(e);if(i.length<=r)return[{name:n,value:e}];const s=[];for(;i.length>0;){let o=i.slice(0,r);const a=o.lastIndexOf("%");a>r-3&&(o=o.slice(0,a));let l="";for(;o.length>0;)try{l=decodeURIComponent(o);break}catch(u){if(u instanceof URIError&&o.at(-3)==="%"&&o.length>3)o=o.slice(0,o.length-3);else throw u}s.push(l),i=i.slice(o.length)}return s.map((o,a)=>({name:`${n}.${a}`,value:o}))}async function Cn(n,e){const t=await e(n);if(t)return t;let r=[];for(let i=0;;i++){const s=`${n}.${i}`,o=await e(s);if(!o)break;r.push(o)}if(r.length>0)return r.join("")}async function Pn(n,e,t){if(await e(n)){await t(n);return}for(let i=0;;i++){const s=`${n}.${i}`;if(!await e(s))break;await t(s)}}var xr;function $a(n,e,t){let r={},i=!0,s,o;t&&({cookies:r={},isSingleton:i=!0,cookieOptions:s,...o}=t,r=r||{}),s!=null&&s.name&&(o.auth={...o.auth,storageKey:s.name});const a={global:{headers:{"X-Client-Info":"supabase-ssr/0.3.0"}},auth:{flowType:"pkce",autoRefreshToken:Fe(),detectSessionInUrl:Fe(),persistSession:!0,storage:{isServer:!1,getItem:async u=>await Cn(u,async d=>{if(typeof r.get=="function")return await r.get(d);if(Fe())return Yr(document.cookie)[d]}),setItem:async(u,c)=>{const d=await An(u,c);await Promise.all(d.map(async f=>{typeof r.set=="function"?await r.set(f.name,f.value,{...Ke,...s,maxAge:Ke.maxAge}):Fe()&&(document.cookie=Ls(f.name,f.value,{...Ke,...s,maxAge:Ke.maxAge}))}))},removeItem:async u=>{if(typeof r.remove=="function"&&typeof r.get!="function"){console.log("Removing chunked cookie without a `get` method is not supported.\n\n	When you call the `createBrowserClient` function from the `@supabase/ssr` package, make sure you declare both a `get` and `remove` method on the `cookies` object.\n\nhttps://supabase.com/docs/guides/auth/server-side/creating-a-client");return}await Pn(u,async c=>{if(typeof r.get=="function")return await r.get(c);if(Fe())return Yr(document.cookie)[c]},async c=>{typeof r.remove=="function"?await r.remove(c,{...Ke,...s,maxAge:0}):Fe()&&(document.cookie=Ls(c,"",{...Ke,...s,maxAge:0}))})}}}},l=Sn(a,o);if(i){const u=Fe();if(u&&xr)return xr;const c=Qr(n,e,l);return u&&(xr=c),c}return Qr(n,e,l)}function ka(n,e,t){const{cookies:r,cookieOptions:i,...s}=t;i!=null&&i.name&&(s.auth={...s.auth,storageKey:i.name});const o={global:{headers:{"X-Client-Info":"supabase-ssr/0.3.0"}},auth:{flowType:"pkce",autoRefreshToken:Fe(),detectSessionInUrl:Fe(),persistSession:!0,storage:{isServer:!0,getItem:async l=>await Cn(l,async c=>{if(typeof r.get=="function")return await r.get(c)}),setItem:async(l,u)=>{const c=An(l,u);await Promise.all(c.map(async d=>{typeof r.set=="function"&&await r.set(d.name,d.value,{...Ke,...i,maxAge:Ke.maxAge})}))},removeItem:async l=>{if(typeof r.remove=="function"&&typeof r.get!="function"){console.log("Removing chunked cookie without a `get` method is not supported.\n\n	When you call the `createServerClient` function from the `@supabase/ssr` package, make sure you declare both a `get` and `remove` method on the `cookies` object.\n\nhttps://supabase.com/docs/guides/auth/server-side/creating-a-client");return}Pn(l,async u=>{if(typeof r.get=="function")return await r.get(u)},async u=>{if(typeof r.remove=="function")return await r.remove(u,{...Ke,...i,maxAge:0})})}}}},a=Sn(o,s);return Qr(n,e,a)}const Us="https://rhibvhnquyqpnvchwuvm.supabase.co",Ms="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJoaWJ2aG5xdXlxcG52Y2h3dXZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDQ5MjgyMTQsImV4cCI6MjAyMDUwNDIxNH0.7L3C5FMKXafj26LbxuCWyPTPtDNe4G4faN47oxzQSZs",In=_e({}),Ta=async({data:n,depends:e,fetch:t})=>{e("supabase:auth");const r=Fe()?$a(Us,Ms,{global:{fetch:t},cookies:{get(a){return Yr(document.cookie)[a]}}}):ka(Us,Ms,{global:{fetch:t},cookies:{get(){return JSON.stringify(n.session)}}}),{data:{session:i}}=await r.auth.getSession(),{data:{user:s}}=await r.auth.getUser(),{profile:o}=n;return In.set(o),{session:i,user:s,profile:o,supabase:r}},Bu=Object.freeze(Object.defineProperty({__proto__:null,load:Ta},Symbol.toStringTag,{value:"Module"}));function Ea(n){n.setAttribute("data-highlighted","")}function Et(n){n.removeAttribute("data-highlighted")}function Oa(n,e=500){let t=null;return function(...r){const i=()=>{t=null,n(...r)};t&&clearTimeout(t),t=setTimeout(i,e)}}const Sa=new Set(["Shift","Control","Alt","Meta","CapsLock","NumLock"]),Aa={onMatch:ve,getCurrentItem:()=>document.activeElement};function Ca(n={}){const e={...Aa,...n},t=we(_e([])),r=Oa(()=>{t.update(()=>[])});return{typed:t,resetTyped:r,handleTypeaheadSearch:(s,o)=>{if(Sa.has(s))return;const a=e.getCurrentItem(),l=Kn(t);if(!Array.isArray(l))return;l.push(s.toLowerCase()),t.set(l);const u=o.filter(p=>!(p.getAttribute("disabled")==="true"||p.getAttribute("aria-disabled")==="true"||p.hasAttribute("data-disabled"))),d=l.length>1&&l.every(p=>p===l[0])?l[0]:l.join(""),f=L(a)?u.indexOf(a):-1;let h=ri(u,Math.max(f,0));d.length===1&&(h=h.filter(p=>p!==a));const E=h.find(p=>(p==null?void 0:p.innerText)&&p.innerText.toLowerCase().startsWith(d.toLowerCase()));L(E)&&E!==a&&e.onMatch(E),r()}}}const Pa={ltr:[...cr,be.ARROW_RIGHT],rtl:[...cr,be.ARROW_LEFT]},Ia={ltr:[be.ARROW_LEFT],rtl:[be.ARROW_RIGHT]},Ns=["menu","trigger"],ja={arrowSize:8,positioning:{placement:"bottom"},preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,portal:void 0,loop:!1,dir:"ltr",defaultOpen:!1,typeahead:!0,closeOnItemClick:!0,onOutsideClick:void 0};function Ra(n){const{name:e,selector:t}=Xn(n.selector),{preventScroll:r,arrowSize:i,positioning:s,closeOnEscape:o,closeOnOutsideClick:a,portal:l,forceVisible:u,typeahead:c,loop:d,closeFocus:f,disableFocusFirstItem:h,closeOnItemClick:g,onOutsideClick:E}=n.rootOptions,p=n.rootOpen,P=n.rootActiveTrigger,R=n.nextFocusable,D=n.prevFocusable,M=we.writable(!1),W=we(_e(0)),pe=we(_e(null)),I=we(_e("right")),he=we(_e(null)),He=we(Bt([I,pe],([m,b])=>$=>m===(b==null?void 0:b.side)&&Da($,b==null?void 0:b.area))),{typed:X,handleTypeaheadSearch:fe}=Ca(),ce=Kt({...gs(Ns),...n.ids}),ee=_s({open:p,forceVisible:u,activeTrigger:P}),Ze=Oe(e(),{stores:[ee,l,ce.menu,ce.trigger],returned:([m,b,$,T])=>({role:"menu",hidden:m?void 0:!0,style:Dt({display:m?void 0:"none"}),id:$,"aria-labelledby":T,"data-state":m?"open":"closed","data-portal":Gn(b),tabindex:-1}),action:m=>{let b=Lt;const $=Ne([ee,P,s,a,l,o],([U,se,ke,re,K,V])=>{b(),!(!U||!se)&&er().then(()=>{b(),Ft(m,t),b=ps(m,{anchorElement:se,open:p,options:{floating:ke,modal:{closeOnInteractOutside:re,shouldCloseOnInteractOutside:N=>{var H;return(H=E.get())==null||H(N),!(N.defaultPrevented||L(se)&&se.contains(N.target))},onClose:()=>{p.set(!1),se.focus()},open:U},portal:vs(m,K),escapeKeydown:V?void 0:null}}).destroy})}),T=Be(G(m,"keydown",U=>{const se=U.target,ke=U.currentTarget;if(!L(se)||!L(ke)||!(se.closest('[role="menu"]')===ke))return;if(fs.includes(U.key)&&Bs(U,d.get()??!1),U.key===be.TAB){U.preventDefault(),p.set(!1),Fs(U,R,D);return}const K=U.key.length===1;!(U.ctrlKey||U.altKey||U.metaKey)&&K&&c.get()===!0&&fe(U.key,it(ke))}));return{destroy(){$(),T(),b()}}}}),et=Oe(e("trigger"),{stores:[p,ce.menu,ce.trigger],returned:([m,b,$])=>({"aria-controls":b,"aria-expanded":m,"data-state":m?"open":"closed",id:$,tabindex:0}),action:m=>(ar(m),P.update($=>$||m),{destroy:Be(G(m,"click",$=>{const T=p.get(),U=$.currentTarget;L(U)&&(as(U),T||$.preventDefault())}),G(m,"keydown",$=>{const T=$.currentTarget;if(!L(T)||!(cr.includes($.key)||$.key===be.ARROW_DOWN))return;$.preventDefault(),as(T);const U=T.getAttribute("aria-controls");if(!U)return;const se=document.getElementById(U);if(!se)return;const ke=it(se);ke.length&&ve(ke[0])}))})}),wr=Oe(e("arrow"),{stores:i,returned:m=>({"data-arrow":!0,style:Dt({position:"absolute",width:`var(--arrow-size, ${m}px)`,height:`var(--arrow-size, ${m}px)`})})}),yr=Oe(e("overlay"),{stores:[ee],returned:([m])=>({hidden:m?void 0:!0,tabindex:-1,style:Dt({display:m?void 0:"none"}),"aria-hidden":"true","data-state":Ma(m)}),action:m=>{let b=Lt;if(o.get()){const T=Wn(m,{handler:()=>{p.set(!1);const U=P.get();U&&U.focus()}});T&&T.destroy&&(b=T.destroy)}const $=Ne([l],([T])=>{if(T===null)return Lt;const U=vs(m,T);return U===null?Lt:si(m,U).destroy});return{destroy(){b(),$()}}}}),br=Oe(e("item"),{returned:()=>({role:"menuitem",tabindex:-1,"data-orientation":"vertical"}),action:m=>(Ft(m,t),ar(m),{destroy:Be(G(m,"pointerdown",$=>{const T=$.currentTarget;if(L(T)&&xe(T)){$.preventDefault();return}}),G(m,"click",$=>{const T=$.currentTarget;if(L(T)){if(xe(T)){$.preventDefault();return}if($.defaultPrevented){ve(T);return}g.get()&&St(1).then(()=>{p.set(!1)})}}),G(m,"keydown",$=>{jr($)}),G(m,"pointermove",$=>{Pr($)}),G(m,"pointerleave",$=>{Ir($)}),G(m,"focusin",$=>{Yt($)}),G(m,"focusout",$=>{Ar($)}))})}),$r=Oe(e("group"),{returned:()=>m=>({role:"group","aria-labelledby":m})}),kr=Oe(e("group-label"),{returned:()=>m=>({id:m})}),Tr={defaultChecked:!1,disabled:!1},Er=m=>{const b={...Tr,...m},$=b.checked??_e(b.defaultChecked??null),T=lr($,b.onCheckedChange),U=_e(b.disabled),se=Oe(e("checkbox-item"),{stores:[T,U],returned:([K,V])=>({role:"menuitemcheckbox",tabindex:-1,"data-orientation":"vertical","aria-checked":Rr(K)?"mixed":K?"true":"false","data-disabled":Lr(V),"data-state":Un(K)}),action:K=>(Ft(K,t),ar(K),{destroy:Be(G(K,"pointerdown",N=>{const H=N.currentTarget;if(L(H)&&xe(H)){N.preventDefault();return}}),G(K,"click",N=>{const H=N.currentTarget;if(L(H)){if(xe(H)){N.preventDefault();return}if(N.defaultPrevented){ve(H);return}T.update(ze=>Rr(ze)?!0:!ze),g.get()&&er().then(()=>{p.set(!1)})}}),G(K,"keydown",N=>{jr(N)}),G(K,"pointermove",N=>{const H=N.currentTarget;if(L(H)){if(xe(H)){Cr(N);return}Pr(N,H)}}),G(K,"pointerleave",N=>{Ir(N)}),G(K,"focusin",N=>{Yt(N)}),G(K,"focusout",N=>{Ar(N)}))})}),ke=Bt(T,K=>K===!0),re=Bt(T,K=>K==="indeterminate");return{elements:{checkboxItem:se},states:{checked:T},helpers:{isChecked:ke,isIndeterminate:re},options:{disabled:U}}},Or=(m={})=>{const b=m.value??_e(m.defaultValue??null),$=lr(b,m.onValueChange),T=Oe(e("radio-group"),{returned:()=>({role:"group"})}),U={disabled:!1},se=Oe(e("radio-item"),{stores:[$],returned:([re])=>K=>{const{value:V,disabled:N}={...U,...K},H=re===V;return{disabled:N,role:"menuitemradio","data-state":H?"checked":"unchecked","aria-checked":H,"data-disabled":Lr(N),"data-value":V,"data-orientation":"vertical",tabindex:-1}},action:re=>(Ft(re,t),{destroy:Be(G(re,"pointerdown",V=>{const N=V.currentTarget;if(!L(N))return;const H=re.dataset.value;if(re.dataset.disabled||H===void 0){V.preventDefault();return}}),G(re,"click",V=>{const N=V.currentTarget;if(!L(N))return;const H=re.dataset.value;if(re.dataset.disabled||H===void 0){V.preventDefault();return}if(V.defaultPrevented){if(!L(N))return;ve(N);return}$.set(H),g.get()&&er().then(()=>{p.set(!1)})}),G(re,"keydown",V=>{jr(V)}),G(re,"pointermove",V=>{const N=V.currentTarget;if(!L(N))return;const H=re.dataset.value;if(re.dataset.disabled||H===void 0){Cr(V);return}Pr(V,N)}),G(re,"pointerleave",V=>{Ir(V)}),G(re,"focusin",V=>{Yt(V)}),G(re,"focusout",V=>{Ar(V)}))})}),ke=Bt($,re=>K=>re===K);return{elements:{radioGroup:T,radioItem:se},states:{value:$},helpers:{isChecked:ke}}},{elements:{root:Sr}}=xa({orientation:"horizontal"}),k={...ja,disabled:!1,positioning:{placement:"right-start",gutter:8}},Rn=m=>{const b={...k,...m},$=b.open??_e(!1),T=lr($,b==null?void 0:b.onOpenChange),U=Kt(rn(b,"ids")),{positioning:se,arrowSize:ke,disabled:re}=U,K=we(_e(null)),V=we(_e(null)),N=we(_e(0)),H=Kt({...gs(Ns),...b.ids});ms(()=>{const q=document.getElementById(H.trigger.get());q&&K.set(q)});const ze=_s({open:T,forceVisible:u,activeTrigger:K}),Mn=Oe(e("submenu"),{stores:[ze,H.menu,H.trigger],returned:([q,me,Te])=>({role:"menu",hidden:q?void 0:!0,style:Dt({display:q?void 0:"none"}),id:me,"aria-labelledby":Te,"data-state":q?"open":"closed","data-id":me,tabindex:-1}),action:q=>{let me=Lt;const Te=Ne([ze,se],([j,Q])=>{if(me(),!j)return;const oe=K.get();oe&&er().then(()=>{me();const de=us(oe);me=ps(q,{anchorElement:oe,open:T,options:{floating:Q,portal:L(de)?de:void 0,modal:null,focusTrap:null,escapeKeydown:null}}).destroy})}),J=Be(G(q,"keydown",j=>{if(j.key===be.ESCAPE)return;const Q=j.target,oe=j.currentTarget;if(!L(Q)||!L(oe)||!(Q.closest('[role="menu"]')===oe))return;if(fs.includes(j.key)){j.stopImmediatePropagation(),Bs(j,d.get()??!1);return}const yt=Ia.ltr.includes(j.key),bt=j.ctrlKey||j.altKey||j.metaKey,Zt=j.key.length===1;if(yt){const cs=K.get();j.preventDefault(),T.update(()=>(cs&&ve(cs),!1));return}if(j.key===be.TAB){j.preventDefault(),p.set(!1),Fs(j,R,D);return}!bt&&Zt&&c.get()===!0&&fe(j.key,it(oe))}),G(q,"pointermove",j=>{Ln(j)}),G(q,"focusout",j=>{const Q=K.get();if(M.get()){const oe=j.target,de=document.getElementById(H.menu.get());if(!L(de)||!L(oe))return;!de.contains(oe)&&oe!==Q&&T.set(!1)}else{const oe=j.currentTarget,de=j.relatedTarget;if(!L(de)||!L(oe))return;!oe.contains(de)&&de!==Q&&T.set(!1)}}));return{destroy(){Te(),me(),J()}}}}),Nn=Oe(e("subtrigger"),{stores:[T,re,H.menu,H.trigger],returned:([q,me,Te,J])=>({role:"menuitem",id:J,tabindex:-1,"aria-controls":Te,"aria-expanded":q,"data-state":q?"open":"closed","data-disabled":Lr(me),"aria-haspopop":"menu"}),action:q=>{Ft(q,t),ar(q),K.update(J=>J||q);const me=()=>{Kr(V),window.clearTimeout(N.get()),pe.set(null)},Te=Be(G(q,"click",J=>{if(J.defaultPrevented)return;const j=J.currentTarget;!L(j)||xe(j)||(ve(j),T.get()||T.update(Q=>Q||(K.set(j),!Q)))}),G(q,"keydown",J=>{const j=X.get(),Q=J.currentTarget;if(!(!L(Q)||xe(Q)||j.length>0&&J.key===be.SPACE)&&Pa.ltr.includes(J.key)){if(!T.get()){Q.click(),J.preventDefault();return}const de=Q.getAttribute("aria-controls");if(!de)return;const yt=document.getElementById(de);if(!L(yt))return;const bt=it(yt)[0];ve(bt)}}),G(q,"pointermove",J=>{if(!Nt(J)||(ls(J),J.defaultPrevented))return;const j=J.currentTarget;if(!L(j))return;Ua(H.menu.get())||ve(j);const Q=V.get();!T.get()&&!Q&&!xe(j)&&V.set(window.setTimeout(()=>{T.update(()=>(K.set(j),!0)),Kr(V)},100))}),G(q,"pointerleave",J=>{if(!Nt(J))return;Kr(V);const j=document.getElementById(H.menu.get()),Q=j==null?void 0:j.getBoundingClientRect();if(Q){const oe=j==null?void 0:j.dataset.side,de=oe==="right",yt=de?-5:5,bt=Q[de?"left":"right"],Zt=Q[de?"right":"left"];pe.set({area:[{x:J.clientX+yt,y:J.clientY},{x:bt,y:Q.top},{x:Zt,y:Q.top},{x:Zt,y:Q.bottom},{x:bt,y:Q.bottom}],side:oe}),window.clearTimeout(N.get()),N.set(window.setTimeout(()=>{pe.set(null)},300))}else{if(Dn(J),J.defaultPrevented)return;pe.set(null)}}),G(q,"focusout",J=>{const j=J.currentTarget;if(!L(j))return;Et(j);const Q=J.relatedTarget;if(!L(Q))return;const oe=j.getAttribute("aria-controls");if(!oe)return;const de=document.getElementById(oe);de&&!de.contains(Q)&&T.set(!1)}),G(q,"focusin",J=>{Yt(J)}));return{destroy(){me(),Te()}}}}),Fn=Oe(e("subarrow"),{stores:ke,returned:q=>({"data-arrow":!0,style:Dt({position:"absolute",width:`var(--arrow-size, ${q}px)`,height:`var(--arrow-size, ${q}px)`})})});return Ne([p],([q])=>{q||(K.set(null),T.set(!1))}),Ne([pe],([q])=>{!Ot||q||window.clearTimeout(N.get())}),Ne([T],([q])=>{if(Ot&&(q&&M.get()&&St(1).then(()=>{const me=document.getElementById(H.menu.get());if(!me)return;const Te=it(me);Te.length&&ve(Te[0])}),!q)){const me=he.get(),Te=document.getElementById(H.trigger.get());if(me&&St(1).then(()=>{const J=document.getElementById(H.menu.get());J&&J.contains(me)&&Et(me)}),!Te||document.activeElement===Te)return;Et(Te)}}),{ids:H,elements:{subTrigger:Nn,subMenu:Mn,subArrow:Fn},states:{subOpen:T},options:U}};ms(()=>{const m=document.getElementById(ce.trigger.get());L(m)&&p.get()&&P.set(m);const b=[],$=()=>M.set(!1),T=()=>{M.set(!0),b.push(Be(tt(document,"pointerdown",$,{capture:!0,once:!0}),tt(document,"pointermove",$,{capture:!0,once:!0})))},U=se=>{if(se.key===be.ESCAPE&&o.get()){p.set(!1);return}};return b.push(tt(document,"keydown",T,{capture:!0})),b.push(tt(document,"keydown",U)),()=>{b.forEach(se=>se())}}),Ne([p,he],([m,b])=>{!m&&b&&Et(b)}),Ne([p],([m])=>{if(Ot&&!m){const b=P.get();if(!b)return;const $=f.get();!m&&b&&ni({prop:$,defaultEl:b})}}),Ne([p,r],([m,b])=>{if(!Ot)return;const $=[];return m&&b&&$.push(ii()),St(1).then(()=>{const T=document.getElementById(ce.menu.get());if(T&&m&&M.get()){if(h.get()){ve(T);return}const U=it(T);if(!U.length)return;ve(U[0])}}),()=>{$.forEach(T=>T())}}),Ne(p,m=>{if(!Ot)return;const b=()=>M.set(!1),$=T=>{if(M.set(!0),T.key===be.ESCAPE&&m&&o.get()){p.set(!1);return}};return Be(tt(document,"pointerdown",b,{capture:!0,once:!0}),tt(document,"pointermove",b,{capture:!0,once:!0}),tt(document,"keydown",$,{capture:!0}))});function as(m){p.update(b=>{const $=!b;return $&&(R.set(ai(m)),D.set(li(m)),P.set(m)),$})}function Yt(m){const b=m.currentTarget;if(!L(b))return;const $=he.get();$&&Et($),Ea(b),he.set(b)}function Ar(m){const b=m.currentTarget;L(b)&&Et(b)}function ls(m){Dr(m)&&m.preventDefault()}function Cr(m){if(Dr(m))return;const b=m.target;if(!L(b))return;const $=us(b);$&&ve($)}function Dn(m){Dr(m)&&m.preventDefault()}function Ln(m){if(!Nt(m))return;const b=m.target,$=m.currentTarget;if(!L($)||!L(b))return;const T=W.get(),U=T!==m.clientX;if($.contains(b)&&U){const se=m.clientX>T?"right":"left";I.set(se),W.set(m.clientX)}}function Pr(m,b=null){if(!Nt(m)||(ls(m),m.defaultPrevented))return;if(b){ve(b);return}const $=m.currentTarget;L($)&&ve($)}function Ir(m){Nt(m)&&Cr(m)}function jr(m){if(X.get().length>0&&m.key===be.SPACE){m.preventDefault();return}if(cr.includes(m.key)){m.preventDefault();const T=m.currentTarget;if(!L(T))return;T.click()}}function Rr(m){return m==="indeterminate"}function Un(m){return Rr(m)?"indeterminate":m?"checked":"unchecked"}function Dr(m){return He.get()(m)}function us(m){const b=m.closest('[role="menu"]');return L(b)?b:null}return{elements:{trigger:et,menu:Ze,overlay:yr,item:br,group:$r,groupLabel:kr,arrow:wr,separator:Sr},builders:{createCheckboxItem:Er,createSubmenu:Rn,createMenuRadioGroup:Or},states:{open:p},helpers:{handleTypeaheadSearch:fe},ids:ce,options:n.rootOptions}}function Fs(n,e,t){if(n.shiftKey){const r=t.get();r&&(n.preventDefault(),St(1).then(()=>r.focus()),t.set(null))}else{const r=e.get();r&&(n.preventDefault(),St(1).then(()=>r.focus()),e.set(null))}}function it(n){return Array.from(n.querySelectorAll(`[data-melt-menu-id="${n.id}"]`)).filter(e=>L(e))}function ar(n){!n||!xe(n)||(n.setAttribute("data-disabled",""),n.setAttribute("aria-disabled","true"))}function Kr(n){if(!Ot)return;const e=n.get();e&&(window.clearTimeout(e),n.set(null))}function Nt(n){return n.pointerType==="mouse"}function Ft(n,e){if(!n)return;const t=n.closest(`${e()}, ${e("submenu")}`);L(t)&&n.setAttribute("data-melt-menu-id",t.id)}function Bs(n,e){n.preventDefault();const t=document.activeElement,r=n.currentTarget;if(!L(t)||!L(r))return;const i=it(r);if(!i.length)return;const s=i.filter(l=>!(l.hasAttribute("data-disabled")||l.getAttribute("disabled")==="true")),o=s.indexOf(t);let a;switch(n.key){case be.ARROW_DOWN:e?a=o<s.length-1?o+1:0:a=o<s.length-1?o+1:o;break;case be.ARROW_UP:e?a=o>0?o-1:s.length-1:a=o<0?s.length-1:o>0?o-1:0;break;case be.HOME:a=0;break;case be.END:a=s.length-1;break;default:return}ve(s[a])}function Da(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return La(t,e)}function La(n,e){const{x:t,y:r}=n;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,u=e[o].x,c=e[o].y;l>r!=c>r&&t<(u-a)*(r-l)/(c-l)+a&&(i=!i)}return i}function Ua(n){const e=document.activeElement;if(!L(e))return!1;const t=e.closest(`[data-id="${n}"]`);return L(t)}function Ma(n){return n?"open":"closed"}const Na={arrowSize:8,positioning:{placement:"bottom"},preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,portal:void 0,loop:!1,dir:"ltr",defaultOpen:!1,forceVisible:!1,typeahead:!0,closeFocus:void 0,disableFocusFirstItem:!1,closeOnItemClick:!0,onOutsideClick:void 0};function Fa(n){const e={...Na,...n},t=Kt(rn(e,"ids")),r=e.open??_e(e.defaultOpen),i=lr(r,e==null?void 0:e.onOpenChange),s=we(_e(null)),o=we(_e(null)),a=we(_e(null)),{elements:l,builders:u,ids:c,states:d,options:f}=Ra({rootOptions:t,rootOpen:i,rootActiveTrigger:we(s),nextFocusable:we(o),prevFocusable:we(a),selector:"dropdown-menu",removeScroll:!0,ids:e.ids});return{ids:c,elements:l,states:d,builders:u,options:f}}const Ba={orientation:"horizontal",decorative:!1},xa=n=>{const e={...Ba,...n},t=Kt(e),{orientation:r,decorative:i}=t;return{elements:{root:Oe("separator",{stores:[r,i],returned:([o,a])=>({role:a?"none":"separator","aria-orientation":o==="vertical"?o:void 0,"aria-hidden":a,"data-orientation":o})})},options:t}};function jn(){return{NAME:"menu",SUB_NAME:"menu-submenu",RADIO_GROUP_NAME:"menu-radiogroup",CHECKBOX_ITEM_NAME:"menu-checkboxitem",RADIO_ITEM_NAME:"menu-radioitem",GROUP_NAME:"menu-group",PARTS:["arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","radio-indicator","separator","sub-content","sub-trigger","trigger"]}}function vr(){const{NAME:n}=jn();return Hn(n)}function Ka(n){const{NAME:e,PARTS:t}=jn(),r=Qn("menu",t),i={...Fa({...Yn(n),forceVisible:!0}),getAttrs:r};return zn(e,i),{...i,updateOption:Zn(i.options)}}function Ha(n){const t={...{side:"bottom",align:"center"},...n},{options:{positioning:r}}=vr();oi(r)(t)}const za=n=>({builder:n&8}),xs=n=>({builder:n[3]}),qa=n=>({builder:n&8}),Ks=n=>({builder:n[3]});function Va(n){let e=n[1]?"a":"div",t,r,i=(n[1]?"a":"div")&&Hr(n);return{c(){i&&i.c(),t=Xe()},l(s){i&&i.l(s),t=Xe()},m(s,o){i&&i.m(s,o),v(s,t,o),r=!0},p(s,o){s[1],e?Qe(e,s[1]?"a":"div")?(i.d(1),i=Hr(s),e=s[1]?"a":"div",i.c(),i.m(t.parentNode,t)):i.p(s,o):(i=Hr(s),e=s[1]?"a":"div",i.c(),i.m(t.parentNode,t))},i(s){r||(y(i,s),r=!0)},o(s){w(i,s),r=!1},d(s){s&&_(t),i&&i.d(s)}}}function Ja(n){let e;const t=n[11].default,r=Ce(t,n,n[10],Ks);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s&1032)&&Pe(r,t,i,i[10],e?je(t,i[10],s,qa):Ie(i[10]),Ks)},i(i){e||(y(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}function Hr(n){let e,t,r,i;const s=n[11].default,o=Ce(s,n,n[10],xs);let a=[{href:n[1]},n[3],n[6]],l={};for(let u=0;u<a.length;u+=1)l=$e(l,a[u]);return{c(){e=ae(n[1]?"a":"div"),o&&o.c(),this.h()},l(u){e=le(u,((n[1]?"a":"div")||"null").toUpperCase(),{href:!0});var c=Ae(e);o&&o.l(c),c.forEach(_),this.h()},h(){ds(n[1]?"a":"div")(e,l)},m(u,c){v(u,e,c),o&&o.m(e,null),n[13](e),t=!0,r||(i=[dt(n[3].action(e)),ye(e,"m-click",n[5]),ye(e,"m-focusin",n[5]),ye(e,"m-focusout",n[5]),ye(e,"m-keydown",n[5]),ye(e,"m-pointerdown",n[5]),ye(e,"m-pointerleave",n[5]),ye(e,"m-pointermove",n[5]),ye(e,"pointerenter",n[12])],r=!0)},p(u,c){o&&o.p&&(!t||c&1032)&&Pe(o,s,u,u[10],t?je(s,u[10],c,za):Ie(u[10]),xs),ds(u[1]?"a":"div")(e,l=Ye(a,[(!t||c&2)&&{href:u[1]},c&8&&u[3],c&64&&u[6]]))},i(u){t||(y(o,u),t=!0)},o(u){w(o,u),t=!1},d(u){u&&_(e),o&&o.d(u),n[13](null),r=!1,ht(i)}}}function Ga(n){let e,t,r,i;const s=[Ja,Va],o=[];function a(l,u){return l[2]?0:1}return e=a(n),t=o[e]=s[e](n),{c(){t.c(),r=Xe()},l(l){t.l(l),r=Xe()},m(l,u){o[e].m(l,u),v(l,r,u),i=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(Vt(),w(o[c],1,1,()=>{o[c]=null}),Jt(),t=o[e],t?t.p(l,u):(t=o[e]=s[e](l),t.c()),y(t,1),t.m(r.parentNode,r))},i(l){i||(y(t),i=!0)},o(l){w(t),i=!1},d(l){l&&_(r),o[e].d(l)}}}function Wa(n,e,t){let r,i;const s=["href","asChild","disabled","el"];let o=Pt(e,s),a,{$$slots:l={},$$scope:u}=e,{href:c=void 0}=e,{asChild:d=!1}=e,{disabled:f=!1}=e,{el:h=void 0}=e;const{elements:{item:g},getAttrs:E}=vr();It(n,g,D=>t(9,a=D));const p=es();function P(D){qn.call(this,n,D)}function R(D){ot[D?"unshift":"push"](()=>{h=D,t(0,h)})}return n.$$set=D=>{e=$e($e({},e),qt(D)),t(6,o=Pt(e,s)),"href"in D&&t(1,c=D.href),"asChild"in D&&t(2,d=D.asChild),"disabled"in D&&t(7,f=D.disabled),"el"in D&&t(0,h=D.el),"$$scope"in D&&t(10,u=D.$$scope)},n.$$.update=()=>{n.$$.dirty&512&&t(3,r=a),n.$$.dirty&128&&t(8,i={...E("item"),...ei(f)}),n.$$.dirty&264&&Object.assign(r,i)},[h,c,d,r,g,p,o,f,i,a,u,l,P,R]}class ue extends ft{constructor(e){super(),mt(this,e,Wa,Ga,Qe,{href:1,asChild:2,disabled:7,el:0})}}const Xa=n=>({ids:n&1}),Hs=n=>({ids:n[0]});function Qa(n){let e;const t=n[16].default,r=Ce(t,n,n[15],Hs);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),e=!0},p(i,[s]){r&&r.p&&(!e||s&32769)&&Pe(r,t,i,i[15],e?je(t,i[15],s,Xa):Ie(i[15]),Hs)},i(i){e||(y(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}function Ya(n,e,t){let r,{$$slots:i={},$$scope:s}=e,{closeOnOutsideClick:o=void 0}=e,{closeOnEscape:a=void 0}=e,{portal:l=void 0}=e,{open:u=void 0}=e,{onOpenChange:c=void 0}=e,{preventScroll:d=void 0}=e,{loop:f=void 0}=e,{dir:h=void 0}=e,{typeahead:g=void 0}=e,{closeFocus:E=void 0}=e,{disableFocusFirstItem:p=void 0}=e,{closeOnItemClick:P=void 0}=e,{onOutsideClick:R=void 0}=e;const{states:{open:D},updateOption:M,ids:W}=Ka({closeOnOutsideClick:o,closeOnEscape:a,portal:l,forceVisible:!0,defaultOpen:u,preventScroll:d,loop:f,dir:h,typeahead:g,closeFocus:E,disableFocusFirstItem:p,closeOnItemClick:P,onOutsideClick:R,onOpenChange:({next:I})=>(u!==I&&(c==null||c(I),t(2,u=I)),I)}),pe=Bt([W.menu,W.trigger],([I,he])=>({menu:I,trigger:he}));return It(n,pe,I=>t(0,r=I)),n.$$set=I=>{"closeOnOutsideClick"in I&&t(3,o=I.closeOnOutsideClick),"closeOnEscape"in I&&t(4,a=I.closeOnEscape),"portal"in I&&t(5,l=I.portal),"open"in I&&t(2,u=I.open),"onOpenChange"in I&&t(6,c=I.onOpenChange),"preventScroll"in I&&t(7,d=I.preventScroll),"loop"in I&&t(8,f=I.loop),"dir"in I&&t(9,h=I.dir),"typeahead"in I&&t(10,g=I.typeahead),"closeFocus"in I&&t(11,E=I.closeFocus),"disableFocusFirstItem"in I&&t(12,p=I.disableFocusFirstItem),"closeOnItemClick"in I&&t(13,P=I.closeOnItemClick),"onOutsideClick"in I&&t(14,R=I.onOutsideClick),"$$scope"in I&&t(15,s=I.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&u!==void 0&&D.set(u),n.$$.dirty&8&&M("closeOnOutsideClick",o),n.$$.dirty&16&&M("closeOnEscape",a),n.$$.dirty&32&&M("portal",l),n.$$.dirty&128&&M("preventScroll",d),n.$$.dirty&256&&M("loop",f),n.$$.dirty&512&&M("dir",h),n.$$.dirty&2048&&M("closeFocus",E),n.$$.dirty&4096&&M("disableFocusFirstItem",p),n.$$.dirty&1024&&M("typeahead",g),n.$$.dirty&8192&&M("closeOnItemClick",P),n.$$.dirty&16384&&M("onOutsideClick",R)},[r,pe,u,o,a,l,c,d,f,h,g,E,p,P,R,s,i]}class ut extends ft{constructor(e){super(),mt(this,e,Ya,Qa,Qe,{closeOnOutsideClick:3,closeOnEscape:4,portal:5,open:2,onOpenChange:6,preventScroll:7,loop:8,dir:9,typeahead:10,closeFocus:11,disableFocusFirstItem:12,closeOnItemClick:13,onOutsideClick:14})}}const Za=n=>({builder:n[0]&256}),zs=n=>({builder:n[8]}),el=n=>({builder:n[0]&256}),qs=n=>({builder:n[8]}),tl=n=>({builder:n[0]&256}),Vs=n=>({builder:n[8]}),rl=n=>({builder:n[0]&256}),Js=n=>({builder:n[8]}),sl=n=>({builder:n[0]&256}),Gs=n=>({builder:n[8]}),nl=n=>({builder:n[0]&256}),Ws=n=>({builder:n[8]});function il(n){let e,t,r,i;const s=n[28].default,o=Ce(s,n,n[27],zs);let a=[n[8],n[13]],l={};for(let u=0;u<a.length;u+=1)l=$e(l,a[u]);return{c(){e=ae("div"),o&&o.c(),this.h()},l(u){e=le(u,"DIV",{});var c=Ae(e);o&&o.l(c),c.forEach(_),this.h()},h(){Le(e,l)},m(u,c){v(u,e,c),o&&o.m(e,null),n[33](e),t=!0,r||(i=[dt(n[8].action(e)),ye(e,"m-keydown",n[12])],r=!0)},p(u,c){o&&o.p&&(!t||c[0]&134217984)&&Pe(o,s,u,u[27],t?je(s,u[27],c,Za):Ie(u[27]),zs),Le(e,l=Ye(a,[c[0]&256&&u[8],c[0]&8192&&u[13]]))},i(u){t||(y(o,u),t=!0)},o(u){w(o,u),t=!1},d(u){u&&_(e),o&&o.d(u),n[33](null),r=!1,ht(i)}}}function ol(n){let e,t,r,i,s;const o=n[28].default,a=Ce(o,n,n[27],qs);let l=[n[8],n[13]],u={};for(let c=0;c<l.length;c+=1)u=$e(u,l[c]);return{c(){e=ae("div"),a&&a.c(),this.h()},l(c){e=le(c,"DIV",{});var d=Ae(e);a&&a.l(d),d.forEach(_),this.h()},h(){Le(e,u)},m(c,d){v(c,e,d),a&&a.m(e,null),n[32](e),r=!0,i||(s=[dt(n[8].action(e)),ye(e,"m-keydown",n[12])],i=!0)},p(c,d){n=c,a&&a.p&&(!r||d[0]&134217984)&&Pe(a,o,n,n[27],r?je(o,n[27],d,el):Ie(n[27]),qs),Le(e,u=Ye(l,[d[0]&256&&n[8],d[0]&8192&&n[13]]))},i(c){r||(y(a,c),t&&t.end(1),r=!0)},o(c){w(a,c),c&&(t=en(e,n[5],n[6])),r=!1},d(c){c&&_(e),a&&a.d(c),n[32](null),c&&t&&t.end(),i=!1,ht(s)}}}function al(n){let e,t,r,i,s;const o=n[28].default,a=Ce(o,n,n[27],Vs);let l=[n[8],n[13]],u={};for(let c=0;c<l.length;c+=1)u=$e(u,l[c]);return{c(){e=ae("div"),a&&a.c(),this.h()},l(c){e=le(c,"DIV",{});var d=Ae(e);a&&a.l(d),d.forEach(_),this.h()},h(){Le(e,u)},m(c,d){v(c,e,d),a&&a.m(e,null),n[31](e),r=!0,i||(s=[dt(n[8].action(e)),ye(e,"m-keydown",n[12])],i=!0)},p(c,d){n=c,a&&a.p&&(!r||d[0]&134217984)&&Pe(a,o,n,n[27],r?je(o,n[27],d,tl):Ie(n[27]),Vs),Le(e,u=Ye(l,[d[0]&256&&n[8],d[0]&8192&&n[13]]))},i(c){r||(y(a,c),c&&(t||Zr(()=>{t=tn(e,n[3],n[4]),t.start()})),r=!0)},o(c){w(a,c),r=!1},d(c){c&&_(e),a&&a.d(c),n[31](null),i=!1,ht(s)}}}function ll(n){let e,t,r,i,s,o;const a=n[28].default,l=Ce(a,n,n[27],Js);let u=[n[8],n[13]],c={};for(let d=0;d<u.length;d+=1)c=$e(c,u[d]);return{c(){e=ae("div"),l&&l.c(),this.h()},l(d){e=le(d,"DIV",{});var f=Ae(e);l&&l.l(f),f.forEach(_),this.h()},h(){Le(e,c)},m(d,f){v(d,e,f),l&&l.m(e,null),n[30](e),i=!0,s||(o=[dt(n[8].action(e)),ye(e,"m-keydown",n[12])],s=!0)},p(d,f){n=d,l&&l.p&&(!i||f[0]&134217984)&&Pe(l,a,n,n[27],i?je(a,n[27],f,rl):Ie(n[27]),Js),Le(e,c=Ye(u,[f[0]&256&&n[8],f[0]&8192&&n[13]]))},i(d){i||(y(l,d),d&&Zr(()=>{i&&(r&&r.end(1),t=tn(e,n[3],n[4]),t.start())}),i=!0)},o(d){w(l,d),t&&t.invalidate(),d&&(r=en(e,n[5],n[6])),i=!1},d(d){d&&_(e),l&&l.d(d),n[30](null),d&&r&&r.end(),s=!1,ht(o)}}}function ul(n){let e,t,r,i,s;const o=n[28].default,a=Ce(o,n,n[27],Gs);let l=[n[8],n[13]],u={};for(let c=0;c<l.length;c+=1)u=$e(u,l[c]);return{c(){e=ae("div"),a&&a.c(),this.h()},l(c){e=le(c,"DIV",{});var d=Ae(e);a&&a.l(d),d.forEach(_),this.h()},h(){Le(e,u)},m(c,d){v(c,e,d),a&&a.m(e,null),n[29](e),r=!0,i||(s=[dt(n[8].action(e)),ye(e,"m-keydown",n[12])],i=!0)},p(c,d){n=c,a&&a.p&&(!r||d[0]&134217984)&&Pe(a,o,n,n[27],r?je(o,n[27],d,sl):Ie(n[27]),Gs),Le(e,u=Ye(l,[d[0]&256&&n[8],d[0]&8192&&n[13]]))},i(c){r||(y(a,c),c&&Zr(()=>{r&&(t||(t=hs(e,n[1],n[2],!0)),t.run(1))}),r=!0)},o(c){w(a,c),c&&(t||(t=hs(e,n[1],n[2],!1)),t.run(0)),r=!1},d(c){c&&_(e),a&&a.d(c),n[29](null),c&&t&&t.end(),i=!1,ht(s)}}}function cl(n){let e;const t=n[28].default,r=Ce(t,n,n[27],Ws);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s[0]&134217984)&&Pe(r,t,i,i[27],e?je(t,i[27],s,nl):Ie(i[27]),Ws)},i(i){e||(y(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}function dl(n){let e,t,r,i;const s=[cl,ul,ll,al,ol,il],o=[];function a(l,u){return l[7]&&l[9]?0:l[1]&&l[9]?1:l[3]&&l[5]&&l[9]?2:l[3]&&l[9]?3:l[5]&&l[9]?4:l[9]?5:-1}return~(e=a(n))&&(t=o[e]=s[e](n)),{c(){t&&t.c(),r=Xe()},l(l){t&&t.l(l),r=Xe()},m(l,u){~e&&o[e].m(l,u),v(l,r,u),i=!0},p(l,u){let c=e;e=a(l),e===c?~e&&o[e].p(l,u):(t&&(Vt(),w(o[c],1,1,()=>{o[c]=null}),Jt()),~e?(t=o[e],t?t.p(l,u):(t=o[e]=s[e](l),t.c()),y(t,1),t.m(r.parentNode,r)):t=null)},i(l){i||(y(t),i=!0)},o(l){w(t),i=!1},d(l){l&&_(r),~e&&o[e].d(l)}}}function hl(n,e,t){let r;const i=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let s=Pt(e,i),o,a,{$$slots:l={},$$scope:u}=e,{transition:c=void 0}=e,{transitionConfig:d=void 0}=e,{inTransition:f=void 0}=e,{inTransitionConfig:h=void 0}=e,{outTransition:g=void 0}=e,{outTransitionConfig:E=void 0}=e,{asChild:p=!1}=e,{id:P=void 0}=e,{side:R="bottom"}=e,{align:D="center"}=e,{sideOffset:M=0}=e,{alignOffset:W=0}=e,{collisionPadding:pe=8}=e,{avoidCollisions:I=!0}=e,{collisionBoundary:he=void 0}=e,{sameWidth:He=!1}=e,{fitViewport:X=!1}=e,{strategy:fe="absolute"}=e,{overlap:ce=!1}=e,{el:ee=void 0}=e;const{elements:{menu:Ze},states:{open:et},ids:wr,getAttrs:yr}=vr();It(n,Ze,k=>t(26,a=k)),It(n,et,k=>t(9,o=k));const br=es(),$r=yr("content");function kr(k){ot[k?"unshift":"push"](()=>{ee=k,t(0,ee)})}function Tr(k){ot[k?"unshift":"push"](()=>{ee=k,t(0,ee)})}function Er(k){ot[k?"unshift":"push"](()=>{ee=k,t(0,ee)})}function Or(k){ot[k?"unshift":"push"](()=>{ee=k,t(0,ee)})}function Sr(k){ot[k?"unshift":"push"](()=>{ee=k,t(0,ee)})}return n.$$set=k=>{e=$e($e({},e),qt(k)),t(13,s=Pt(e,i)),"transition"in k&&t(1,c=k.transition),"transitionConfig"in k&&t(2,d=k.transitionConfig),"inTransition"in k&&t(3,f=k.inTransition),"inTransitionConfig"in k&&t(4,h=k.inTransitionConfig),"outTransition"in k&&t(5,g=k.outTransition),"outTransitionConfig"in k&&t(6,E=k.outTransitionConfig),"asChild"in k&&t(7,p=k.asChild),"id"in k&&t(14,P=k.id),"side"in k&&t(15,R=k.side),"align"in k&&t(16,D=k.align),"sideOffset"in k&&t(17,M=k.sideOffset),"alignOffset"in k&&t(18,W=k.alignOffset),"collisionPadding"in k&&t(19,pe=k.collisionPadding),"avoidCollisions"in k&&t(20,I=k.avoidCollisions),"collisionBoundary"in k&&t(21,he=k.collisionBoundary),"sameWidth"in k&&t(22,He=k.sameWidth),"fitViewport"in k&&t(23,X=k.fitViewport),"strategy"in k&&t(24,fe=k.strategy),"overlap"in k&&t(25,ce=k.overlap),"el"in k&&t(0,ee=k.el),"$$scope"in k&&t(27,u=k.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&P&&wr.menu.set(P),n.$$.dirty[0]&67108864&&t(8,r=a),n.$$.dirty[0]&256&&Object.assign(r,$r),n.$$.dirty[0]&67076608&&o&&Ha({side:R,align:D,sideOffset:M,alignOffset:W,collisionPadding:pe,avoidCollisions:I,collisionBoundary:he,sameWidth:He,fitViewport:X,strategy:fe,overlap:ce})},[ee,c,d,f,h,g,E,p,r,o,Ze,et,br,s,P,R,D,M,W,pe,I,he,He,X,fe,ce,a,u,l,kr,Tr,Er,Or,Sr]}class pt extends ft{constructor(e){super(),mt(this,e,hl,dl,Qe,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}}const fl=n=>({builder:n&4}),Xs=n=>({builder:n[2]}),ml=n=>({builder:n&4}),Qs=n=>({builder:n[2]});function gl(n){let e,t,r,i;const s=n[9].default,o=Ce(s,n,n[8],Xs);let a=[n[2],{type:"button"},n[5]],l={};for(let u=0;u<a.length;u+=1)l=$e(l,a[u]);return{c(){e=ae("button"),o&&o.c(),this.h()},l(u){e=le(u,"BUTTON",{type:!0});var c=Ae(e);o&&o.l(c),c.forEach(_),this.h()},h(){Le(e,l)},m(u,c){v(u,e,c),o&&o.m(e,null),e.autofocus&&e.focus(),n[10](e),t=!0,r||(i=[dt(n[2].action(e)),ye(e,"m-keydown",n[4]),ye(e,"m-pointerdown",n[4])],r=!0)},p(u,c){o&&o.p&&(!t||c&260)&&Pe(o,s,u,u[8],t?je(s,u[8],c,fl):Ie(u[8]),Xs),Le(e,l=Ye(a,[c&4&&u[2],{type:"button"},c&32&&u[5]]))},i(u){t||(y(o,u),t=!0)},o(u){w(o,u),t=!1},d(u){u&&_(e),o&&o.d(u),n[10](null),r=!1,ht(i)}}}function _l(n){let e;const t=n[9].default,r=Ce(t,n,n[8],Qs);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s&260)&&Pe(r,t,i,i[8],e?je(t,i[8],s,ml):Ie(i[8]),Qs)},i(i){e||(y(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}function pl(n){let e,t,r,i;const s=[_l,gl],o=[];function a(l,u){return l[1]?0:1}return e=a(n),t=o[e]=s[e](n),{c(){t.c(),r=Xe()},l(l){t.l(l),r=Xe()},m(l,u){o[e].m(l,u),v(l,r,u),i=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(Vt(),w(o[c],1,1,()=>{o[c]=null}),Jt(),t=o[e],t?t.p(l,u):(t=o[e]=s[e](l),t.c()),y(t,1),t.m(r.parentNode,r))},i(l){i||(y(t),i=!0)},o(l){w(t),i=!1},d(l){l&&_(r),o[e].d(l)}}}function vl(n,e,t){let r;const i=["asChild","id","el"];let s=Pt(e,i),o,{$$slots:a={},$$scope:l}=e,{asChild:u=!1}=e,{id:c=void 0}=e,{el:d=void 0}=e;const{elements:{trigger:f},ids:h,getAttrs:g}=vr();It(n,f,R=>t(7,o=R));const E=es(),p=g("trigger");function P(R){ot[R?"unshift":"push"](()=>{d=R,t(0,d)})}return n.$$set=R=>{e=$e($e({},e),qt(R)),t(5,s=Pt(e,i)),"asChild"in R&&t(1,u=R.asChild),"id"in R&&t(6,c=R.id),"el"in R&&t(0,d=R.el),"$$scope"in R&&t(8,l=R.$$scope)},n.$$.update=()=>{n.$$.dirty&64&&c&&h.trigger.set(c),n.$$.dirty&128&&t(2,r=o),n.$$.dirty&4&&Object.assign(r,p)},[d,u,r,f,E,s,c,o,l,a,P]}class vt extends ft{constructor(e){super(),mt(this,e,vl,pl,Qe,{asChild:1,id:6,el:0})}}function wl(n){let e;const t=n[2].default,r=Ce(t,n,n[3],null);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),e=!0},p(i,s){r&&r.p&&(!e||s&8)&&Pe(r,t,i,i[3],e?je(t,i[3],s,null):Ie(i[3]),null)},i(i){e||(y(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}function yl(n){let e,t;const r=[{name:"chevron-down"},n[1],{iconNode:n[0]}];let i={$$slots:{default:[wl]},$$scope:{ctx:n}};for(let s=0;s<r.length;s+=1)i=$e(i,r[s]);return e=new ui({props:i}),{c(){O(e.$$.fragment)},l(s){S(e.$$.fragment,s)},m(s,o){A(e,s,o),t=!0},p(s,[o]){const a=o&3?Ye(r,[r[0],o&2&&ti(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){C(e,s)}}}function bl(n,e,t){let{$$slots:r={},$$scope:i}=e;const s=[["path",{d:"m6 9 6 6 6-6"}]];return n.$$set=o=>{t(1,e=$e($e({},e),qt(o))),"$$scope"in o&&t(3,i=o.$$scope)},e=qt(e),[s,e,r,i]}class wt extends ft{constructor(e){super(),mt(this,e,bl,yl,Qe,{})}}const $l="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2027.5.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20577.43%20205.9'%20style='enable-background:new%200%200%20577.43%20205.9;'%20xml:space='preserve'%3e%3cstyle%20type='text/css'%3e%20.st0{fill:%230E1116;}%20.st1{fill:%23F8F8EF;}%20.st2{fill:%238E27FC;}%20.st3{fill:%234D5762;}%20%3c/style%3e%3cg%20id='Group_674_00000106856769330492338740000005917021583205678009_'%20transform='translate(-26%2017)'%3e%3cg%20id='Rectangle_122-2_00000052069067913817408390000003574703763945306011_'%3e%3crect%20x='26'%20y='-17'%20class='st0'%20width='577.43'%20height='205.9'/%3e%3c/g%3e%3cg%20id='Path_109-2_00000151535872903001963660000010623173054771961533_'%3e%3cpath%20class='st1'%20d='M314.19,125.12h-10.44V46.27l43.63-0.13v9.91h-33.2v17.07h33.17v9.91h-33.17V125.12z'/%3e%3c/g%3e%3cg%20id='Path_110-2_00000061433761645288638310000015100925618916539052_'%3e%3cpath%20class='st1'%20d='M417.81,125.13h-13.76l-19.25-35.24h-4.41l0.13,35.24h-10.61V46.25h40.87v43.64h-12.12L417.81,125.13z%20M399.79,56.03h-19.41v23.95h19.4L399.79,56.03z'/%3e%3c/g%3e%3cg%20id='Path_111-2_00000030482309971263364680000000616370780015642803_'%3e%3cpath%20class='st1'%20d='M479.75,114.39v10.74h-43.63V46.27l43.63-0.13v9.91H446.6v17.07h33.17v9.91H446.6v31.38L479.75,114.39z'/%3e%3c/g%3e%3cg%20id='Path_112-2_00000043430453379556173990000003436790021054259121_'%3e%3cpath%20class='st1'%20d='M535.35,162.83h-10.46v-37.71h-22.57V46.26h43.63v78.87h-10.6V162.83z%20M534.96,114.38V56.03l-22.16,0.14%20v58.19L534.96,114.38z'/%3e%3c/g%3e%3cg%20id='Path_113-2_00000055665928395415542740000006958786296353728423_'%3e%3cpath%20class='st2'%20d='M166.76,136.97l-4.44,0l-10.54-86.59l-10.48,83.46l-4.44,0.02l-10.64-79.06l-10.39,68.2l-4.41,0.07%20l-10.9-58.52l-10.17,38.08l-4.25,0.23c-0.21-0.54-4.49-11.66-6.12-16.36H52.75v-4.48h28.84l2.15,1.62%20c0.39,1.37,2.32,6.53,4.07,11.15l10.94-40.95l4.36,0.17l10.29,55.24l10.75-70.55l4.43,0.04L139,116.2l10.59-84.34l4.44,0.01%20l10.52,86.41l10.5-85.31l4.44-0.02l10.63,81.5l10.39-71.03l4.42-0.06l10.76,61.94l10.29-46.92l4.32-0.2l7.54,23.85h32.43v4.48%20h-34.07l-2.13-1.56l-5.51-17.42l-10.93,49.87l-4.39-0.1L202.9,57.91l-10.7,73.2l-4.43-0.03l-10.44-80.03L166.76,136.97z'/%3e%3c/g%3e%3cg%20id='Rectangle_123-2_00000063605794836392181810000009683233047382840966_'%3e%3cpath%20class='st3'%20d='M578.81,164.28H50.62V7.62h528.19V164.28z%20M55.1,159.81h519.24V12.09H55.1V159.81z'/%3e%3c/g%3e%3cg%20id='Line_1-2_00000123403290828034649920000015690053212963089795_'%3e%3crect%20x='270.02'%20y='10.25'%20class='st3'%20width='4.48'%20height='152.58'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function kl(n){let e,t,r,i="<button>about</button>",s,o,a="<button>log in/sign up</button>",l;return e=new ut({props:{$$slots:{default:[Cl]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),r=ae("a"),r.innerHTML=i,s=B(),o=ae("a"),o.innerHTML=a,this.h()},l(u){S(e.$$.fragment,u),t=x(u),r=le(u,"A",{href:!0,"data-svelte-h":!0}),ct(r)!=="svelte-ispkvw"&&(r.innerHTML=i),s=x(u),o=le(u,"A",{href:!0,"data-svelte-h":!0}),ct(o)!=="svelte-rpe6qm"&&(o.innerHTML=a),this.h()},h(){ie(r,"href","/about"),ie(o,"href","/welcome")},m(u,c){A(e,u,c),v(u,t,c),v(u,r,c),v(u,s,c),v(u,o,c),l=!0},p(u,c){const d={};c&256&&(d.$$scope={dirty:c,ctx:u}),e.$set(d)},i(u){l||(y(e.$$.fragment,u),l=!0)},o(u){w(e.$$.fragment,u),l=!1},d(u){u&&(_(t),_(r),_(s),_(o)),C(e,u)}}}function Tl(n){let e,t="<button>feed</button>",r,i,s,o,a,l,u="<button>about</button>",c,d,f;return i=new ut({props:{$$slots:{default:[Dl]},$$scope:{ctx:n}}}),o=new ut({props:{$$slots:{default:[Fl]},$$scope:{ctx:n}}}),d=new ut({props:{$$slots:{default:[ql]},$$scope:{ctx:n}}}),{c(){e=ae("a"),e.innerHTML=t,r=B(),O(i.$$.fragment),s=B(),O(o.$$.fragment),a=B(),l=ae("a"),l.innerHTML=u,c=B(),O(d.$$.fragment),this.h()},l(h){e=le(h,"A",{href:!0,"data-svelte-h":!0}),ct(e)!=="svelte-fd22ym"&&(e.innerHTML=t),r=x(h),S(i.$$.fragment,h),s=x(h),S(o.$$.fragment,h),a=x(h),l=le(h,"A",{href:!0,"data-svelte-h":!0}),ct(l)!=="svelte-197dj3w"&&(l.innerHTML=u),c=x(h),S(d.$$.fragment,h),this.h()},h(){ie(e,"href","/feed"),ie(l,"href","/about")},m(h,g){v(h,e,g),v(h,r,g),A(i,h,g),v(h,s,g),A(o,h,g),v(h,a,g),v(h,l,g),v(h,c,g),A(d,h,g),f=!0},p(h,g){const E={};g&256&&(E.$$scope={dirty:g,ctx:h}),i.$set(E);const p={};g&256&&(p.$$scope={dirty:g,ctx:h}),o.$set(p);const P={};g&270&&(P.$$scope={dirty:g,ctx:h}),d.$set(P)},i(h){f||(y(i.$$.fragment,h),y(o.$$.fragment,h),y(d.$$.fragment,h),f=!0)},o(h){w(i.$$.fragment,h),w(o.$$.fragment,h),w(d.$$.fragment,h),f=!1},d(h){h&&(_(e),_(r),_(s),_(a),_(l),_(c)),C(i,h),C(o,h),C(d,h)}}}function El(n){let e,t,r;return t=new wt({}),{c(){e=Y(`Explore
            `),O(t.$$.fragment)},l(i){e=Z(i,`Explore
            `),S(t.$$.fragment,i)},m(i,s){v(i,e,s),A(t,i,s),r=!0},i(i){r||(y(t.$$.fragment,i),r=!0)},o(i){w(t.$$.fragment,i),r=!1},d(i){i&&_(e),C(t,i)}}}function Ol(n){let e;return{c(){e=Y("Collections")},l(t){e=Z(t,"Collections")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function Sl(n){let e;return{c(){e=Y("Posts")},l(t){e=Z(t,"Posts")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function Al(n){let e,t,r,i;return e=new ue({props:{href:"/collections",$$slots:{default:[Ol]},$$scope:{ctx:n}}}),r=new ue({props:{href:"/posts",$$slots:{default:[Sl]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment)},l(s){S(e.$$.fragment,s),t=x(s),S(r.$$.fragment,s)},m(s,o){A(e,s,o),v(s,t,o),A(r,s,o),i=!0},p(s,o){const a={};o&256&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&256&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(y(e.$$.fragment,s),y(r.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(r.$$.fragment,s),i=!1},d(s){s&&_(t),C(e,s),C(r,s)}}}function Cl(n){let e,t,r,i;return e=new vt({props:{$$slots:{default:[El]},$$scope:{ctx:n}}}),r=new pt({props:{$$slots:{default:[Al]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment)},l(s){S(e.$$.fragment,s),t=x(s),S(r.$$.fragment,s)},m(s,o){A(e,s,o),v(s,t,o),A(r,s,o),i=!0},p(s,o){const a={};o&256&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&256&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(y(e.$$.fragment,s),y(r.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(r.$$.fragment,s),i=!1},d(s){s&&_(t),C(e,s),C(r,s)}}}function Pl(n){let e,t,r;return t=new wt({}),{c(){e=Y(`create
          `),O(t.$$.fragment)},l(i){e=Z(i,`create
          `),S(t.$$.fragment,i)},m(i,s){v(i,e,s),A(t,i,s),r=!0},i(i){r||(y(t.$$.fragment,i),r=!0)},o(i){w(t.$$.fragment,i),r=!1},d(i){i&&_(e),C(t,i)}}}function Il(n){let e;return{c(){e=Y("new post")},l(t){e=Z(t,"new post")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function jl(n){let e;return{c(){e=Y("new collection")},l(t){e=Z(t,"new collection")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function Rl(n){let e,t,r,i;return e=new ue({props:{href:"/posts/now-playing/new",$$slots:{default:[Il]},$$scope:{ctx:n}}}),r=new ue({props:{href:"/collection/new",$$slots:{default:[jl]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment)},l(s){S(e.$$.fragment,s),t=x(s),S(r.$$.fragment,s)},m(s,o){A(e,s,o),v(s,t,o),A(r,s,o),i=!0},p(s,o){const a={};o&256&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&256&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(y(e.$$.fragment,s),y(r.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(r.$$.fragment,s),i=!1},d(s){s&&_(t),C(e,s),C(r,s)}}}function Dl(n){let e,t,r,i;return e=new vt({props:{$$slots:{default:[Pl]},$$scope:{ctx:n}}}),r=new pt({props:{$$slots:{default:[Rl]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment)},l(s){S(e.$$.fragment,s),t=x(s),S(r.$$.fragment,s)},m(s,o){A(e,s,o),v(s,t,o),A(r,s,o),i=!0},p(s,o){const a={};o&256&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&256&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(y(e.$$.fragment,s),y(r.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(r.$$.fragment,s),i=!1},d(s){s&&_(t),C(e,s),C(r,s)}}}function Ll(n){let e,t,r;return t=new wt({}),{c(){e=Y(`discover
          `),O(t.$$.fragment)},l(i){e=Z(i,`discover
          `),S(t.$$.fragment,i)},m(i,s){v(i,e,s),A(t,i,s),r=!0},i(i){r||(y(t.$$.fragment,i),r=!0)},o(i){w(t.$$.fragment,i),r=!1},d(i){i&&_(e),C(t,i)}}}function Ul(n){let e;return{c(){e=Y("collections")},l(t){e=Z(t,"collections")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function Ml(n){let e;return{c(){e=Y("users")},l(t){e=Z(t,"users")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function Nl(n){let e,t,r,i;return e=new ue({props:{href:"/collections",$$slots:{default:[Ul]},$$scope:{ctx:n}}}),r=new ue({props:{href:"/users",$$slots:{default:[Ml]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment)},l(s){S(e.$$.fragment,s),t=x(s),S(r.$$.fragment,s)},m(s,o){A(e,s,o),v(s,t,o),A(r,s,o),i=!0},p(s,o){const a={};o&256&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&256&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(y(e.$$.fragment,s),y(r.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(r.$$.fragment,s),i=!1},d(s){s&&_(t),C(e,s),C(r,s)}}}function Fl(n){let e,t,r,i;return e=new vt({props:{$$slots:{default:[Ll]},$$scope:{ctx:n}}}),r=new pt({props:{$$slots:{default:[Nl]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment)},l(s){S(e.$$.fragment,s),t=x(s),S(r.$$.fragment,s)},m(s,o){A(e,s,o),v(s,t,o),A(r,s,o),i=!0},p(s,o){const a={};o&256&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&256&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(y(e.$$.fragment,s),y(r.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(r.$$.fragment,s),i=!1},d(s){s&&_(t),C(e,s),C(r,s)}}}function Bl(n){let e,t,r,i,s,o,a,l;return a=new wt({}),{c(){e=ae("img"),i=B(),s=Y(n[2]),o=B(),O(a.$$.fragment),this.h()},l(u){e=le(u,"IMG",{src:!0,alt:!0,class:!0}),i=x(u),s=Z(u,n[2]),o=x(u),S(a.$$.fragment,u),this.h()},h(){ur(e.src,t=n[3])||ie(e,"src",t),ie(e,"alt",r=n[2]+"'s avatar"),ie(e,"class","svelte-cmbd08")},m(u,c){v(u,e,c),v(u,i,c),v(u,s,c),v(u,o,c),A(a,u,c),l=!0},p(u,c){(!l||c&8&&!ur(e.src,t=u[3]))&&ie(e,"src",t),(!l||c&4&&r!==(r=u[2]+"'s avatar"))&&ie(e,"alt",r),(!l||c&4)&&Zs(s,u[2])},i(u){l||(y(a.$$.fragment,u),l=!0)},o(u){w(a.$$.fragment,u),l=!1},d(u){u&&(_(e),_(i),_(s),_(o)),C(a,u)}}}function xl(n){let e;return{c(){e=Y("profile")},l(t){e=Z(t,"profile")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function Kl(n){let e;return{c(){e=Y("account")},l(t){e=Z(t,"account")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function Hl(n){let e;return{c(){e=Y("sign out")},l(t){e=Z(t,"sign out")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function zl(n){let e,t,r,i,s,o;return e=new ue({props:{href:`/user/${n[1]}`,$$slots:{default:[xl]},$$scope:{ctx:n}}}),r=new ue({props:{href:"/account",$$slots:{default:[Kl]},$$scope:{ctx:n}}}),s=new ue({props:{href:"/sign-out",$$slots:{default:[Hl]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment),i=B(),O(s.$$.fragment)},l(a){S(e.$$.fragment,a),t=x(a),S(r.$$.fragment,a),i=x(a),S(s.$$.fragment,a)},m(a,l){A(e,a,l),v(a,t,l),A(r,a,l),v(a,i,l),A(s,a,l),o=!0},p(a,l){const u={};l&2&&(u.href=`/user/${a[1]}`),l&256&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const c={};l&256&&(c.$$scope={dirty:l,ctx:a}),r.$set(c);const d={};l&256&&(d.$$scope={dirty:l,ctx:a}),s.$set(d)},i(a){o||(y(e.$$.fragment,a),y(r.$$.fragment,a),y(s.$$.fragment,a),o=!0)},o(a){w(e.$$.fragment,a),w(r.$$.fragment,a),w(s.$$.fragment,a),o=!1},d(a){a&&(_(t),_(i)),C(e,a),C(r,a),C(s,a)}}}function ql(n){let e,t,r,i;return e=new vt({props:{$$slots:{default:[Bl]},$$scope:{ctx:n}}}),r=new pt({props:{$$slots:{default:[zl]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment)},l(s){S(e.$$.fragment,s),t=x(s),S(r.$$.fragment,s)},m(s,o){A(e,s,o),v(s,t,o),A(r,s,o),i=!0},p(s,o){const a={};o&268&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&258&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(y(e.$$.fragment,s),y(r.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(r.$$.fragment,s),i=!1},d(s){s&&_(t),C(e,s),C(r,s)}}}function Vl(n){let e,t,r,i="<button>log in/sign up</button>",s;return e=new ut({props:{$$slots:{default:[Zl]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),r=ae("a"),r.innerHTML=i,this.h()},l(o){S(e.$$.fragment,o),t=x(o),r=le(o,"A",{href:!0,"data-svelte-h":!0}),ct(r)!=="svelte-rpe6qm"&&(r.innerHTML=i),this.h()},h(){ie(r,"href","/welcome")},m(o,a){A(e,o,a),v(o,t,a),v(o,r,a),s=!0},p(o,a){const l={};a&256&&(l.$$scope={dirty:a,ctx:o}),e.$set(l)},i(o){s||(y(e.$$.fragment,o),s=!0)},o(o){w(e.$$.fragment,o),s=!1},d(o){o&&(_(t),_(r)),C(e,o)}}}function Jl(n){let e,t,r,i;return e=new ut({props:{$$slots:{default:[lu]},$$scope:{ctx:n}}}),r=new ut({props:{$$slots:{default:[mu]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment)},l(s){S(e.$$.fragment,s),t=x(s),S(r.$$.fragment,s)},m(s,o){A(e,s,o),v(s,t,o),A(r,s,o),i=!0},p(s,o){const a={};o&256&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&270&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(y(e.$$.fragment,s),y(r.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(r.$$.fragment,s),i=!1},d(s){s&&_(t),C(e,s),C(r,s)}}}function Gl(n){let e,t,r;return t=new wt({}),{c(){e=Y(`Explore
            `),O(t.$$.fragment)},l(i){e=Z(i,`Explore
            `),S(t.$$.fragment,i)},m(i,s){v(i,e,s),A(t,i,s),r=!0},i(i){r||(y(t.$$.fragment,i),r=!0)},o(i){w(t.$$.fragment,i),r=!1},d(i){i&&_(e),C(t,i)}}}function Wl(n){let e;return{c(){e=Y("About")},l(t){e=Z(t,"About")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function Xl(n){let e;return{c(){e=Y("Collections")},l(t){e=Z(t,"Collections")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function Ql(n){let e;return{c(){e=Y("Posts")},l(t){e=Z(t,"Posts")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function Yl(n){let e,t,r,i,s,o;return e=new ue({props:{href:"/about",$$slots:{default:[Wl]},$$scope:{ctx:n}}}),r=new ue({props:{href:"/collections",$$slots:{default:[Xl]},$$scope:{ctx:n}}}),s=new ue({props:{href:"/posts",$$slots:{default:[Ql]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment),i=B(),O(s.$$.fragment)},l(a){S(e.$$.fragment,a),t=x(a),S(r.$$.fragment,a),i=x(a),S(s.$$.fragment,a)},m(a,l){A(e,a,l),v(a,t,l),A(r,a,l),v(a,i,l),A(s,a,l),o=!0},p(a,l){const u={};l&256&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const c={};l&256&&(c.$$scope={dirty:l,ctx:a}),r.$set(c);const d={};l&256&&(d.$$scope={dirty:l,ctx:a}),s.$set(d)},i(a){o||(y(e.$$.fragment,a),y(r.$$.fragment,a),y(s.$$.fragment,a),o=!0)},o(a){w(e.$$.fragment,a),w(r.$$.fragment,a),w(s.$$.fragment,a),o=!1},d(a){a&&(_(t),_(i)),C(e,a),C(r,a),C(s,a)}}}function Zl(n){let e,t,r,i;return e=new vt({props:{$$slots:{default:[Gl]},$$scope:{ctx:n}}}),r=new pt({props:{$$slots:{default:[Yl]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment)},l(s){S(e.$$.fragment,s),t=x(s),S(r.$$.fragment,s)},m(s,o){A(e,s,o),v(s,t,o),A(r,s,o),i=!0},p(s,o){const a={};o&256&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&256&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(y(e.$$.fragment,s),y(r.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(r.$$.fragment,s),i=!1},d(s){s&&_(t),C(e,s),C(r,s)}}}function eu(n){let e,t,r;return t=new wt({}),{c(){e=Y(`explore
          `),O(t.$$.fragment)},l(i){e=Z(i,`explore
          `),S(t.$$.fragment,i)},m(i,s){v(i,e,s),A(t,i,s),r=!0},i(i){r||(y(t.$$.fragment,i),r=!0)},o(i){w(t.$$.fragment,i),r=!1},d(i){i&&_(e),C(t,i)}}}function tu(n){let e;return{c(){e=Y("feed")},l(t){e=Z(t,"feed")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function ru(n){let e;return{c(){e=Y("new post")},l(t){e=Z(t,"new post")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function su(n){let e;return{c(){e=Y("new collection")},l(t){e=Z(t,"new collection")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function nu(n){let e;return{c(){e=Y("about")},l(t){e=Z(t,"about")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function iu(n){let e;return{c(){e=Y("discover collections")},l(t){e=Z(t,"discover collections")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function ou(n){let e;return{c(){e=Y("discover users")},l(t){e=Z(t,"discover users")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function au(n){let e,t,r,i,s,o,a,l,u,c,d,f;return e=new ue({props:{href:"/feed",$$slots:{default:[tu]},$$scope:{ctx:n}}}),r=new ue({props:{href:"/posts/now-playing/new",$$slots:{default:[ru]},$$scope:{ctx:n}}}),s=new ue({props:{href:"/collection/new",$$slots:{default:[su]},$$scope:{ctx:n}}}),a=new ue({props:{href:"/about",$$slots:{default:[nu]},$$scope:{ctx:n}}}),u=new ue({props:{href:"/collections",$$slots:{default:[iu]},$$scope:{ctx:n}}}),d=new ue({props:{href:"/users",$$slots:{default:[ou]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment),i=B(),O(s.$$.fragment),o=B(),O(a.$$.fragment),l=B(),O(u.$$.fragment),c=B(),O(d.$$.fragment)},l(h){S(e.$$.fragment,h),t=x(h),S(r.$$.fragment,h),i=x(h),S(s.$$.fragment,h),o=x(h),S(a.$$.fragment,h),l=x(h),S(u.$$.fragment,h),c=x(h),S(d.$$.fragment,h)},m(h,g){A(e,h,g),v(h,t,g),A(r,h,g),v(h,i,g),A(s,h,g),v(h,o,g),A(a,h,g),v(h,l,g),A(u,h,g),v(h,c,g),A(d,h,g),f=!0},p(h,g){const E={};g&256&&(E.$$scope={dirty:g,ctx:h}),e.$set(E);const p={};g&256&&(p.$$scope={dirty:g,ctx:h}),r.$set(p);const P={};g&256&&(P.$$scope={dirty:g,ctx:h}),s.$set(P);const R={};g&256&&(R.$$scope={dirty:g,ctx:h}),a.$set(R);const D={};g&256&&(D.$$scope={dirty:g,ctx:h}),u.$set(D);const M={};g&256&&(M.$$scope={dirty:g,ctx:h}),d.$set(M)},i(h){f||(y(e.$$.fragment,h),y(r.$$.fragment,h),y(s.$$.fragment,h),y(a.$$.fragment,h),y(u.$$.fragment,h),y(d.$$.fragment,h),f=!0)},o(h){w(e.$$.fragment,h),w(r.$$.fragment,h),w(s.$$.fragment,h),w(a.$$.fragment,h),w(u.$$.fragment,h),w(d.$$.fragment,h),f=!1},d(h){h&&(_(t),_(i),_(o),_(l),_(c)),C(e,h),C(r,h),C(s,h),C(a,h),C(u,h),C(d,h)}}}function lu(n){let e,t,r,i;return e=new vt({props:{$$slots:{default:[eu]},$$scope:{ctx:n}}}),r=new pt({props:{$$slots:{default:[au]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment)},l(s){S(e.$$.fragment,s),t=x(s),S(r.$$.fragment,s)},m(s,o){A(e,s,o),v(s,t,o),A(r,s,o),i=!0},p(s,o){const a={};o&256&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&256&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(y(e.$$.fragment,s),y(r.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(r.$$.fragment,s),i=!1},d(s){s&&_(t),C(e,s),C(r,s)}}}function uu(n){let e,t,r,i,s,o,a,l;return a=new wt({}),{c(){e=ae("img"),i=B(),s=Y(n[2]),o=B(),O(a.$$.fragment),this.h()},l(u){e=le(u,"IMG",{src:!0,alt:!0,class:!0}),i=x(u),s=Z(u,n[2]),o=x(u),S(a.$$.fragment,u),this.h()},h(){ur(e.src,t=n[3])||ie(e,"src",t),ie(e,"alt",r=n[2]+"'s avatar"),ie(e,"class","svelte-cmbd08")},m(u,c){v(u,e,c),v(u,i,c),v(u,s,c),v(u,o,c),A(a,u,c),l=!0},p(u,c){(!l||c&8&&!ur(e.src,t=u[3]))&&ie(e,"src",t),(!l||c&4&&r!==(r=u[2]+"'s avatar"))&&ie(e,"alt",r),(!l||c&4)&&Zs(s,u[2])},i(u){l||(y(a.$$.fragment,u),l=!0)},o(u){w(a.$$.fragment,u),l=!1},d(u){u&&(_(e),_(i),_(s),_(o)),C(a,u)}}}function cu(n){let e;return{c(){e=Y("profile")},l(t){e=Z(t,"profile")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function du(n){let e;return{c(){e=Y("account")},l(t){e=Z(t,"account")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function hu(n){let e;return{c(){e=Y("sign out")},l(t){e=Z(t,"sign out")},m(t,r){v(t,e,r)},d(t){t&&_(e)}}}function fu(n){let e,t,r,i,s,o;return e=new ue({props:{href:`/user/${n[1]}`,$$slots:{default:[cu]},$$scope:{ctx:n}}}),r=new ue({props:{href:"/account",$$slots:{default:[du]},$$scope:{ctx:n}}}),s=new ue({props:{href:"/sign-out",$$slots:{default:[hu]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment),i=B(),O(s.$$.fragment)},l(a){S(e.$$.fragment,a),t=x(a),S(r.$$.fragment,a),i=x(a),S(s.$$.fragment,a)},m(a,l){A(e,a,l),v(a,t,l),A(r,a,l),v(a,i,l),A(s,a,l),o=!0},p(a,l){const u={};l&2&&(u.href=`/user/${a[1]}`),l&256&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const c={};l&256&&(c.$$scope={dirty:l,ctx:a}),r.$set(c);const d={};l&256&&(d.$$scope={dirty:l,ctx:a}),s.$set(d)},i(a){o||(y(e.$$.fragment,a),y(r.$$.fragment,a),y(s.$$.fragment,a),o=!0)},o(a){w(e.$$.fragment,a),w(r.$$.fragment,a),w(s.$$.fragment,a),o=!1},d(a){a&&(_(t),_(i)),C(e,a),C(r,a),C(s,a)}}}function mu(n){let e,t,r,i;return e=new vt({props:{$$slots:{default:[uu]},$$scope:{ctx:n}}}),r=new pt({props:{$$slots:{default:[fu]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=B(),O(r.$$.fragment)},l(s){S(e.$$.fragment,s),t=x(s),S(r.$$.fragment,s)},m(s,o){A(e,s,o),v(s,t,o),A(r,s,o),i=!0},p(s,o){const a={};o&268&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&258&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){i||(y(e.$$.fragment,s),y(r.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),w(r.$$.fragment,s),i=!1},d(s){s&&_(t),C(e,s),C(r,s)}}}function gu(n){let e,t,r,i,s=`<img alt="Freq" src="${$l}" class="svelte-cmbd08"/>`,o,a,l,u,c,d,f,h,g,E,p="report a bug",P,R,D;const M=[Tl,kl],W=[];function pe(X,fe){return X[0]?0:1}l=pe(n),u=W[l]=M[l](n);const I=[Jl,Vl],he=[];function He(X,fe){return X[0]?0:1}return f=He(n),h=he[f]=I[f](n),{c(){e=B(),t=ae("div"),r=ae("header"),i=ae("a"),i.innerHTML=s,o=B(),a=ae("nav"),u.c(),c=B(),d=ae("nav"),h.c(),g=B(),E=ae("button"),E.textContent=p,this.h()},l(X){Vn("svelte-1cjoayr",document.head).forEach(_),e=x(X),t=le(X,"DIV",{class:!0});var ce=Ae(t);r=le(ce,"HEADER",{class:!0});var ee=Ae(r);i=le(ee,"A",{class:!0,href:!0,"data-svelte-h":!0}),ct(i)!=="svelte-nlfifv"&&(i.innerHTML=s),o=x(ee),a=le(ee,"NAV",{class:!0});var Ze=Ae(a);u.l(Ze),Ze.forEach(_),c=x(ee),d=le(ee,"NAV",{class:!0});var et=Ae(d);h.l(et),et.forEach(_),ee.forEach(_),g=x(ce),E=le(ce,"BUTTON",{class:!0,"data-svelte-h":!0}),ct(E)!=="svelte-f1hkgr"&&(E.textContent=p),ce.forEach(_),this.h()},h(){document.title="Freq",ie(i,"class","logo"),ie(i,"href","/"),ie(a,"class","wide svelte-cmbd08"),ie(d,"class","narrow svelte-cmbd08"),ie(r,"class","svelte-cmbd08"),ie(E,"class","standard svelte-cmbd08"),ie(t,"class","grid-background svelte-cmbd08")},m(X,fe){v(X,e,fe),v(X,t,fe),qe(t,r),qe(r,i),qe(r,o),qe(r,a),W[l].m(a,null),qe(r,c),qe(r,d),he[f].m(d,null),qe(t,g),qe(t,E),P=!0,R||(D=ye(E,"click",n[5]),R=!0)},p(X,[fe]){let ce=l;l=pe(X),l===ce?W[l].p(X,fe):(Vt(),w(W[ce],1,1,()=>{W[ce]=null}),Jt(),u=W[l],u?u.p(X,fe):(u=W[l]=M[l](X),u.c()),y(u,1),u.m(a,null));let ee=f;f=He(X),f===ee?he[f].p(X,fe):(Vt(),w(he[ee],1,1,()=>{he[ee]=null}),Jt(),h=he[f],h?h.p(X,fe):(h=he[f]=I[f](X),h.c()),y(h,1),h.m(d,null))},i(X){P||(y(u),y(h),P=!0)},o(X){w(u),w(h),P=!1},d(X){X&&(_(e),_(t)),W[l].d(),he[f].d(),R=!1,D()}}}function _u(n,e,t){let r;It(n,In,c=>t(6,r=c));let i;i=r;let{sessionUserId:s}=e,{username:o=i==null?void 0:i.username}=e,{displayName:a=i==null?void 0:i.display_name}=e,{avatarUrl:l=i==null?void 0:i.avatar_url}=e;const u=()=>Ys("https://docs.google.com/forms/d/e/1FAIpQLSfKj4FlApgfM-Kc4rYwAxNQslBMS9rk-DdfowMa5qcHlRYhew/viewform?usp=sf_link");return n.$$set=c=>{"sessionUserId"in c&&t(0,s=c.sessionUserId),"username"in c&&t(1,o=c.username),"displayName"in c&&t(2,a=c.displayName),"avatarUrl"in c&&t(3,l=c.avatarUrl)},n.$$.update=()=>{n.$$.dirty&16},[s,o,a,l,i,u]}class pu extends ft{constructor(e){super(),mt(this,e,_u,gu,Qe,{sessionUserId:0,username:1,displayName:2,avatarUrl:3})}}function vu(n){let e,t,r,i,s,o;e=new pu({props:{username:n[2],displayName:n[0],avatarUrl:n[1],sessionUserId:n[3]}});const a=n[6].default,l=Ce(a,n,n[5],null);return{c(){O(e.$$.fragment),t=B(),r=ae("div"),i=B(),s=ae("body"),l&&l.c(),this.h()},l(u){S(e.$$.fragment,u),t=x(u),r=le(u,"DIV",{class:!0}),Ae(r).forEach(_),i=x(u),s=le(u,"BODY",{});var c=Ae(s);l&&l.l(c),c.forEach(_),this.h()},h(){ie(r,"class","double-border-full-vw")},m(u,c){A(e,u,c),v(u,t,c),v(u,r,c),v(u,i,c),v(u,s,c),l&&l.m(s,null),o=!0},p(u,[c]){const d={};c&4&&(d.username=u[2]),c&1&&(d.displayName=u[0]),c&2&&(d.avatarUrl=u[1]),e.$set(d),l&&l.p&&(!o||c&32)&&Pe(l,a,u,u[5],o?je(a,u[5],c,null):Ie(u[5]),null)},i(u){o||(y(e.$$.fragment,u),y(l,u),o=!0)},o(u){w(e.$$.fragment,u),w(l,u),o=!1},d(u){u&&(_(t),_(r),_(i),_(s)),C(e,u),l&&l.d(u)}}}function wu(n,e,t){let{$$slots:r={},$$scope:i}=e,{data:s}=e,{session:o,user:a,profile:l,supabase:u}=s;const c=a==null?void 0:a.id;let d,f,h;return typeof window<"u"&&(h=l==null?void 0:l.username,d=l==null?void 0:l.display_name,f=l==null?void 0:l.avatar_url),Jn(()=>{const{data:g}=u.auth.onAuthStateChange((E,p)=>{p||setTimeout(()=>{Ys("/",{invalidateAll:!0})}),(p==null?void 0:p.expires_at)!==(o==null?void 0:o.expires_at)&&xn("supabase:auth")});return()=>g.subscription.unsubscribe()}),n.$$set=g=>{"data"in g&&t(4,s=g.data),"$$scope"in g&&t(5,i=g.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&({session:o,user:a,profile:l,supabase:u}=s),n.$$.dirty&7},[d,f,h,c,s,i,r]}class xu extends ft{constructor(e){super(),mt(this,e,wu,vu,Qe,{data:4})}}export{xu as component,Bu as universal};
