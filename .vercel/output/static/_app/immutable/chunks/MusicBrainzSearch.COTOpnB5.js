import{s as ie,l as J,e as C,a as z,c as S,b as N,f as _,g as L,w as Q,r as b,i as v,h as A,x as U,u as W,m as Z,o as x,v as X,y as me,z as be,A as ne,t as M,d as E,E as $,B as ge,j as q,q as pe,S as oe}from"./scheduler.CXRP0wEC.js";import{S as ce,i as ue,t as F,a as K,e as ve,c as we,b as ke,m as ye,d as Me}from"./index.a6HmqSPn.js";import{e as ee}from"./each.Chb-s0GO.js";import"./entry.a6gQbV6m.js";import{c as Ee}from"./parseData.CC0748Oa.js";const Ce=i=>({}),te=i=>({}),Se=i=>({}),le=i=>({});function Ae(i){let e,t,r,c,n,l="x",u,d,h,f;const a=i[4]["header-text"],s=J(a,i,i[3],le),m=i[4].list,w=J(m,i,i[3],te);return{c(){e=C("dialog"),t=C("div"),r=C("h1"),s&&s.c(),c=z(),n=C("button"),n.textContent=l,u=z(),w&&w.c(),this.h()},l(g){e=S(g,"DIALOG",{"aria-label":!0,class:!0});var I=N(e);t=S(I,"DIV",{class:!0});var p=N(t);r=S(p,"H1",{class:!0});var k=N(r);s&&s.l(k),k.forEach(_),c=L(p),n=S(p,"BUTTON",{"aria-label":!0,formmethod:!0,class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-17gr06n"&&(n.textContent=l),p.forEach(_),u=L(I),w&&w.l(I),I.forEach(_),this.h()},h(){b(r,"class","svelte-1rol5e1"),b(n,"aria-label","close modal"),b(n,"formmethod","dialog"),b(n,"class","svelte-1rol5e1"),b(t,"class","dialog-header svelte-1rol5e1"),b(e,"aria-label","modal"),b(e,"class","svelte-1rol5e1")},m(g,I){v(g,e,I),A(e,t),A(t,r),s&&s.m(r,null),A(t,c),A(t,n),A(e,u),w&&w.m(e,null),i[7](e),d=!0,h||(f=[U(window,"keydown",i[5]),U(n,"click",i[6]),U(e,"close",i[8])],h=!0)},p(g,[I]){s&&s.p&&(!d||I&8)&&W(s,a,g,g[3],d?x(a,g[3],I,Se):Z(g[3]),le),w&&w.p&&(!d||I&8)&&W(w,m,g,g[3],d?x(m,g[3],I,Ce):Z(g[3]),te)},i(g){d||(F(s,g),F(w,g),d=!0)},o(g){K(s,g),K(w,g),d=!1},d(g){g&&_(e),s&&s.d(g),w&&w.d(g),i[7](null),h=!1,X(f)}}}function Ie(i,e,t){let{$$slots:r={},$$scope:c}=e,{showModal:n}=e,l;me(()=>{l.addEventListener("click",s=>{const m=l.getBoundingClientRect();(s.clientX<m.left||s.clientX>m.right||s.clientY<m.top||s.clientY>m.bottom)&&l.close()})});const u=be(),d=s=>{s.key==="Escape"&&u(l.close())},h=()=>l.close();function f(s){ne[s?"unshift":"push"](()=>{l=s,t(1,l)})}const a=()=>t(0,n=!1);return i.$$set=s=>{"showModal"in s&&t(0,n=s.showModal),"$$scope"in s&&t(3,c=s.$$scope)},i.$$.update=()=>{i.$$.dirty&3&&l&&n&&l.showModal(),i.$$.dirty&3&&l&&!n&&l.close()},[n,l,u,c,r,d,h,f,a]}class Ne extends ce{constructor(e){super(),ue(this,e,Ie,Ae,ie,{showModal:0})}}function se(i,e,t){const r=i.slice();return r[22]=e[t],r}function Pe(i){let e,t,r,c;return{c(){e=C("h1"),t=M("Results for "),r=C("span"),c=M(i[0]),this.h()},l(n){e=S(n,"H1",{slot:!0,class:!0});var l=N(e);t=E(l,"Results for "),r=S(l,"SPAN",{class:!0});var u=N(r);c=E(u,i[0]),u.forEach(_),l.forEach(_),this.h()},h(){b(r,"class","dialog-header svelte-860t2d"),b(e,"slot","header-text"),b(e,"class","svelte-860t2d")},m(n,l){v(n,e,l),A(e,t),A(e,r),A(r,c)},p(n,l){l&1&&q(c,n[0])},d(n){n&&_(e)}}}function ae(i){let e,t=ee(i[6]),r=[];for(let c=0;c<t.length;c+=1)r[c]=re(se(i,t,c));return{c(){e=C("ol");for(let c=0;c<r.length;c+=1)r[c].c();this.h()},l(c){e=S(c,"OL",{class:!0});var n=N(e);for(let l=0;l<r.length;l+=1)r[l].l(n);n.forEach(_),this.h()},h(){b(e,"class","svelte-860t2d")},m(c,n){v(c,e,n);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null)},p(c,n){if(n&1650){t=ee(c[6]);let l;for(l=0;l<t.length;l+=1){const u=se(c,t,l);r[l]?r[l].p(u,n):(r[l]=re(u),r[l].c(),r[l].m(e,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=t.length}},d(c){c&&_(e),pe(r,c)}}}function De(i){let e,t="+ add",r,c;function n(){return i[18](i[22])}return{c(){e=C("button"),e.textContent=t,this.h()},l(l){e=S(l,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),Q(e)!=="svelte-94j817"&&(e.textContent=t),this.h()},h(){b(e,"class","standard svelte-860t2d"),b(e,"aria-label","add item")},m(l,u){v(l,e,u),r||(c=[U(e,"click",oe(n)),U(e,"click",i[19])],r=!0)},p(l,u){i=l},d(l){l&&_(e),r=!1,X(c)}}}function Te(i){let e,t="+ add",r,c;function n(){return i[16](i[22])}return{c(){e=C("button"),e.textContent=t,this.h()},l(l){e=S(l,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),Q(e)!=="svelte-vs1vgz"&&(e.textContent=t),this.h()},h(){b(e,"class","standard svelte-860t2d"),b(e,"aria-label","add item")},m(l,u){v(l,e,u),r||(c=[U(e,"click",oe(n)),U(e,"click",i[17])],r=!0)},p(l,u){i=l},d(l){l&&_(e),r=!1,X(c)}}}function Oe(i){let e,t=i[22].title+"",r,c,n=i[22]["artist-credit"][0].artist.name+"",l,u,d=(i[22].disambiguation??i[22].releases[0]["release-group"].title)+"",h,f;return{c(){e=C("span"),r=M(t),c=M(` by 
							`),l=M(n),u=M(` 
							(`),h=M(d),f=M(")"),this.h()},l(a){e=S(a,"SPAN",{class:!0});var s=N(e);r=E(s,t),s.forEach(_),c=E(a,` by 
							`),l=E(a,n),u=E(a,` 
							(`),h=E(a,d),f=E(a,")"),this.h()},h(){b(e,"class","svelte-860t2d")},m(a,s){v(a,e,s),A(e,r),v(a,c,s),v(a,l,s),v(a,u,s),v(a,h,s),v(a,f,s)},p(a,s){s&64&&t!==(t=a[22].title+"")&&q(r,t),s&64&&n!==(n=a[22]["artist-credit"][0].artist.name+"")&&q(l,n),s&64&&d!==(d=(a[22].disambiguation??a[22].releases[0]["release-group"].title)+"")&&q(h,d)},d(a){a&&(_(e),_(c),_(l),_(u),_(h),_(f))}}}function qe(i){let e,t=i[22].title+"",r,c,n=i[22]["artist-credit"][0].artist.name+"",l,u,d=i[22]["first-release-date"]+"",h,f;return{c(){e=C("span"),r=M(t),c=M(`  by 
							`),l=M(n),u=M(` 
							(`),h=M(d),f=M(")"),this.h()},l(a){e=S(a,"SPAN",{class:!0});var s=N(e);r=E(s,t),s.forEach(_),c=E(a,`  by 
							`),l=E(a,n),u=E(a,` 
							(`),h=E(a,d),f=E(a,")"),this.h()},h(){b(e,"class","svelte-860t2d")},m(a,s){v(a,e,s),A(e,r),v(a,c,s),v(a,l,s),v(a,u,s),v(a,h,s),v(a,f,s)},p(a,s){s&64&&t!==(t=a[22].title+"")&&q(r,t),s&64&&n!==(n=a[22]["artist-credit"][0].artist.name+"")&&q(l,n),s&64&&d!==(d=a[22]["first-release-date"]+"")&&q(h,d)},d(a){a&&(_(e),_(c),_(l),_(u),_(h),_(f))}}}function je(i){let e,t=i[22].name+"",r,c,n=i[22].area.name+"",l,u,d=i[22]["life-span"].begin+"",h,f;return{c(){e=C("span"),r=M(t),c=M(`
							(`),l=M(n),u=M(`, 
							`),h=M(d),f=M(")"),this.h()},l(a){e=S(a,"SPAN",{class:!0});var s=N(e);r=E(s,t),s.forEach(_),c=E(a,`
							(`),l=E(a,n),u=E(a,`, 
							`),h=E(a,d),f=E(a,")"),this.h()},h(){b(e,"class","svelte-860t2d")},m(a,s){v(a,e,s),A(e,r),v(a,c,s),v(a,l,s),v(a,u,s),v(a,h,s),v(a,f,s)},p(a,s){s&64&&t!==(t=a[22].name+"")&&q(r,t),s&64&&n!==(n=a[22].area.name+"")&&q(l,n),s&64&&d!==(d=a[22]["life-span"].begin+"")&&q(h,d)},d(a){a&&(_(e),_(c),_(l),_(u),_(h),_(f))}}}function re(i){let e,t,r,c,n;function l(s,m){if(s[4]==="collection")return Te;if(s[4]==="single")return De}let u=l(i),d=u&&u(i);function h(s,m){if(s[1]=="artists")return je;if(s[1]=="release_groups")return qe;if(s[1]=="recordings")return Oe}let f=h(i),a=f&&f(i);return{c(){e=C("li"),d&&d.c(),t=z(),r=C("p"),a&&a.c(),c=z(),n=C("hr"),this.h()},l(s){e=S(s,"LI",{class:!0});var m=N(e);d&&d.l(m),t=L(m),r=S(m,"P",{class:!0});var w=N(r);a&&a.l(w),w.forEach(_),m.forEach(_),c=L(s),n=S(s,"HR",{class:!0}),this.h()},h(){b(r,"class","svelte-860t2d"),b(e,"class","svelte-860t2d"),b(n,"class","svelte-860t2d")},m(s,m){v(s,e,m),d&&d.m(e,null),A(e,t),A(e,r),a&&a.m(r,null),v(s,c,m),v(s,n,m)},p(s,m){u===(u=l(s))&&d?d.p(s,m):(d&&d.d(1),d=u&&u(s),d&&(d.c(),d.m(e,t))),f===(f=h(s))&&a?a.p(s,m):(a&&a.d(1),a=f&&f(s),a&&(a.c(),a.m(r,null)))},d(s){s&&(_(e),_(c),_(n)),d&&d.d(),a&&a.d()}}}function Be(i){let e,t=i[7]&&ae(i);return{c(){e=C("div"),t&&t.c(),this.h()},l(r){e=S(r,"DIV",{slot:!0,class:!0});var c=N(e);t&&t.l(c),c.forEach(_),this.h()},h(){b(e,"slot","list"),b(e,"class","svelte-860t2d")},m(r,c){v(r,e,c),t&&t.m(e,null)},p(r,c){r[7]?t?t.p(r,c):(t=ae(r),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},d(r){r&&_(e),t&&t.d()}}}function Ue(i){let e,t,r,c,n,l,u,d,h,f,a,s,m,w;function g(p){i[20](p)}let I={$$slots:{list:[Be],"header-text":[Pe]},$$scope:{ctx:i}};return i[5]!==void 0&&(I.showModal=i[5]),t=new Ne({props:I}),ne.push(()=>ve(t,"showModal",g)),{c(){e=C("div"),we(t.$$.fragment),c=z(),n=C("form"),l=C("button"),u=C("div"),d=M(i[2]),f=z(),a=C("input"),this.h()},l(p){e=S(p,"DIV",{class:!0});var k=N(e);ke(t.$$.fragment,k),c=L(k),n=S(k,"FORM",{class:!0});var j=N(n);l=S(j,"BUTTON",{class:!0});var R=N(l);u=S(R,"DIV",{class:!0});var G=N(u);d=E(G,i[2]),G.forEach(_),R.forEach(_),f=L(j),a=S(j,"INPUT",{class:!0,type:!0,id:!0,name:!0,placeholder:!0,"aria-label":!0,size:!0}),j.forEach(_),k.forEach(_),this.h()},h(){b(u,"class","inner-border svelte-860t2d"),b(l,"class","double-border-top svelte-860t2d"),l.disabled=h=!i[1],b(a,"class","search svelte-860t2d"),b(a,"type","search"),b(a,"id","searchQuery"),b(a,"name","query"),b(a,"placeholder",i[3]),b(a,"aria-label",i[3]),b(a,"size","40"),b(n,"class","search svelte-860t2d"),b(e,"class","search-bar svelte-860t2d")},m(p,k){v(p,e,k),ye(t,e,null),A(e,c),A(e,n),A(n,l),A(l,u),A(u,d),A(n,f),A(n,a),$(a,i[0]),s=!0,m||(w=[U(l,"click",i[8]),U(a,"input",i[21])],m=!0)},p(p,[k]){const j={};k&33554675&&(j.$$scope={dirty:k,ctx:p}),!r&&k&32&&(r=!0,j.showModal=p[5],ge(()=>r=!1)),t.$set(j),(!s||k&4)&&q(d,p[2]),(!s||k&2&&h!==(h=!p[1]))&&(l.disabled=h),(!s||k&8)&&b(a,"placeholder",p[3]),(!s||k&8)&&b(a,"aria-label",p[3]),k&1&&a.value!==p[0]&&$(a,p[0])},i(p){s||(F(t.$$.fragment,p),s=!0)},o(p){K(t.$$.fragment,p),s=!1},d(p){p&&_(e),Me(t),m=!1,X(w)}}}async function V(i){const e=i.mbid,t=i.releaseDate;let r=null,c=null;const n=`https://musicbrainz.org/ws/2/release?release-group=${e}&inc=labels&fmt=json`;let u=await(await fetch(n)).json();u=u.releases;for(const d of u)if(t==d.date)return d["label-info"].length>0&&(r=d["label-info"][0].label.name,c=d["label-info"][0].label.id),{labelName:r,labelMbid:c}}async function H(i){const e=`http://coverartarchive.org/release-group/${i}/front`;return await(await fetch(e)).url}function ze(i,e,t){let{searchCategory:r}=e,{searchButtonText:c}=e,{searchPlaceholder:n}=e,{addedItems:l}=e,{newItemAdded:u}=e,{mode:d}=e,{limit:h="25"}=e,{query:f=""}=e,{requestSubmit:a=!1}=e,{avatarSearch:s=!1}=e,m=!1,w,g;async function I(){const o=Ee[`${r}`];let D="https://musicbrainz.org/ws/2/";D=D.concat(o);const P=new URL(D);P.searchParams.set("fmt","json"),P.searchParams.set("query",`${f}`),P.searchParams.set("limit",h),r=="recordings"&&P.searchParams.set("inc","releases+release-groups+artist-rels");const y=await(await fetch(P)).json(),B=o.concat("s");return t(6,w=y[B]),t(7,g=!0),t(5,m=!0),{mbData:w,searchComplete:g}}async function p(o){if(h&&l.length===h)return alert(`Only ${h} items are allowed in this collection. Please delete an item before you add something new.`),l;let D=null,P=null;if(r=="artists")t(11,l=[...l,{item_position:l.length,artist_mbid:o.id,artist_name:o.name,release_group_mbid:null,release_group_name:null,release_date:null,recording_mbid:null,recording_name:null,remixer_mbid:null,img_url:null,label_name:null,label_mbid:null,notes:null,id:l.length+1}]);else if(r=="release_groups"){const O={mbid:o.id,releaseDate:o["first-release-date"]},y=await V(O);D=(y==null?void 0:y.labelName)??null,P=(y==null?void 0:y.labelMbid)??null;const B=await H(O.mbid);t(11,l=[...l,{item_position:l.length,artist_mbid:o["artist-credit"][0].artist.id,artist_name:o["artist-credit"][0].artist.name,release_group_mbid:o.id,release_group_name:o.title,release_date:o["first-release-date"],recording_mbid:null,recording_name:null,remixer_mbid:null,img_url:B,label_name:D,label_mbid:P,notes:null,id:l.length+1}])}else if(r=="recordings"){let O=null;o.relations[0].artist.type=="remixer"&&(O=o.relations[0].artist.id);const y=o.releases[0]["release-group"].id,B=o["first-release-date"],T=await V({mbid:y,releaseDate:B});D=(T==null?void 0:T.labelName)??null,P=(T==null?void 0:T.labelMbid)??null;const Y=await H(y);t(11,l=[...l,{item_position:l.length,artist_mbid:o["artist-credit"][0].artist.id,artist_name:o["artist-credit"][0].artist.name,release_group_mbid:o.releases[0]["release-group"].id,release_group_name:o.releases[0]["release-group"].title,recording_mbid:o.id,recording_name:o.title,release_date:o["first-release-date"],remixer_mbid:O,img_url:Y,label_name:D,label_mbid:P,notes:null,id:l.length+1}])}return t(12,u=!0),t(0,f=""),t(7,g=!1),console.log(l),{newItemAdded:u,showModal:m,query:f,searchComplete:g}}async function k(o){console.log(o);let D=null,P=null;if(r=="artists")t(11,l={artist_mbid:o.id,artist_name:o.name,release_group_mbid:null,release_group_name:null,release_date:null,recording_mbid:null,recording_name:null,remixer_mbid:null,img_url:null,label:null,notes:null});else if(r=="release_groups"){const O={mbid:o.id,releaseDate:o["first-release-date"]},y=await V(O);D=(y==null?void 0:y.labelName)??null,P=(y==null?void 0:y.labelMbid)??null;const B=await H(O.mbid);t(11,l={artist_mbid:o["artist-credit"][0].artist.id,artist_name:o["artist-credit"][0].artist.name,release_group_mbid:o.id,release_group_name:o.title,release_date:o["first-release-date"],recording_mbid:null,recording_name:null,remixer_mbid:null,img_url:B,label_name:D,label_mbid:P,notes:null})}else if(r=="recordings"){console.log(o);let O=null;o.releations&&o.relations[0].artist.type=="remixer"&&(O=o.relations[0].artist.id);const y=o.releases[0]["release-group"].id,B=o["first-release-date"],T=await V({mbid:y,releaseDate:B});D=(T==null?void 0:T.labelName)??null,P=(T==null?void 0:T.labelMbid)??null;const Y=await H(y);t(11,l={artist_mbid:o["artist-credit"][0].artist.id,artist_name:o["artist-credit"][0].artist.name,release_group_mbid:o.releases[0]["release-group"].id,release_group_name:o.releases[0]["release-group"].title,recording_mbid:o.id,recording_name:o.title,release_date:o["first-release-date"],remixer_mbid:O,img_url:Y,label_name:D,label_mbid:P,notes:null})}return t(12,u=!0),t(5,m=!1),t(0,f=""),t(7,g=!1),console.log(l),{newItemAdded:u,showModal:m,addedItems:l,query:f,searchComplete:g}}const j=o=>p(o),R=()=>t(5,m=!1),G=o=>k(o),de=()=>t(5,m=!1);function _e(o){m=o,t(5,m)}function fe(){f=this.value,t(0,f)}return i.$$set=o=>{"searchCategory"in o&&t(1,r=o.searchCategory),"searchButtonText"in o&&t(2,c=o.searchButtonText),"searchPlaceholder"in o&&t(3,n=o.searchPlaceholder),"addedItems"in o&&t(11,l=o.addedItems),"newItemAdded"in o&&t(12,u=o.newItemAdded),"mode"in o&&t(4,d=o.mode),"limit"in o&&t(13,h=o.limit),"query"in o&&t(0,f=o.query),"requestSubmit"in o&&t(14,a=o.requestSubmit),"avatarSearch"in o&&t(15,s=o.avatarSearch)},[f,r,c,n,d,m,w,g,I,p,k,l,u,h,a,s,j,R,G,de,_e,fe]}class Xe extends ce{constructor(e){super(),ue(this,e,ze,Ue,ie,{searchCategory:1,searchButtonText:2,searchPlaceholder:3,addedItems:11,newItemAdded:12,mode:4,limit:13,query:0,requestSubmit:14,avatarSearch:15})}}export{Xe as M};
