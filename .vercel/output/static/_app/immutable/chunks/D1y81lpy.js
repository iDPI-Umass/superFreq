import"./CWj6FrbW.js";import{p as J,f as P,a1 as ve,b as K,u as _t,av as ft,d as v,s as D,a as le,g as i,c as s,r,t as L,n as R,aK as Ge,e as ie}from"./DKxP8oaF.js";import{s as X}from"./d8TzcK2t.js";import{i as w}from"./XPA7DDzn.js";import{d as G,a as l,t as g,b as Qe}from"./DCT9fmD9.js";import{r as Ce,s as H,b as we}from"./DubPOQGL.js";import{s as ue,r as me,p as A}from"./C6N4_jbr.js";import{c as He}from"./DqG9MKSW.js";import{a as De}from"./Pq-04fzQ.js";import{d as Ye,e as We,b as pt}from"./o4T939ll.js";import{p as ke}from"./DIWzF7VF.js";import{b as gt}from"./CYaf7cAz.js";import{e as Le}from"./B9Qn1ecM.js";import{c as ht,D as $e,M as et,B as tt}from"./BpsuVaJI.js";import{P as bt,a as yt,b as xt}from"./BRtPmsJ_.js";import{s as _e}from"./BpB5Zjcp.js";import{I as fe}from"./bAKNv2QX.js";import{e as wt,i as kt}from"./Cpe_MceB.js";import{L as Pt}from"./BFwcLjEZ.js";import{N as Tt}from"./BPwSGjQ8.js";import{d as Mt}from"./-Ocsa0V4.js";import{C as St}from"./mnVZ5n0Q.js";import{I as Ut}from"./BeMa8PAS.js";const Nt={y:-8,start:.95,duration:200};function Ct(n,e){const a=getComputedStyle(n),m=a.transform==="none"?"":a.transform,d={...Nt,...e},h=(o,_,f)=>{const[u,p]=_,[T,U]=f;return(o-u)/(p-u)*(U-T)+T},t=o=>Object.keys(o).reduce((_,f)=>o[f]===void 0?_:`${_}${f}:${o[f]};`,"");return{duration:d.duration??200,delay:0,css:o=>{const _=h(o,[0,1],[d.y,0]),f=h(o,[0,1],[d.start,1]);return t({transform:`${m} translate3d(0, ${_}px, 0) scale(${f})`,opacity:o})},easing:ht}}function It(n,e){J(e,!0);let a=me(e,["$$slots","$$events","$$legacy"]);fe(n,ue({name:"ban"},()=>a,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m4.9 4.9 14.2 14.2"}]],children:(d,h)=>{var t=G(),o=P(t);_e(o,()=>e.children??ve),l(d,t)},$$slots:{default:!0}})),K()}function zt(n,e){J(e,!0);let a=me(e,["$$slots","$$events","$$legacy"]);fe(n,ue({name:"circle"},()=>a,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}]],children:(d,h)=>{var t=G(),o=P(t);_e(o,()=>e.children??ve),l(d,t)},$$slots:{default:!0}})),K()}function qt(n,e){J(e,!0);let a=me(e,["$$slots","$$events","$$legacy"]);fe(n,ue({name:"ellipsis"},()=>a,{iconNode:[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]],children:(d,h)=>{var t=G(),o=P(t);_e(o,()=>e.children??ve),l(d,t)},$$slots:{default:!0}})),K()}function Ve(n,e){J(e,!0);let a=me(e,["$$slots","$$events","$$legacy"]);fe(n,ue({name:"flag"},()=>a,{iconNode:[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15"}]],children:(d,h)=>{var t=G(),o=P(t);_e(o,()=>e.children??ve),l(d,t)},$$slots:{default:!0}})),K()}function At(n,e){J(e,!0);let a=me(e,["$$slots","$$events","$$legacy"]);fe(n,ue({name:"pen-line"},()=>a,{iconNode:[["path",{d:"M12 20h9"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z"}]],children:(d,h)=>{var t=G(),o=P(t);_e(o,()=>e.children??ve),l(d,t)},$$slots:{default:!0}})),K()}function Dt(n,e){J(e,!0);let a=me(e,["$$slots","$$events","$$legacy"]);fe(n,ue({name:"trash-2"},()=>a,{iconNode:[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]],children:(d,h)=>{var t=G(),o=P(t);_e(o,()=>e.children??ve),l(d,t)},$$slots:{default:!0}})),K()}function Lt(n,e,a){e(!e()),D(a,!i(a))}function Fe(n,e,a){D(e,!1),a(null)}function Ot(n,e,a){D(e,!0),Promise.resolve(a()).then(()=>{D(e,!1)})}var jt=(n,e)=>e("blockUser"),Bt=g('<button class="popover-item"><!> <span class="descriptor">block user</span></button>'),Et=(n,e)=>e("unblockUser"),Rt=g('<button class="popover-item"><!> <span class="descriptor">unblock user</span></button>'),Ht=(n,e)=>e("reportUser"),Vt=g('<button class="popover-item"><!> <span class="descriptor">report user</span></button>'),Ft=(n,e)=>e("reportUser"),Yt=g('<button class="popover-item" disabled><!> <span class="descriptor">user reported</span></button>'),Xt=g("<!> <!>",1),Jt=(n,e)=>e("deletePost"),Kt=g('<button class="popover-item"><!> <span class="descriptor">edit</span></button> <button class="popover-item"><!> <span class="descriptor">delete</span></button>',1),Zt=(n,e)=>e("flagPost"),Gt=g('<button class="popover-item"><!> <span class="descriptor">flag post</span></button>'),Qt=g("<!> <!>",1),Wt=g('<h2> </h2> <p> </p> <div class="dialog-options svelte-1g8jhne"><button aria-label="close modal" formmethod="dialog" class="standard svelte-1g8jhne">cancel</button> <button aria-label="submit" type="submit" class="standard svelte-1g8jhne"> </button></div>',1),$t=g('<p> </p> <div class="dialog-options svelte-1g8jhne"><button aria-label="close modal" formmethod="dialog" class="standard svelte-1g8jhne">close</button></div>',1),ea=g('<p>Something went wrong</p> <div class="dialog-options svelte-1g8jhne"><button aria-label="close modal" formmethod="dialog" class="standard svelte-1g8jhne">close</button></div>',1),ta=g('<!> <dialog aria-label="modal" class="svelte-1g8jhne"><form method="POST"><input type="hidden" id="profile-user-id" name="profile-user-id"> <input type="hidden" id="post-id" name="post-id"> <!></form></dialog>',1);function at(n,e){J(e,!0);let a=A(e,"editState",15,!1),m=A(e,"mode",7),d=A(e,"profileUserId",3,null),h=A(e,"blocked",3,!1),t=A(e,"flagged",3,!1),o=A(e,"postId",3,null),_=A(e,"success",7),f=le(!1),u=le(!1),p;const T={blockUser:"Block uesr?",deletePost:"Delete post?",flagPost:"Flag post?",reportUser:"Report user?",unblockUser:"Unblock user?"},U={blockUser:"This user will no longer be able to see or interact with your profile data, posts, or private collections. They will be able to see your public and open collections.",deletePost:"This post will be permanently removed.",flagPost:"This will notify site admins that something about this post is fishy.",reportUser:"This will notify site admins that something about this user is fishy.",unblockUser:"This grants this user the same permission to see your activity that everyone else has."},q={blockUser:"User blocked",deletePost:"Post deleted",flagPost:"Post flagged",reportUser:"User reported",unblockUser:"User unblocked"},V={blockUser:"block",deletePost:"delete",flagPost:"flag",reportUser:"report",unblockUser:"unblock"},x={blockUser:"block",deletePost:"delete",flagPost:"flagPost",reportUser:"flag",unblockUser:"unblock"},b={blockUser:"?/blockUser",deletePost:"?/deletePost",flagPost:"?/flagPost",reportUser:"?/reportUser",unblockUser:"?/blockUser"};let k=le(void 0);function M(y){D(f,!i(f)),D(k,ke(y)),D(u,!0)}let C=le(!1);_t(()=>{p.addEventListener("click",y=>{const z=p.getBoundingClientRect();(y.clientX<z.left||y.clientX>z.right||y.clientY<z.top||y.clientY>z.bottom)&&p.close()}),p&&i(u)==!0&&p.showModal(),p&&!i(u)&&p.close()});var ae=ta();We("keydown",ft,y=>{y.key==="Escape"&&p.close()});var Q=P(ae);He(Q,()=>xt,(y,z)=>{z(y,{get open(){return i(f)},set open(F){D(f,ke(F))},children:(F,Me)=>{var O=Qt(),W=P(O);He(W,()=>bt,(B,j)=>{j(B,{children:(ee,Ie)=>{qt(ee,{size:"16",color:"var(--freq-color-text-muted)"})},$$slots:{default:!0}})});var $=v(W,2);He($,()=>yt,(B,j)=>{j(B,{transition:Ct,children:(ee,Ie)=>{var Oe=G(),je=P(Oe);{var Be=ge=>{var ye=Xt(),xe=P(ye);{var Se=S=>{var I=Bt();I.__click=[jt,M];var c=s(I);It(c,{size:"16",color:"var(--freq-color-text-muted)"}),R(2),r(I),l(S,I)},re=(S,I)=>{{var c=N=>{var E=Rt();E.__click=[Et,M];var be=s(E);zt(be,{size:"16",color:"var(--freq-color-text-muted)"}),R(2),r(E),l(N,E)};w(S,N=>{h()&&N(c)},I)}};w(xe,S=>{h()?S(re,!1):S(Se)})}var he=v(xe,2);{var se=S=>{var I=Vt();I.__click=[Ht,M];var c=s(I);Ve(c,{size:"16",color:"var(--freq-color-text-muted)"}),R(2),r(I),l(S,I)},de=(S,I)=>{{var c=N=>{var E=Yt();E.__click=[Ft,M];var be=s(E);Ve(be,{size:"16",color:"var(--freq-color-text-muted)"}),R(2),r(E),l(N,E)};w(S,N=>{t()&&N(c)},I)}};w(he,S=>{t()?S(de,!1):S(se)})}l(ge,ye)},Ee=(ge,ye)=>{{var xe=re=>{var he=Kt(),se=P(he);se.__click=[Lt,a,f];var de=s(se);At(de,{size:"16",color:"var(--freq-color-text-muted)"}),R(2),r(se);var S=v(se,2);S.__click=[Jt,M];var I=s(S);Dt(I,{size:"16",color:"var(--freq-color-text-muted)"}),R(2),r(S),l(re,he)},Se=(re,he)=>{{var se=de=>{var S=Gt();S.__click=[Zt,M];var I=s(S);Ve(I,{size:"16",color:"var(--freq-color-text-muted)"}),R(2),r(S),l(de,S)};w(re,de=>{m("postMenu")&&de(se)},he)}};w(ge,re=>{m()=="sessionUserPostMenu"?re(xe):re(Se,!1)},ye)}};w(je,ge=>{m()=="profileMenu"?ge(Be):ge(Ee,!1)})}l(ee,Oe)},$$slots:{default:!0}})}),l(F,O)},$$slots:{default:!0}})});var oe=v(Q,2),Z=s(oe),ne=s(Z);Ce(ne);var ce=v(ne,2);Ce(ce);var pe=v(ce,2);{var Pe=y=>{var z=Wt(),F=P(z),Me=s(F,!0);r(F);var O=v(F,2),W=s(O,!0);r(O);var $=v(O,2),B=s($);B.__click=[Fe,u,_];var j=v(B,2);j.__click=[Ot,C,_];var ee=s(j,!0);r(j),r($),L(()=>{X(Me,T[i(k)]),X(W,U[i(k)]),B.disabled=i(C),H(j,"formaction",b[i(k)]),j.disabled=i(C),X(ee,V[i(k)])}),l(y,z)},Te=(y,z)=>{{var F=O=>{var W=$t(),$=P(W),B=s($,!0);r($);var j=v($,2),ee=s(j);ee.__click=[Fe,u,_],r(j),L(()=>X(B,q[i(k)])),l(O,W)},Me=(O,W)=>{{var $=B=>{var j=ea(),ee=v(P(j),2),Ie=s(ee);Ie.__click=[Fe,u,_],r(ee),l(B,j)};w(O,B=>{_()==!1&&B($)},W)}};w(y,O=>{_()==!0?O(F):O(Me,!1)},z)}};w(pe,y=>{_()==null?y(Pe):y(Te,!1)})}r(Z),De(Z,y=>{var z;return(z=Le)==null?void 0:z(y)}),r(oe),gt(oe,y=>p=y,()=>p),L(()=>{H(Z,"id",x[i(k)]),H(Z,"action",b[i(k)]),we(ne,d()),we(ce,o()),H(ce,"form",x[i(k)])}),We("close",oe,()=>D(u,!1)),l(n,ae),K()}Ye(["click"]);function aa(n,e){e(!e())}var oa=g('<form method="POST" name="editPostText" class="vertical" action="?/editPost"><input id="post-data" name="post-data" type="hidden"> <textarea cols="1" rows="4" id="edited-text" name="edited-text" spellcheck="true" required></textarea> <div class="edit-submit-options svelte-1hf0syz"><button class="standard">cancel</button> <button type="submit" class="standard" formaction="?/editPost">submit edit</button></div></form>');function ra(n,e){J(e,!0);let a=A(e,"editState",15,!1),m=le(!1);var d=oa(),h=s(d);Ce(h);var t=v(h,2);pt(t);var o=v(t,2),_=s(o);_.__click=[aa,a];var f=v(_,2);r(o),r(d),De(d,(u,p)=>{var T;return(T=Le)==null?void 0:T(u,p)},()=>()=>(D(m,!0),async({update:u})=>{D(m,!1),await u()})),L(u=>{we(h,u),we(t,e.postData.text),f.disabled=i(m)},[()=>JSON.stringify(e.postData)]),l(n,d),K()}Ye(["click"]);function ot(n,e){J(e,!0);let a=me(e,["$$slots","$$events","$$legacy"]);fe(n,ue({name:"heart"},()=>a,{iconNode:[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}]],children:(d,h)=>{var t=G(),o=P(t);_e(o,()=>e.children??ve),l(d,t)},$$slots:{default:!0}})),K()}var sa=(n,e,a)=>{D(e,!i(e)),D(a,ke(i(e)?Ge(a):Ge(a,-1)))},ia=g("<span> </span>"),la=g('<!> <span class="descriptor">like</span>',1),na=g('<!> <span class="descriptor">liked</span>',1),ca=g('<form method="POST" id="submitReaction" action="?/submitReaction"><input type="hidden" name="post-id" id="post-id"> <input type="hidden" name="reaction-type" id="reaction-type" value="like"> <button class="like" formaction="?/submitReaction"><div class="row-group-icon-description"><!> <!></div></button></form>');function da(n,e){let a=A(e,"reactionCount",3,0),m=!1,d=le(ke(e.reactionActive)),h=le(ke(a()));var t=ca(),o=s(t);Ce(o);var _=v(o,2),f=v(_,2);f.__click=[sa,d,h];var u=s(f),p=s(u);{var T=x=>{var b=ia(),k=s(b,!0);r(b),L(()=>X(k,i(h))),l(x,b)};w(p,x=>{i(h)>0&&x(T)})}var U=v(p,2);{var q=x=>{var b=la(),k=P(b);ot(k,{class:"icon",size:"16",color:"var(--freq-color-text-muted)"}),R(2),l(x,b)},V=x=>{var b=na(),k=P(b);ot(k,{class:"icon",size:"16",color:"var(--freq-color-text-muted)",fill:"var(--freq-color-text-muted)"}),R(2),l(x,b)};w(U,x=>{i(d)?x(V,!1):x(q)})}r(u),r(f),r(t),De(t,x=>{var b;return(b=Le)==null?void 0:b(x)}),L(()=>{we(o,e.postId),f.disabled=m}),l(n,t)}Ye(["click"]);function va(n,e){J(e,!0);let a=me(e,["$$slots","$$events","$$legacy"]);fe(n,ue({name:"save"},()=>a,{iconNode:[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]],children:(d,h)=>{var t=G(),o=P(t);_e(o,()=>e.children??ve),l(d,t)},$$slots:{default:!0}})),K()}var ua=g('<li class="list-modal"><div class="list-modal-li-row"><div class="list-modal-li-row-button-spacing"><form method="POST" action="?/saveToCollection"><input type="hidden" id="collection-id" name="collection-id"> <button class="add" type="submit">+ save</button></form></div> </div></li>'),ma=g('<ol class="list-modal"></ol>'),_a=g('Item saved to your collection <a class="svelte-1s94jns"> </a>.',1),fa=g('<form method="POST" action="?/getCollectionList"><input type="hidden" id="post-id" name="post-id"> <button class="like" type="submit"><div class="row-group-icon-description"><!> <span class="descriptor">Save</span></div></button></form> <!> <!>',1);function pa(n,e){J(e,!0);let a=A(e,"showCollectionsListModal",15,!1),m=A(e,"showSuccessModal",15,!1),d=A(e,"collections",19,()=>[]),h=le(!1),t=le(void 0),o=le(void 0),_=le(void 0);var f=fa(),u=P(f),p=s(u);Ce(p);var T=v(p,2),U=s(T),q=s(U);va(q,{class:"icon",size:"16",color:"var(--freq-color-text-muted)"}),R(2),r(U),r(T),r(u),De(u,b=>{var k;return(k=Le)==null?void 0:k(b)});var V=v(u,2);Pt(V,{get showModal(){return a()},set showModal(M){a(M)},headerText:M=>{R();var C=Qe("Save item to a collection");l(M,C)},list:M=>{var C=ma();wt(C,21,d,kt,(ae,Q)=>{var oe=ua(),Z=s(oe),ne=s(Z),ce=s(ne),pe=s(ce);Ce(pe);var Pe=v(pe,2);r(ce),De(ce,(y,z)=>{var F;return(F=Le)==null?void 0:F(y,z)},()=>()=>(D(h,!0),D(t,ke(i(Q).collection_id)),D(o,ke(i(Q).title)),D(_,`/collection/${i(Q).collection_id}`),async({update:y})=>(await y(),D(h,!1),{savedToCollectionId:i(t),savedToCollectionTitle:i(o),savedToCollectionRoute:i(_)}))),r(ne);var Te=v(ne);r(Z),r(oe),L(()=>{var y;we(pe,(y=i(Q))==null?void 0:y.collection_id),Pe.disabled=i(h),X(Te,` ${i(Q).title??""}`)}),l(ae,oe)}),r(C),l(M,C)},$$slots:{headerText:!0,list:!0}});var x=v(V,2);Tt(x,{get showModal(){return m()},set showModal(M){m(M)},headerText:M=>{R();var C=Qe("Success!");l(M,C)},message:M=>{R();var C=_a(),ae=v(P(C)),Q=s(ae,!0);r(ae),R(),L(()=>{H(ae,"href",i(_)),X(Q,i(o))}),l(M,C)},$$slots:{headerText:!0,message:!0}}),L(()=>we(p,e.postId)),l(n,f),K()}function rt(n,e){J(e,!0);let a=me(e,["$$slots","$$events","$$legacy"]);fe(n,ue({name:"reply"},()=>a,{iconNode:[["polyline",{points:"9 17 4 12 9 7"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4"}]],children:(d,h)=>{var t=G(),o=P(t);_e(o,()=>e.children??ve),l(d,t)},$$slots:{default:!0}})),K()}function ga(n,e){J(e,!0);let a=me(e,["$$slots","$$events","$$legacy"]);fe(n,ue({name:"link-2"},()=>a,{iconNode:[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12"}]],children:(d,h)=>{var t=G(),o=P(t);_e(o,()=>e.children??ve),l(d,t)},$$slots:{default:!0}})),K()}var ha=g('<iframe style="border: 0; width: 100%; height: 42px;" title="Bandcamp player" seamless></iframe>'),ba=g('<iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" title="Soundcloud player"></iframe>'),ya=g('<div class="youtube svelte-qhmpvb"><iframe width="100%" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="" class="svelte-qhmpvb"></iframe></div>'),xa=g('<iframe width="100%" height="120" frameborder="0" title="Mixcloud player"></iframe>');function wa(n,e){let a=ie(()=>e.embedInfo.id),m=ie(()=>e.embedInfo.source);var d=G(),h=P(d);{var t=_=>{var f=ha();L(()=>H(f,"src",`https://bandcamp.com/EmbeddedPlayer/${i(a)??""}/size=small/bgcol=333333/linkcol=ffffff/transparent=true/`)),l(_,f)},o=(_,f)=>{{var u=T=>{var U=ba();L(()=>H(U,"src",`https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/${i(a)??""}&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true`)),l(T,U)},p=(T,U)=>{{var q=x=>{var b=ya(),k=s(b);r(b),L(()=>H(k,"src",`https://www.youtube.com/embed/${i(a)??""}`)),l(x,b)},V=(x,b)=>{{var k=M=>{var C=xa();L(()=>H(C,"src",`https://player-widget.mixcloud.com/widget/iframe/?hide_cover=1&feed=${i(a)??""}`)),l(M,C)};w(x,M=>{i(m)=="mixcloud"&&M(k)},b)}};w(T,x=>{i(m)=="youtube"?x(q):x(V,!1)},U)}};w(_,T=>{i(m)=="soundcloud"?T(u):T(p,!1)},f)}};w(h,_=>{i(m)=="bandcamp"?_(t):_(o,!1)})}l(n,d)}var ka=g('<span class="now-playing-text"><!> <!></span>'),Pa=g('<span class="now-playing-text"><!> <!></span>'),Ta=g('<span class="now-playing-text"><!> <!></span>');function Ma(n,e){var a=G(),m=P(a);{var d=t=>{var o=ka(),_=s(o);$e(_,{size:"16",color:"var(--freq-color-text-medium-dark)"});var f=v(_),u=v(f);$e(u,{size:"16",color:"var(--freq-color-text-medium-dark)"}),r(o),L(()=>{H(o,"aria-details",`Now Playing album ${e.itemTitle??""} by ${e.artistName??""}`),X(f,` ${e.artistName??""} • ${e.itemTitle??""} `)}),l(t,o)},h=(t,o)=>{{var _=u=>{var p=Pa(),T=s(p);et(T,{size:"16",color:"var(--freq-color-text-medium-dark)"});var U=v(T),q=v(U);et(q,{size:"16",color:"var(--freq-color-text-medium-dark)"}),r(p),L(()=>{H(p,"aria-details",`Now Playing track ${e.itemTitle??""} by ${e.artistName??""}`),X(U,` ${e.artistName??""} • ${e.itemTitle??""} `)}),l(u,p)},f=(u,p)=>{{var T=U=>{var q=Ta(),V=s(q);tt(V,{size:"16",color:"var(--freq-color-text-medium-dark)"});var x=v(V),b=v(x);tt(b,{size:"16",color:"var(--freq-color-text-medium-dark)"}),r(q),L(()=>{H(q,"aria-details",`Now Playing mix ${e.itemTitle??""} by ${e.artistName??""}`),X(x,` ${e.artistName??""} • ${e.itemTitle??""} `)}),l(U,q)};w(u,U=>{e.itemType=="episode"&&U(T)},p)}};w(t,u=>{e.itemType=="recording"?u(_):u(f,!1)},o)}};w(m,t=>{e.itemType=="release_group"?t(d):t(h,!1)})}l(n,a)}var Sa=g('<span class="status-badge">edited</span>'),Ua=g('<span class="descriptor"> </span> <!> <span class="descriptor"> </span>',1),Na=g('<!> <span class="descriptor">reply</span>',1),Ca=g('<a><div class="row-group-icon-description"><!></div></a>'),Ia=g('<div class="row-group-icons"><!> <!> <!></div> <div class="row-group-icon-description"><!></div>',1),za=g('<div class="box svelte-nwi32j"><div class="double-border svelte-nwi32j"><div class="post-row"><div class="row-group-user-data"><!> <div class="row-group-column"><a><span class="display-name"> </span></a> <a><span class="date" aria-label="permalink"> <!></span></a></div></div> <div class="row-group"><!></div></div> <div class="post-body"><!> <!> <!></div> <div class="post-row"><!></div></div></div>');function ao(n,e){var ge,ye,xe,Se,re,he,se,de,S,I;J(e,!0);let a=A(e,"sessionUserId",3,null),m=A(e,"editState",15,!1),d=A(e,"mode",3,null),h=A(e,"collections",19,()=>[]),t=A(e,"showCollectionsModal",15,!1),o=A(e,"showSaveSucessModal",15,!1);const _=(((ge=e.post)==null?void 0:ge.created_at)??((ye=e.post)==null?void 0:ye.timestamp)).toISOString(),f=Date.parse(_).toString(),u=`/posts/${e.post.username}/now-playing/${f}`,p={id:(xe=e.post)==null?void 0:xe.embed_id,source:(Se=e.post)==null?void 0:Se.embed_source,title:((re=e.post)==null?void 0:re.release_group_name)??((he=e.post)==null?void 0:he.recording_name)??((se=e.post)==null?void 0:se.episode_title),artist:(de=e.post)==null?void 0:de.artist_name,account:(S=e.post)==null?void 0:S.embed_account,url:(I=e.post)==null?void 0:I.listen_url};let T=ie(()=>{var c,N;return(c=e.post)!=null&&c.reaction_user_ids?(N=e.post)==null?void 0:N.reaction_user_ids.includes(a()):null}),U=ie(()=>{var c;return(c=e.post)==null?void 0:c.reaction_count}),q=ie(()=>{var c,N;return((c=e.post)==null?void 0:c.id)??((N=e.post)==null?void 0:N.post_id)}),V={img_url:e.post.avatar_url,last_fm_img_url:e.post.last_fm_avatar_url,artist_name:e.post.avatar_artist_name,release_group_name:e.post.avatar_release_group_name};function x(c){if(c.release_group_name&&!c.recording_name)return"release_group";if(c.recording_name)return"recording";if(c.episode_title)return"episode"}console.log(e.post);var b=za(),k=s(b),M=s(k),C=s(M),ae=s(C);const Q=ie(()=>`${e.post.display_name}'s avatar: ${e.post.avatar_release_group_name} by ${e.post.avatar_artist_name}`);St(ae,{item:V,get altText(){return i(Q)},imgClass:"avatar"});var oe=v(ae,2),Z=s(oe),ne=s(Z),ce=s(ne,!0);r(ne),r(Z);var pe=v(Z,2);H(pe,"href",u);var Pe=s(pe),Te=s(Pe),y=v(Te);ga(y,{size:"15",color:"var(--freq-color-text-muted)"}),r(Pe),r(pe),r(oe),r(C);var z=v(C,2),F=s(z);{var Me=c=>{var N=Sa();l(c,N)};w(F,c=>{e.post.status==="edited"&&c(Me)})}r(z),r(M);var O=v(M,2),W=s(O);{var $=c=>{const N=ie(()=>e.post.artist_name??e.post.user_added_artist_name),E=ie(()=>e.post.recording_name??e.post.user_added_recording_name??e.post.release_group_name??e.post.user_added_release_group_name??e.post.episode_title),be=ie(()=>x(e.post));Ma(c,{get artistName(){return i(N)},get itemTitle(){return i(E)},get itemType(){return i(be)}})};w(W,c=>{e.post.artist_name&&c($)})}var B=v(W,2);{var j=c=>{Ut(c,{get text(){return e.post.text}})},ee=c=>{ra(c,{get postData(){return e.post},get editState(){return m()},set editState(N){m(N)}})};w(B,c=>{m()?c(ee,!1):c(j)})}var Ie=v(B,2);{var Oe=c=>{wa(c,{embedInfo:p})};w(Ie,c=>{(p==null?void 0:p.id)!=null&&c(Oe)})}r(O);var je=v(O,2),Be=s(je);{var Ee=c=>{var N=Ia(),E=P(N),be=s(E);da(be,{get postId(){return i(q)},get reactionActive(){return i(T)},get reactionCount(){return i(U)}});var Xe=v(be,2);{var st=Y=>{var te=Ca();H(te,"href",u);var Ue=s(te),ze=s(Ue);{var Re=Ne=>{var qe=Ua(),Ae=P(qe),ut=s(Ae,!0);r(Ae);var Ke=v(Ae,2);rt(Ke,{size:"16",color:"var(--freq-color-text-muted)"});var Ze=v(Ke,2),mt=s(Ze,!0);r(Ze),L(()=>{X(ut,e.post.replies.length),X(mt,e.post.replies.length>=2?"replies":"reply")}),l(Ne,qe)},vt=Ne=>{var qe=Na(),Ae=P(qe);rt(Ae,{size:"16",color:"var(--freq-color-text-muted)"}),R(2),l(Ne,qe)};w(ze,Ne=>{e.post.replies&&e.post.replies.length>0&&e.post.replies[0]?Ne(Re):Ne(vt,!1)})}r(Ue),r(te),l(Y,te)};w(Xe,Y=>{d()=="feed"&&Y(st)})}var it=v(Xe,2);{var lt=Y=>{pa(Y,{get postId(){return i(q)},get collections(){return h()},get showCollectionsListModal(){return t()},set showCollectionsListModal(te){t(te)},get showSuccessModal(){return o()},set showSuccessModal(te){o(te)}})};w(it,Y=>{(e.post.artist_mbid||e.post.user_added_metadata_id)&&Y(lt)})}r(E);var Je=v(E,2),nt=s(Je);{var ct=Y=>{const te=ie(()=>e.post.id??e.post.now_playing_post_id);at(Y,{mode:"sessionUserPostMenu",get postId(){return i(te)},get success(){return e.userActionSuccess},get editState(){return m()},set editState(Ue){m(Ue)}})},dt=(Y,te)=>{{var Ue=ze=>{const Re=ie(()=>e.post.id??e.post.now_playing_post_id);at(ze,{mode:"postMenu",get postId(){return i(Re)},get success(){return e.userActionSuccess}})};w(Y,ze=>{a()&&ze(Ue)},te)}};w(nt,Y=>{e.post.user_id==a()?Y(ct):Y(dt,!1)})}r(Je),l(c,N)};w(Be,c=>{d()!="sample"&&c(Ee)})}r(je),r(k),r(b),L(c=>{H(Z,"href",`/user/${e.post.username??""}`),X(ce,e.post.display_name),X(Te,`${c??""} `)},[()=>Mt(e.post.created_at??e.post.timestamp)]),l(n,b),K()}export{ga as L,ao as N,at as U,da as a};
