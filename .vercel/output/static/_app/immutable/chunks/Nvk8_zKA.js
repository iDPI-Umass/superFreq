import{i as w,_ as n,ah as y,$ as u,G as b}from"./DKxP8oaF.js";import{l as i}from"./o4T939ll.js";import{i as g}from"./DIWzF7VF.js";function q(e,v,a=v){i(e,"input",f=>{var c=f?e.defaultValue:e.value;if(c=h(e)?m(c):c,a(c),c!==(c=v())){var o=e.selectionStart,r=e.selectionEnd;e.value=c??"",r!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(r,e.value.length))}}),(b&&e.defaultValue!==e.value||w(v)==null&&e.value)&&a(h(e)?m(e.value):e.value),n(()=>{var f=v();h(e)&&f===m(e.value)||e.type==="date"&&!f&&!e.value||f!==e.value&&(e.value=f??"")})}const d=new Set;function C(e,v,a,f,c=f){var o=a.getAttribute("type")==="checkbox",r=e;let t=!1;if(v!==null)for(var _ of v)r=r[_]??(r[_]=[]);r.push(a),i(a,"change",()=>{var l=a.__value;o&&(l=k(r,l,a.checked)),c(l)},()=>c(o?[]:null)),n(()=>{var l=f();if(b&&a.defaultChecked!==a.checked){t=!0;return}o?(l=l||[],a.checked=l.includes(a.__value)):a.checked=g(a.__value,l)}),y(()=>{var l=r.indexOf(a);l!==-1&&r.splice(l,1)}),d.has(r)||(d.add(r),u(()=>{r.sort((l,s)=>l.compareDocumentPosition(s)===4?-1:1),d.delete(r)})),u(()=>{if(t){var l;if(o)l=k(r,l,a.checked);else{var s=r.find(S=>S.checked);l=s==null?void 0:s.__value}c(l)}})}function k(e,v,a){for(var f=new Set,c=0;c<e.length;c+=1)e[c].checked&&f.add(e[c].__value);return a||f.delete(v),Array.from(f)}function h(e){var v=e.type;return v==="number"||v==="range"}function m(e){return e===""?null:+e}export{C as a,q as b};
