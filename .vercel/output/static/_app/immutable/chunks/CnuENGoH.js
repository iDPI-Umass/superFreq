import"./CWj6FrbW.js";import{p as ue,u as pe,a as re,g as e,d as a,t as le,b as ce,e as oe,s as T,av as ve,c as s,a1 as _e,r as o,f as H,n as y}from"./DKxP8oaF.js";import{s as te}from"./d8TzcK2t.js";import{i as S}from"./XPA7DDzn.js";import{t as I,a as h,b as ge}from"./DCT9fmD9.js";import{r as _,b as be}from"./DubPOQGL.js";import{d as me,e as ne}from"./o4T939ll.js";import{b as w,a as ae}from"./Nvk8_zKA.js";import{p as P}from"./DIWzF7VF.js";import{p as L}from"./C6N4_jbr.js";import"./ryZ2lNj1.js";import{G as fe,C as xe}from"./CPwN5FOA.js";import{M as ye}from"./DSfPsCr9.js";import{s as he}from"./BpB5Zjcp.js";import{b as ke}from"./CYaf7cAz.js";import{l as we}from"./-Ocsa0V4.js";var Te=(j,l)=>e(l).close(),Ie=I('<div class="label-group"><label class="text-label" for="recording">track</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="recording" id="recording" required>',1),Me=I('<span class="label-explainer">* required</span>'),Ce=I('<div class="label-group"><label class="text-label" for="release_group">album</label> <!></div> <input class="text" type="text" name="release_group" id="release_group" required> <label class="text-label" for="release_date">release date</label> <input class="text" type="text" name="release_date" id="release_date"> <label class="text-label" for="label">label</label> <input class="text" type="text" name="label" id="label">',1),qe=I('<div class="label-group"><label class="text-label" for="episode_title">episode / dj mix title</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="episode_title" id="episode_title" required> <div class="label-group"><label class="text-label" for="show_title">show name / mix series</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="show_title" id="show_title" required> <div class="label-group"><label class="text-label" for="listen_url">listen URL</label></div> <input class="text" type="text" name="listen_url" id="listen_url">',1),Ae=(j,l)=>l(),Le=I('<dialog aria-label="modal" class="svelte-ayvj0y"><div class="dialog-header svelte-ayvj0y"><h2 class="svelte-ayvj0y"><!></h2> <button aria-label="close modal" formmethod="dialog" class="svelte-ayvj0y">x</button></div> <form class="vertical"><input type="hidden" name="item-type" id="item-type"> <div class="label-group"><label class="text-label" for="artist">artist</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="artist" id="artist" required> <!> <!> <!> <button class="standard" type="button">add item</button></form></dialog>');function Pe(j,l){ue(l,!0);let k=L(l,"showModal",15,!1),M=L(l,"items",27,()=>P([])),u=re(void 0);pe(()=>{e(u).addEventListener("click",t=>{const c=e(u).getBoundingClientRect();(t.clientX<c.left||t.clientX>c.right||t.clientY<c.top||t.clientY>c.bottom)&&e(u).close()}),e(u)&&k()&&e(u).showModal(),e(u)&&!k()&&e(u).close()});let C={item_type:null,artist_name:null,release_group_name:null,recording_name:null,release_date:null,label:null,episode_title:null,show_title:null,listen_url:null,item_position:null,id:null},r=re(P(C)),U=oe(()=>M().length??0);function K(){e(r).item_type=l.itemType;const t=e(U);e(r).item_position=t,e(r).id=t,e(r).listen_url=d(e(r).listen_url)?e(r).listen_url:null,M().push(e(r)),T(r,P(C)),e(u).close()}function d(t){return we(t)?t:null}var f=Le();ne("keydown",ve,t=>{t.key});var E=s(f),q=s(E),N=s(q);he(N,()=>l.headerText??_e),o(q);var X=a(q,2);X.__click=[Te,u],o(E);var Y=a(E,2),z=s(Y);_(z);var B=a(z,4);_(B);var J=a(B,2);{var ie=t=>{var c=Ie(),g=a(H(c),2);_(g),w(g,()=>e(r).recording_name,x=>e(r).recording_name=x),h(t,c)};S(J,t=>{l.itemType=="recording"&&t(ie)})}var D=a(J,2);{var O=t=>{var c=Ce(),g=H(c),x=a(s(g),2);{var n=p=>{var G=Me();h(p,G)};S(x,p=>{l.itemType=="release_group"&&p(n)})}o(g);var i=a(g,2);_(i);var m=a(i,4);_(m);var v=a(m,4);_(v),w(i,()=>e(r).release_group_name,p=>e(r).release_group_name=p),w(m,()=>e(r).release_date,p=>e(r).release_date=p),w(v,()=>e(r).label,p=>e(r).label=p),h(t,c)};S(D,t=>{(l.itemType=="release_group"||l.itemType=="recording")&&t(O)})}var Q=a(D,2);{var V=t=>{var c=qe(),g=a(H(c),2);_(g);var x=a(g,4);_(x);var n=a(x,4);_(n),w(g,()=>e(r).episode_title,i=>e(r).episode_title=i),w(x,()=>e(r).show_title,i=>e(r).show_title=i),w(n,()=>e(r).listen_url,i=>e(r).listen_url=i),h(t,c)};S(Q,t=>{l.itemType=="episode"&&t(V)})}var Z=a(Q,2);Z.__click=[Ae,K],o(Y),o(f),ke(f,t=>T(u,t),()=>e(u)),le(()=>be(z,l.itemType)),ne("close",f,()=>k(!1)),w(B,()=>e(r).artist_name,t=>e(r).artist_name=t),h(j,f),ce()}me(["click"]);var je=I('<div class="form-column svelte-e1wkfd"><fieldset class="search svelte-e1wkfd"><legend>Add <!> to your collection</legend> <ul><li><input class="radio" type="radio" name="item-type" id="artist"> <label for="artist">artist</label></li> <li><input class="radio" type="radio" name="item-type" id="release_group"> <label for="release_group">album</label></li> <li><input class="radio" type="radio" name="item-type" id="recording"> <label for="recording">track</label></li> <li><input class="radio" type="radio" name="item-type" id="episode"> <label for="episode">Episode / DJ Mix</label></li></ul></fieldset></div>'),Ue=I('<div class="collection-search-bar"><span class="search-tooltip">search for <em> </em> to add info automatically</span> <!></div> <span class="or svelte-e1wkfd">— or —</span>',1),Ee=(j,l)=>T(l,!0),Be=I('<div class="collection-search"><!> <div class="form-column svelte-e1wkfd"><!> <span class="search-tooltip">add <em> </em> info yourself</span> <!> <div class="manual-add-button svelte-e1wkfd"><button class="double-border-top"><div class="inner-border"> </div></button></div></div></div> <div class="bottom-double-border"></div> <!>',1);function Ze(j,l){ue(l,!0);const k=[];let M=L(l,"mode",3,""),u=L(l,"collectionItems",31,()=>P([])),C=L(l,"deletedItems",31,()=>P([])),r=L(l,"itemAdded",15,!1),U=L(l,"imgPromise",15,null);const K={"":"...",artist:"artists",artists:"artists",release_group:"albums",release_groups:"albums",recording:"tracks",recordings:"tracks",episode:"episode",mix:"episode"};let d=re(P(M()??"")),f={"":"item",artist:"artist",artists:"artist",release_group:"album",release_groups:"album",recording:"track",recordings:"track",episode:"episode or mix",episodes:"episode or mix"},E={"":"",artist:"artists",artists:"artists",album:"release_groups",albums:"release_groups",release_group:"release_groups",release_groups:"release_groups",track:"recordings",tracks:"recordings",recording:"recordings",recordings:"recordings",episode:"episode",episodes:"episode",mix:"episode",mixes:"episode"},q=re(!1);var N=Be(),X=H(N),Y=s(X);{var z=n=>{var i=je(),m=s(i),v=s(m),p=a(s(v));xe(p,{get itemType(){return E[e(d)]}}),y(),o(v);var G=a(v,2),W=s(G),R=s(W);_(R),R.value=(R.__value="artist")==null?"":"artist",y(2),o(W);var F=a(W,2),b=s(F);_(b),b.value=(b.__value="release_group")==null?"":"release_group",y(2),o(F);var se=a(F,2),$=s(se);_($),$.value=($.__value="recording")==null?"":"recording",y(2),o(se);var de=a(se,2),ee=s(de);_(ee),ee.value=(ee.__value="episode")==null?"":"episode",y(2),o(de),o(G),o(m),o(i),ae(k,[],R,()=>e(d),A=>T(d,A)),ae(k,[],b,()=>e(d),A=>T(d,A)),ae(k,[],$,()=>e(d),A=>T(d,A)),ae(k,[],ee,()=>e(d),A=>T(d,A)),h(n,i)};S(Y,n=>{var i,m,v;!((i=M())!=null&&i.includes("artist"))&&!((m=M())!=null&&m.includes("release_group"))&&!((v=M())!=null&&v.includes("recording"))&&n(z)})}var B=a(Y,2),J=s(B);{var ie=n=>{var i=Ue(),m=H(i),v=s(m),p=a(s(v)),G=s(p,!0);o(p),y(),o(v);var W=a(v,2);const R=oe(()=>`search ${K[e(d)]}`),F=oe(()=>`search ${K[e(d)]}`);ye(W,{get searchCategory(){return E[e(d)]},get limit(){return l.limit},get searchButtonText(){return e(R)},get searchPlaceholder(){return e(F)},mode:"collection",get addedItems(){return u()},set addedItems(b){u(b)},get deletedItems(){return C()},set deletedItems(b){C(b)},get newItemAdded(){return r()},set newItemAdded(b){r(b)},get imgPromise(){return U()},set imgPromise(b){U(b)}}),o(m),y(2),le(()=>te(G,f[e(d)])),h(n,i)};S(J,n=>{e(d)!="episode"&&n(ie)})}var D=a(J,2),O=a(s(D)),Q=s(O,!0);o(O),y(),o(D);var V=a(D,2);Pe(V,{get itemType(){return e(d)},get showModal(){return e(q)},set showModal(i){T(q,P(i))},get items(){return u()},set items(i){u(i)},headerText:i=>{y();var m=ge();le(()=>te(m,`manually add ${f[e(d)]??""}`)),h(i,m)},$$slots:{headerText:!0}});var Z=a(V,2),t=s(Z);t.__click=[Ee,q];var c=s(t),g=s(c);o(c),o(t),o(Z),o(B),o(X);var x=a(X,4);fe(x,{get collectionType(){return l.collectionType},get collectionStatus(){return l.collectionStatus},layout:"list",mode:"edit",get collectionContents(){return u()},set collectionContents(n){u(n)},get deletedItems(){return C()},set deletedItems(n){C(n)},get imgPromise(){return U()},set imgPromise(n){U(n)}}),le(()=>{te(Q,f[e(d)]),t.disabled=e(d)=="",te(g,`Add ${f[e(d)]??""} manually`)}),h(j,N),ce()}me(["click"]);export{Ze as C};
