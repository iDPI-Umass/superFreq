import"../chunks/Bg9kRutz.js";import{p as q,a2 as z,b as B,t as I,d as r,c as M,g as e,$ as F,e as s,r as N,f as G}from"../chunks/CIC73nbL.js";import{h as H}from"../chunks/CZBN_KMn.js";import{t as l,a as n}from"../chunks/D1sabymj.js";import{i as J}from"../chunks/w9zPIjBD.js";import{e as K,i as Q}from"../chunks/ChSzfhcg.js";import{s as V}from"../chunks/pfHeeLMb.js";import{N as W}from"../chunks/DLJZCxYD.js";import{P as X,a as Y}from"../chunks/CWmRn-Nb.js";const p=(v,a=z)=>{var i=Z();n(v,i)};var Z=l('<input type="hidden" name="reaction-type" id="reaction-type" form="submitReaction" value="like">'),$=l("<div><!></div>"),tt=l("<!> <!> <!>",1),et=l('<div class="panel"><p>This post has been deleted.</p></div>'),ot=l('<div class="post-panel"><!> <!> <!> <!> <!></div>');function pt(v,a){var R;q(a,!0);let i=s(()=>a.data.post),x=s(()=>a.data.postReplies),C=s(()=>a.data.collections),h=(R=a.data)==null?void 0:R.sessionUserId,S=s(()=>{var t;return(t=a.form)==null?void 0:t.success}),T=s(()=>{var t;return((t=a.form)==null?void 0:t.showCollectionsModal)??!1}),k=s(()=>{var t;return((t=a.form)==null?void 0:t.updateSuccess)??!1});function A(t,o){const d=o.toISOString(),f=Date.parse(d).toString();return t==null?void 0:t.concat(f)}var u=ot();H(t=>{I(()=>{var o;return F.title=`
		${((o=e(i))==null?void 0:o.display_name)??""}'s Now Playing post
	`})});var y=M(u);p(y,()=>"submitReply");var b=r(y,2);p(b,()=>"submitReaction");var w=r(b,2);p(w,()=>"delete");var P=r(w,2);p(P,()=>"flagPost");var U=r(P,2);{var D=t=>{var o=tt(),d=G(o);const f=s(()=>{var c;return(c=a.form)==null?void 0:c.editState});W(d,{sessionUserId:h,get post(){return e(i)},get editState(){return e(f)},get userActionSuccess(){return e(S)},get collections(){return e(C)},get showCollectionsModal(){return e(T)},get showSaveSucessModal(){return e(k)}});var g=r(d,2);X(g);var L=r(g,2);K(L,17,()=>e(x),Q,(c,_)=>{var m=$(),O=M(m);Y(O,{get reply(){return e(_)},sessionUserId:h,get userActionSuccess(){return e(S)}}),N(m),I(j=>V(m,"id",j),[()=>A(e(_).username,e(_).created_at)]),n(c,m)}),n(t,o)},E=t=>{var o=et();n(t,o)};J(U,t=>{var o;((o=e(i))==null?void 0:o.status)!="deleted"?t(D):t(E,!1)})}N(u),n(v,u),B()}export{pt as component};
