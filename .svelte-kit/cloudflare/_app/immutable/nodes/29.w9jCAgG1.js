import"../chunks/Bg9kRutz.js";import{p as te,a as n,a6 as re,u as se,f as le,g as a,t as B,b as ie,$ as oe,c as d,d as s,s as o,e as y,r as u}from"../chunks/CIC73nbL.js";import{s as ne}from"../chunks/zPX_AMPA.js";import{t as v,a as p}from"../chunks/D1sabymj.js";import{h as me}from"../chunks/CZBN_KMn.js";import{a as de}from"../chunks/BdK7rzmN.js";import{b as c,r as m}from"../chunks/pfHeeLMb.js";import{b as ue}from"../chunks/26D3B16x.js";import{b as F}from"../chunks/CpZvCGMu.js";import{p as b}from"../chunks/D8QYH9wd.js";import{i as pe}from"../chunks/QnRASlD3.js";import{e as ce}from"../chunks/4DH-dQQX.js";import{P as ve}from"../chunks/h0YdFdS4.js";import"../chunks/BadVv_ud.js";import{N as fe}from"../chunks/BniDsu-1.js";import{R as be}from"../chunks/Bag0UgaA.js";import{A as _e}from"../chunks/jJ5yvjTe.js";var ge=v("<span>create profile</span>"),he=v("<span>Try Another Username</span>"),xe=v("<span>That Username is already taken, but you can use it for your Display Name. <br> <br> Your Display Name is what other people on the site will actually see.</span>"),ye=v("<span>Profiled created!</span>"),we=v("<span> </span>"),Ie=v('<div class="panel" id="profile-info"><!> <div class="form-wrapper svelte-427bvk"><form id="account-data" class="form-column" method="POST" action="?/create"><label class="text-label" for="email" form="account-data">Email</label> <input class="text" type="text" name="email" id="email" form="account-data" disabled> <div class="label-group"><label class="text-label" for="username" form="account-data">Username</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="username" id="username" form="account-data" required> <div class="label-group"><label class="text-label" for="display-name">Display name</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="display-name" id="display-name" form="account-data" required> <label class="text-label" for="description">about me</label> <textarea id="about" name="about" rows="3" cols="1" maxlength="140" spellcheck="true"></textarea> <label class="text-label" for="website">Website</label> <input class="text" type="url" name="website" id="website"> <input type="hidden" name="avatarItem" id="avatarItem"> <input type="hidden" name="avatarUrl" id="avatarUrl"> <input type="hidden" name="avatarMbid" id="avatarMbid"></form> <div class="form-column"><label class="text-label" for="avatarUrl">Avatar</label> <!> <div class="actions svelte-427bvk"><button class="double-border-top" type="submit" form="account-data" formaction="?/create"><div class="inner-border">submit</div></button></div></div></div></div> <!> <!>',1);function We(K,f){te(f,!0);const L=f.data.email;let w=n(""),_=n(""),Q="",V="",D=n(!1),l=n(b({})),R=5,g=n(0),S=n(null),I=n(!1),C=y(()=>{var e;return((e=a(l))==null?void 0:e.avatar_url)??""}),X=y(()=>{var e,r,t,i,x,z;return{img_url:a(C),last_fm_img_url:(e=a(l))==null?void 0:e.last_fm_img_url,artist_name:(r=a(l))==null?void 0:r.artist_name,artist_mbid:(t=a(l))==null?void 0:t.artist_mbid,release_group_name:(i=a(l))==null?void 0:i.release_group_name,release_group_mbid:(x=a(l))==null?void 0:x.release_group_mbid,label:(z=a(l))==null?void 0:z.label}}),Z=y(()=>{var e;return((e=f.form)==null?void 0:e.success)==!1}),O=y(()=>{var e,r;return(e=f.form)!=null&&e.success?(r=f.form)==null?void 0:r.success:!1});re(()=>{pe()}),se(()=>{a(O)&&(o(g,b(R)),setInterval(()=>o(g,a(g)-1),1e3))});var E=Ie();me(e=>{oe.title=`
		Create Profile
	`});var T=le(E),G=d(T);ve(G,{headerText:r=>{var t=ge();p(r,t)}});var H=s(G,2),h=d(H),P=s(d(h),2);m(P),c(P,L);var A=s(P,4);m(A);var M=s(A,4);m(M);var N=s(M,4);ue(N),c(N,Q);var U=s(N,4);m(U),c(U,V);var k=s(U,2);m(k);var q=s(k,2);m(q);var J=s(q,2);m(J),u(h),de(h,(e,r)=>{var t;return(t=ce)==null?void 0:t(e,r)},()=>()=>(o(I,!0),async({update:e})=>{o(I,!1),await e()}));var W=s(h,2),Y=s(d(W),2);_e(Y,{get displayName(){return a(_)},get avatarUrl(){return a(C)},get avatarInfo(){return a(X)},get newItemAdded(){return a(D)},set newItemAdded(e){o(D,b(e))},get avatarItem(){return a(l)},set avatarItem(e){o(l,b(e))},get imgPromise(){return a(S)},set imgPromise(e){o(S,b(e))}});var $=s(Y,2),ee=d($);u($),u(W),u(H),u(T);var j=s(T,2);fe(j,{get showModal(){return a(Z)},headerText:t=>{var i=he();p(t,i)},message:t=>{var i=xe();p(t,i)},$$slots:{headerText:!0,message:!0}});var ae=s(j,2);be(ae,{get showModal(){return a(O)},get delay(){return R},redirectPath:"/about/guidelines",headerText:t=>{var i=ye();p(t,i)},message:t=>{var i=we(),x=d(i);u(i),B(()=>ne(x,`Automatically redirecting to our Community Guidelines in ${a(g)??""} seconds.`)),p(t,i)},$$slots:{headerText:!0,message:!0}}),B(e=>{var r;c(k,e),c(q,((r=a(l))==null?void 0:r.img_url)??null),c(J,a(l).release_group_mbid??null),ee.disabled=!(a(w)&&a(_))||a(I)},[()=>JSON.stringify(a(l))]),F(A,()=>a(w),e=>o(w,e)),F(M,()=>a(_),e=>o(_,e)),p(K,E),ie()}export{We as component};
