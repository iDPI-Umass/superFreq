import"../chunks/Bg9kRutz.js";import{p as Se,u as Re,a as T,c as i,d as a,t as O,b as Ae,aC as Ue,s as n,g as e,r as l,a2 as je,f as he,$ as Fe,e as ye,n as u}from"../chunks/CIC73nbL.js";import{s as Me}from"../chunks/zPX_AMPA.js";import{i as xe}from"../chunks/w9zPIjBD.js";import{k as we}from"../chunks/DifRGFGW.js";import{t as A,a as y,b as U}from"../chunks/D1sabymj.js";import{h as Ge}from"../chunks/CZBN_KMn.js";import{s as Te,r as h,b as j}from"../chunks/pfHeeLMb.js";import{d as Oe,e as ke,b as Ke}from"../chunks/26D3B16x.js";import{b as Qe,a as S}from"../chunks/CpZvCGMu.js";import{p as f}from"../chunks/D8QYH9wd.js";import{C as Ve}from"../chunks/CbEe7K_5.js";import{T as Pe}from"../chunks/D2aXMXfx.js";import{I as We}from"../chunks/ohR4yWQn.js";import{P as Ze}from"../chunks/h0YdFdS4.js";import{s as Ce}from"../chunks/ChdiFDjO.js";import{a as $e}from"../chunks/BdK7rzmN.js";import{b as et}from"../chunks/CRtoN-tp.js";import{p as Ie}from"../chunks/Cu7UW-DA.js";import{e as tt}from"../chunks/4DH-dQQX.js";function at(M,o,v,k){o(!1),e(v).close(),k(null)}function it(M,o,v){n(o,!0),Promise.resolve(v()).then(()=>{n(o,!1)})}var lt=A('<dialog class="notification svelte-1p4us4r" aria-label="notification modal"><div class="dialog-header"><h1 class="notification"><!></h1></div> <p class="notification"><!></p> <div class="options svelte-1p4us4r"><form method="POST"><button class="standard" type="submit"> </button></form> <button class="standard" aria-label="close modal" formmethod="dialog">cancel</button></div></dialog>');function ot(M,o){Se(o,!0);let v=Ie(o,"showModal",15),k=Ie(o,"success",7,null),b=T(void 0),m=T(!1);Re(()=>{e(b).addEventListener("click",p=>{const _=e(b).getBoundingClientRect();(p.clientX<_.left||p.clientX>_.right||p.clientY<_.top||p.clientY>_.bottom)&&e(b).close()}),e(b)&&v()&&e(b).showModal(),e(b)&&!v()&&e(b).close()});var P=lt();ke("keydown",Ue,p=>{p.key});var E=i(P),q=i(E),z=i(q);Ce(z,()=>o.headerText),l(q),l(E);var g=a(E,2),D=i(g);Ce(D,()=>o.message??je),l(g);var B=a(g,2),r=i(B),C=i(r);C.__click=[it,m,k];var x=i(C,!0);l(C),l(r),$e(r,p=>{var _;return(_=tt)==null?void 0:_(p)});var I=a(r,2);I.__click=[at,v,b,k],l(B),l(P),et(P,p=>n(b,p),()=>e(b)),O(()=>{Te(r,"action",o.formAction),Te(C,"aria-label",`submit ${o.buttonText??""}`),C.disabled=e(m),Me(x,o.buttonText),I.disabled=e(m)}),ke("close",P,()=>v(!1)),y(M,P),Ae()}Oe(["click"]);var rt=A("<span>edit collection</span>"),st=A('<input type="hidden" name="collection-contents">'),nt=A('<input type="hidden" name="deleted-items">'),dt=A("<u>Open</u> collections can be viewed and edited by anyone. <br> <br> <u>Public</u> collections can be viewed by anyone, but only edited by you. <br> <br> <u>Private</u> collections can only be viewed and edited by you.",1),ct=A('<fieldset><div class="label-group"><legend>view sort</legend> <!></div> <ul><li><input class="radio" type="radio" name="view-sort" id="view-sort"> <label for="default">default</label></li> <li><input class="radio" type="radio" name="view-sort" id="view-sort"> <label for="reverse">reverse</label></li> <li><input class="radio" type="radio" name="view-sort" id="view-sort"> <label for="artist-asc">artists a --> z</label></li> <li><input class="radio" type="radio" name="view-sort" id="view-sort"> <label for="artist-desc">artists z --> a</label></li></ul></fieldset> <fieldset><div class="label-group"><legend>Status of collection</legend> <!></div> <ul><li><input class="radio" type="radio" name="status" id="open"> <label for="open">open</label></li> <li><input class="radio" type="radio" name="status" id="public"> <label for="public">public</label></li> <li><input class="radio" type="radio" name="status" id="private"> <label for="private">private</label></li></ul></fieldset>',1),ut=(M,o)=>n(o,!0),vt=A('<div class="collection-container"><!> <form class="horizontal" method="POST" action="?/updateCollection"><div class="form-column"><div class="label-group"><label class="text-label" for="collection-title">collection name</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="collection-title" id="collection-title" required> <input type="hidden" name="status"> <!> <!> <!> <!></div> <div class="form-column"><label class="text-label" for="description">Collection Description</label> <textarea id="description" name="description" rows="10" cols="1" spellcheck="true" required></textarea> <div class="collection-info-button-spacing"><button type="button" class="double-border-top"><div class="inner-border">delete collection</div></button> <button class="double-border-top" formAction="?/updateCollection"><div class="inner-border">save edits</div></button></div></div></form> <!> <div class="bottom-double-border svelte-gc6ymb"></div></div> <!> <div class="buffer svelte-gc6ymb"></div>',1);function Et(M,o){Se(o,!0);const v=[],k=[];let b=o.data,m=f(b.collection);const{sessionUserId:P,collectionId:E,infoBoxText:q}=o.data;let z=T(null);const g=f(m==null?void 0:m.info);let D=T(f(g.title)),B=g.type,r=T(f(g.status)),C=f(g.description_text),x=T(f(g.default_view_sort)),I=T(f(m==null?void 0:m.collectionContents)),p=T(!1),_=T(f(m==null?void 0:m.deletedCollectionContents));const De=ye(()=>P==g.owner_id);let F=T(!1);var re=vt();Ge(t=>{O(()=>Fe.title=`
		Edit ${g.title??""}
	`)});var G=he(re),se=i(G);Ze(se,{headerText:c=>{var d=rt();y(c,d)}});var K=a(se,2),Q=i(K),V=a(i(Q),2);h(V);var W=a(V,2);h(W);var ne=a(W,2);we(ne,()=>{var t;return(t=e(I))==null?void 0:t.length},t=>{var c=st();h(c),O(d=>j(c,d),[()=>JSON.stringify(e(I))]),y(t,c)});var de=a(ne,2);we(de,()=>{var t;return(t=e(_))==null?void 0:t.length},t=>{var c=nt();h(c),O(d=>j(c,d),[()=>JSON.stringify(e(_))]),y(t,c)});var ce=a(de,2);{var Ee=t=>{var c=ct(),d=he(c),w=i(d),Xe=a(i(w),2);Pe(Xe,{children:(s,Le)=>{u();var oe=U("This how your collection is sorted by default when other users view it. This does not change or effect the order of the items in the editor below.");y(s,oe)}}),l(w);var pe=a(w,2),$=i(pe),Y=i($);h(Y),Y.value=(Y.__value="default")==null?"":"default",u(2),l($);var ee=a($,2),J=i(ee);h(J),J.value=(J.__value="reverse")==null?"":"reverse",u(2),l(ee);var te=a(ee,2),N=i(te);h(N),N.value=(N.__value="artist_asc")==null?"":"artist_asc",u(2),l(te);var fe=a(te,2),X=i(fe);h(X),X.value=(X.__value="artist_desc")==null?"":"artist_desc",u(2),l(fe),l(pe),l(d);var be=a(d,2),ae=i(be),He=a(i(ae),2);Pe(He,{children:(s,Le)=>{var oe=dt();u(13),y(s,oe)}}),l(ae);var _e=a(ae,2),ie=i(_e),H=i(ie);h(H),H.value=(H.__value="open")==null?"":"open",u(2),l(ie);var le=a(ie,2),L=i(le);h(L),L.value=(L.__value="public")==null?"":"public",u(2),l(le);var ge=a(le,2),R=i(ge);h(R),R.value=(R.__value="private")==null?"":"private",u(2),l(ge),l(_e),l(be),S(v,[],Y,()=>e(x),s=>n(x,s)),S(v,[],J,()=>e(x),s=>n(x,s)),S(v,[],N,()=>e(x),s=>n(x,s)),S(v,[],X,()=>e(x),s=>n(x,s)),S(k,[],H,()=>e(r),s=>n(r,s)),S(k,[],L,()=>e(r),s=>n(r,s)),S(k,[],R,()=>e(r),s=>n(r,s)),y(t,c)};xe(ce,t=>{e(De)&&t(Ee)})}var qe=a(ce,2);{var ze=t=>{We(t,{mode:"inline",children:(c,d)=>{u();var w=U();O(()=>Me(w,q[e(r)])),y(c,w)},$$slots:{default:!0}})};xe(qe,t=>{e(r)&&e(r)!="public"&&t(ze)})}l(Q);var ue=a(Q,2),Z=a(i(ue),2);Ke(Z);var ve=a(Z,2),me=i(ve);me.__click=[ut,F];var Be=a(me,2);l(ve),l(ue),l(K);var Ye=a(K,2);Ve(Ye,{collectionType:B,get collectionStatus(){return e(r)},get collectionItems(){return e(I)},set collectionItems(t){n(I,f(t))},get deletedItems(){return e(_)},set deletedItems(t){n(_,f(t))},get itemAdded(){return e(p)},set itemAdded(t){n(p,f(t))},get imgPromise(){return e(z)},set imgPromise(t){n(z,f(t))}}),u(2),l(G);var Je=a(G,2);const Ne=ye(()=>{var t;return(t=o.form)==null?void 0:t.success});ot(Je,{formAction:"?/deleteCollection",buttonText:"delete collection",get success(){return e(Ne)},get showModal(){return e(F)},set showModal(d){n(F,f(d))},headerText:d=>{u();var w=U("delete collection?");y(d,w)},message:d=>{u();var w=U("Do you want to delete this collection? You will never be able to access it again.");y(d,w)},$$slots:{headerText:!0,message:!0}}),u(2),O(()=>{j(W,e(r)),j(Z,C),Be.disabled=!(e(r)&&e(D))}),Qe(V,()=>e(D),t=>n(D,t)),y(M,re),Ae()}Oe(["click"]);export{Et as component};
