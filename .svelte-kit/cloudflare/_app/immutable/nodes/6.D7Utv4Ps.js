import"../chunks/Bg9kRutz.js";import{p as it,b as _t,$ as pt,d as r,c as o,g as t,e as mt,r as s,s as y,a as U,t as u,f as z,n as b}from"../chunks/CIC73nbL.js";import{s as i}from"../chunks/zPX_AMPA.js";import{i as x}from"../chunks/w9zPIjBD.js";import{e as ut,i as ht}from"../chunks/ChSzfhcg.js";import{t as p,a as c,b as j}from"../chunks/D1sabymj.js";import{h as gt}from"../chunks/CZBN_KMn.js";import{a as ft}from"../chunks/BdK7rzmN.js";import{r as V,s as A,b as W}from"../chunks/pfHeeLMb.js";import{d as bt}from"../chunks/26D3B16x.js";import{e as xt}from"../chunks/4DH-dQQX.js";import{p as jt}from"../chunks/DOrtXGrH.js";import{N as X}from"../chunks/BniDsu-1.js";var yt=p("<a> </a>"),Tt=(T,_)=>y(_,!0),$t=p('<button class="more-info svelte-48cl4j">post changelog</button> <!>',1),kt=p("<!> <a> </a>",1),Mt=(T,_)=>y(_,!0),wt=p('<button class="more-info svelte-48cl4j">moderation log</button> <!>',1),Ot=p('<tr class="svelte-48cl4j"><td class="svelte-48cl4j"> </td><td class="svelte-48cl4j"> </td><td class="svelte-48cl4j"><a> </a></td><td class="svelte-48cl4j"><!></td><td class="svelte-48cl4j"><!></td><td class="svelte-48cl4j"><!> <form method="POST" action="?/update"><input type="hidden" name="item-id" id="item-id"> <input type="hidden" name="item-type" id="item-type"> <textarea name="notes" id="notes"></textarea> <div class="cell-row svelte-48cl4j"><div class="input-column svelte-48cl4j"><label for="resolved">archive</label> <input type="checkbox" name="resolved" id="resolved"></div> <button class="standard" type="submit">update</button></div></form></td></tr>'),Nt=p('<div class="panel svelte-48cl4j"><h1>Moderation Dashboard</h1> <table class="svelte-48cl4j"><thead><tr><th scope="col" class="svelte-48cl4j">Time</th><th scope="col" class="svelte-48cl4j">Type</th><th scope="col" class="svelte-48cl4j">User</th><th scope="col" class="svelte-48cl4j">Target User</th><th scope="col" class="svelte-48cl4j">Target Post</th><th scope="col" class="svelte-48cl4j">Moderate</th></tr></thead><tbody class="svelte-48cl4j"></tbody></table></div>');function Ht(T,_){it(_,!0);let Y=mt(()=>_.data.queueItems),$=U(!1);function Z(m){if(m.target_user_id)return"user";if(m.target_post_id)return"post"}let B=U(!1),E=U(!1);var k=Nt();gt(m=>{pt.title=`
        Moderation Dashboard
    `});var F=r(o(k),2),G=r(o(F));ut(G,21,()=>t(Y),ht,(m,e)=>{var M=Ot(),w=o(M),tt=o(w,!0);s(w);var O=r(w),et=o(O,!0);s(O);var N=r(O),P=o(N),at=o(P,!0);s(P),s(N);var S=r(N),st=o(S);{var rt=a=>{var l=yt(),n=o(l,!0);s(l),u(()=>{A(l,"href",`/user/${t(e).target_username??""}`),i(n,t(e).target_username)}),c(a,l)};x(st,a=>{t(e).target_username&&a(rt)})}s(S);var q=r(S),ot=o(q);{var lt=a=>{var l=kt(),n=z(l);{var J=d=>{var v=$t(),g=z(v);g.__click=[Tt,E];var dt=r(g,2);X(dt,{get showModal(){return t(E)},headerText:L=>{b();var f=j("Post Changelog");c(L,f)},message:L=>{b();var f=j();u(vt=>i(f,vt),[()=>JSON.stringify(t(e).post_changelog)]),c(L,f)},$$slots:{headerText:!0,message:!0}}),c(d,v)};x(n,d=>{Object.keys(t(e).post_changelog).length>0&&d(J)})}var h=r(n,2),R=o(h);s(h),u(d=>{A(h,"href",`/posts/${t(e).target_post_username??""}/now-playing/${d??""}`),i(R,`${t(e).target_post_username??""}: ${t(e).target_post_timestamp??""}`)},[()=>jt(t(e).target_post_timestamp)]),c(a,l)};x(ot,a=>{t(e).target_post_timestamp&&a(lt)})}s(q);var H=r(q),K=o(H);{var nt=a=>{var l=wt(),n=z(l);n.__click=[Mt,B];var J=r(n,2);X(J,{get showModal(){return t(B)},headerText:d=>{b();var v=j("Moderation Log");c(d,v)},message:d=>{b();var v=j();u(g=>i(v,g),[()=>JSON.stringify(t(e).moderation_log)]),c(d,v)},$$slots:{headerText:!0,message:!0}}),c(a,l)};x(K,a=>{Object.keys(t(e).moderation_log).length>0&&a(nt)})}var C=r(K,2),D=o(C);V(D);var I=r(D,2);V(I);var Q=r(I,4),ct=r(o(Q),2);s(Q),s(C),ft(C,(a,l)=>{var n;return(n=xt)==null?void 0:n(a,l)},()=>()=>(y($,!0),async({update:a})=>{await a(),y($,!1)})),s(H),s(M),u(a=>{i(tt,t(e).timestamp),i(et,t(e).type),A(P,"href",`/user/${t(e).username??""}`),i(at,t(e).username),W(D,t(e).moderation_item_id),W(I,a),ct.disabled=t($)},[()=>Z(t(e))]),c(m,M)}),s(G),s(F),s(k),c(T,k),_t()}bt(["click"]);export{Ht as component};
