import"./Bg9kRutz.js";import{p as ue,u as pe,a as re,g as e,d as a,t as le,b as ce,e as oe,s as T,aC as _e,c as s,a2 as ve,r as o,f as H,n as y}from"./CIC73nbL.js";import{s as te}from"./zPX_AMPA.js";import{i as S}from"./w9zPIjBD.js";import{t as I,a as h,b as ge}from"./D1sabymj.js";import{r as v,b as be}from"./pfHeeLMb.js";import{d as me,e as ne}from"./26D3B16x.js";import{b as w,a as ae}from"./CpZvCGMu.js";import{p as P}from"./D8QYH9wd.js";import{p as L}from"./Cu7UW-DA.js";import"./QnRASlD3.js";import{G as fe,C as xe}from"./DifRGFGW.js";import{M as ye}from"./BadVv_ud.js";import{s as he}from"./ChdiFDjO.js";import{b as ke}from"./CRtoN-tp.js";import{l as we}from"./DOrtXGrH.js";var Te=(j,r)=>e(r).close(),Ie=I('<div class="label-group"><label class="text-label" for="recording">track</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="recording" id="recording" required>',1),Ce=I('<span class="label-explainer">* required</span>'),Me=I('<div class="label-group"><label class="text-label" for="release_group">album</label> <!></div> <input class="text" type="text" name="release_group" id="release_group" required> <label class="text-label" for="release_date">release date</label> <input class="text" type="text" name="release_date" id="release_date"> <label class="text-label" for="label">label</label> <input class="text" type="text" name="label" id="label">',1),qe=I('<div class="label-group"><label class="text-label" for="episode_title">episode / dj mix title</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="episode_title" id="episode_title" required> <div class="label-group"><label class="text-label" for="show_title">show name / mix series</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="show_title" id="show_title" required> <div class="label-group"><label class="text-label" for="listen_url">listen URL</label></div> <input class="text" type="text" name="listen_url" id="listen_url">',1),Ae=(j,r)=>r(),Le=I('<dialog aria-label="modal" class="svelte-ayvj0y"><div class="dialog-header svelte-ayvj0y"><h2 class="svelte-ayvj0y"><!></h2> <button aria-label="close modal" formmethod="dialog" class="svelte-ayvj0y">x</button></div> <form class="vertical"><input type="hidden" name="item-type" id="item-type"> <div class="label-group"><label class="text-label" for="artist">artist</label> <span class="label-explainer">* required</span></div> <input class="text" type="text" name="artist" id="artist" required> <!> <!> <!> <button class="standard" type="button">add item</button></form></dialog>');function Pe(j,r){ue(r,!0);let k=L(r,"showModal",15,!1),C=L(r,"items",27,()=>P([])),u=re(void 0);pe(()=>{e(u).addEventListener("click",t=>{const c=e(u).getBoundingClientRect();(t.clientX<c.left||t.clientX>c.right||t.clientY<c.top||t.clientY>c.bottom)&&e(u).close()}),e(u)&&k()&&e(u).showModal(),e(u)&&!k()&&e(u).close()});let M={item_type:null,artist_name:null,release_group_name:null,recording_name:null,release_date:null,label:null,episode_title:null,show_title:null,listen_url:null,item_position:null,id:null},l=re(P(M)),U=oe(()=>C().length??0);function K(){e(l).item_type=r.itemType;const t=e(U);e(l).item_position=t,e(l).id=t,e(l).listen_url=d(e(l).listen_url)?e(l).listen_url:null,C().push(e(l)),T(l,P(M)),e(u).close()}function d(t){return we(t)?t:null}var f=Le();ne("keydown",_e,t=>{t.key});var E=s(f),q=s(E),N=s(q);he(N,()=>r.headerText??ve),o(q);var X=a(q,2);X.__click=[Te,u],o(E);var Y=a(E,2),z=s(Y);v(z);var B=a(z,4);v(B);var J=a(B,2);{var ie=t=>{var c=Ie(),g=a(H(c),2);v(g),w(g,()=>e(l).recording_name,x=>e(l).recording_name=x),h(t,c)};S(J,t=>{r.itemType=="recording"&&t(ie)})}var D=a(J,2);{var O=t=>{var c=Me(),g=H(c),x=a(s(g),2);{var n=p=>{var G=Ce();h(p,G)};S(x,p=>{r.itemType=="release_group"&&p(n)})}o(g);var i=a(g,2);v(i);var m=a(i,4);v(m);var _=a(m,4);v(_),w(i,()=>e(l).release_group_name,p=>e(l).release_group_name=p),w(m,()=>e(l).release_date,p=>e(l).release_date=p),w(_,()=>e(l).label,p=>e(l).label=p),h(t,c)};S(D,t=>{(r.itemType=="release_group"||r.itemType=="recording")&&t(O)})}var Q=a(D,2);{var V=t=>{var c=qe(),g=a(H(c),2);v(g);var x=a(g,4);v(x);var n=a(x,4);v(n),w(g,()=>e(l).episode_title,i=>e(l).episode_title=i),w(x,()=>e(l).show_title,i=>e(l).show_title=i),w(n,()=>e(l).listen_url,i=>e(l).listen_url=i),h(t,c)};S(Q,t=>{r.itemType=="episode"&&t(V)})}var Z=a(Q,2);Z.__click=[Ae,K],o(Y),o(f),ke(f,t=>T(u,t),()=>e(u)),le(()=>be(z,r.itemType)),ne("close",f,()=>k(!1)),w(B,()=>e(l).artist_name,t=>e(l).artist_name=t),h(j,f),ce()}me(["click"]);var je=I('<div class="form-column svelte-e1wkfd"><fieldset class="search svelte-e1wkfd"><legend>Add <!> to your collection</legend> <ul><li><input class="radio" type="radio" name="item-type" id="artist"> <label for="artist">artist</label></li> <li><input class="radio" type="radio" name="item-type" id="release_group"> <label for="release_group">album</label></li> <li><input class="radio" type="radio" name="item-type" id="recording"> <label for="recording">track</label></li> <li><input class="radio" type="radio" name="item-type" id="episode"> <label for="episode">Episode / DJ Mix</label></li></ul></fieldset></div>'),Ue=I('<div class="collection-search-bar"><span class="search-tooltip">search for <em> </em> to add info automatically</span> <!></div> <span class="or svelte-e1wkfd">— or —</span>',1),Ee=(j,r)=>T(r,!0),Be=I('<div class="collection-search"><!> <div class="form-column svelte-e1wkfd"><!> <span class="search-tooltip">add <em> </em> info yourself</span> <!> <div class="manual-add-button svelte-e1wkfd"><button class="double-border-top"><div class="inner-border"> </div></button></div></div></div> <div class="bottom-double-border"></div> <!>',1);function Ze(j,r){ue(r,!0);const k=[];let C=L(r,"mode",3,""),u=L(r,"collectionItems",31,()=>P([])),M=L(r,"deletedItems",31,()=>P([])),l=L(r,"itemAdded",15,!1),U=L(r,"imgPromise",15,null);const K={"":"...",artist:"artists",artists:"artists",release_group:"albums",release_groups:"albums",recording:"tracks",recordings:"tracks",episode:"episode",mix:"episode"};let d=re(P(C()??"")),f={"":"item",artist:"artist",artists:"artist",release_group:"album",release_groups:"album",recording:"track",recordings:"track",episode:"episode or mix",episodes:"episode or mix"},E={"":"",artist:"artists",artists:"artists",album:"release_groups",albums:"release_groups",release_group:"release_groups",release_groups:"release_groups",track:"recordings",tracks:"recordings",recording:"recordings",recordings:"recordings",episode:"episode",episodes:"episode",mix:"episode",mixes:"episode"},q=re(!1);var N=Be(),X=H(N),Y=s(X);{var z=n=>{var i=je(),m=s(i),_=s(m),p=a(s(_));xe(p,{get itemType(){return E[e(d)]}}),y(),o(_);var G=a(_,2),W=s(G),R=s(W);v(R),R.value=(R.__value="artist")==null?"":"artist",y(2),o(W);var F=a(W,2),b=s(F);v(b),b.value=(b.__value="release_group")==null?"":"release_group",y(2),o(F);var se=a(F,2),$=s(se);v($),$.value=($.__value="recording")==null?"":"recording",y(2),o(se);var de=a(se,2),ee=s(de);v(ee),ee.value=(ee.__value="episode")==null?"":"episode",y(2),o(de),o(G),o(m),o(i),ae(k,[],R,()=>e(d),A=>T(d,A)),ae(k,[],b,()=>e(d),A=>T(d,A)),ae(k,[],$,()=>e(d),A=>T(d,A)),ae(k,[],ee,()=>e(d),A=>T(d,A)),h(n,i)};S(Y,n=>{var i,m,_;!((i=C())!=null&&i.includes("artist"))&&!((m=C())!=null&&m.includes("release_group"))&&!((_=C())!=null&&_.includes("recording"))&&n(z)})}var B=a(Y,2),J=s(B);{var ie=n=>{var i=Ue(),m=H(i),_=s(m),p=a(s(_)),G=s(p,!0);o(p),y(),o(_);var W=a(_,2);const R=oe(()=>`search ${K[e(d)]}`),F=oe(()=>`search ${K[e(d)]}`);ye(W,{get searchCategory(){return E[e(d)]},get searchButtonText(){return e(R)},get searchPlaceholder(){return e(F)},mode:"collection",get addedItems(){return u()},set addedItems(b){u(b)},get deletedItems(){return M()},set deletedItems(b){M(b)},get newItemAdded(){return l()},set newItemAdded(b){l(b)},get imgPromise(){return U()},set imgPromise(b){U(b)}}),o(m),y(2),le(()=>te(G,f[e(d)])),h(n,i)};S(J,n=>{e(d)!="episode"&&n(ie)})}var D=a(J,2),O=a(s(D)),Q=s(O,!0);o(O),y(),o(D);var V=a(D,2);Pe(V,{get itemType(){return e(d)},get showModal(){return e(q)},set showModal(i){T(q,P(i))},get items(){return u()},set items(i){u(i)},headerText:i=>{y();var m=ge();le(()=>te(m,`manually add ${f[e(d)]??""}`)),h(i,m)},$$slots:{headerText:!0}});var Z=a(V,2),t=s(Z);t.__click=[Ee,q];var c=s(t),g=s(c);o(c),o(t),o(Z),o(B),o(X);var x=a(X,4);fe(x,{get collectionType(){return r.collectionType},get collectionStatus(){return r.collectionStatus},layout:"list",mode:"edit",get collectionContents(){return u()},set collectionContents(n){u(n)},get deletedItems(){return M()},set deletedItems(n){M(n)},get imgPromise(){return U()},set imgPromise(n){U(n)}}),le(()=>{te(Q,f[e(d)]),t.disabled=e(d)=="",te(g,`Add ${f[e(d)]??""} manually`)}),h(j,N),ce()}me(["click"]);export{Ze as C};
