import"./Bg9kRutz.js";import{f as S,p as je,u as rt,aC as it,d as v,s as L,a as ne,g as l,c as r,r as s,t as B,b as Be,n as E,e as oe}from"./CIC73nbL.js";import{s as W}from"./zPX_AMPA.js";import{i as x}from"./w9zPIjBD.js";import{d as X,a as i,t as h,b as Ve}from"./D1sabymj.js";import{r as Te,s as H,b as be}from"./pfHeeLMb.js";import{l as ce,s as de,p as D}from"./Cu7UW-DA.js";import{c as De}from"./D1rop58F.js";import{a as Ne}from"./BdK7rzmN.js";import{d as Ke,e as Fe,b as lt}from"./26D3B16x.js";import{p as Ie}from"./D8QYH9wd.js";import{b as nt}from"./CRtoN-tp.js";import{e as Ue}from"./4DH-dQQX.js";import"./69_IOA4Y.js";import"./CentS020.js";import{P as ct,a as dt,b as vt}from"./C8mJBUcg.js";import{c as ut,D as Ye,M as Xe,B as Ze}from"./B-_ULT65.js";import{I as ve,s as ue}from"./gG4CUbDX.js";import{e as mt,i as ft}from"./ChSzfhcg.js";import{L as _t}from"./acRpF1XP.js";import{N as pt}from"./BniDsu-1.js";import{d as gt}from"./DOrtXGrH.js";import{C as ht}from"./CBTFtqMS.js";import{I as bt}from"./t3XdKj5y.js";const yt={y:-8,start:.95,duration:200};function xt(n,e){const o=getComputedStyle(n),u=o.transform==="none"?"":o.transform,c={...yt,...e},p=(a,m,g)=>{const[f,_]=m,[w,U]=g;return(a-f)/(_-f)*(U-w)+w},t=a=>Object.keys(a).reduce((m,g)=>a[g]===void 0?m:`${m}${g}:${a[g]};`,"");return{duration:c.duration??200,delay:0,css:a=>{const m=p(a,[0,1],[c.y,0]),g=p(a,[0,1],[c.start,1]);return t({transform:`${u} translate3d(0, ${m}px, 0) scale(${g})`,opacity:a})},easing:ut}}function wt(n,e){const o=ce(e,["children","$$slots","$$events","$$legacy"]);ve(n,de({name:"ban"},()=>o,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m4.9 4.9 14.2 14.2"}]],children:(c,p)=>{var t=X(),a=S(t);ue(a,e,"default",{},null),i(c,t)},$$slots:{default:!0}}))}function kt(n,e){const o=ce(e,["children","$$slots","$$events","$$legacy"]);ve(n,de({name:"circle"},()=>o,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}]],children:(c,p)=>{var t=X(),a=S(t);ue(a,e,"default",{},null),i(c,t)},$$slots:{default:!0}}))}function Pt(n,e){const o=ce(e,["children","$$slots","$$events","$$legacy"]);ve(n,de({name:"ellipsis"},()=>o,{iconNode:[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]],children:(c,p)=>{var t=X(),a=S(t);ue(a,e,"default",{},null),i(c,t)},$$slots:{default:!0}}))}function Le(n,e){const o=ce(e,["children","$$slots","$$events","$$legacy"]);ve(n,de({name:"flag"},()=>o,{iconNode:[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15"}]],children:(c,p)=>{var t=X(),a=S(t);ue(a,e,"default",{},null),i(c,t)},$$slots:{default:!0}}))}function Tt(n,e){const o=ce(e,["children","$$slots","$$events","$$legacy"]);ve(n,de({name:"pen-line"},()=>o,{iconNode:[["path",{d:"M12 20h9"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"}]],children:(c,p)=>{var t=X(),a=S(t);ue(a,e,"default",{},null),i(c,t)},$$slots:{default:!0}}))}function Mt(n,e){const o=ce(e,["children","$$slots","$$events","$$legacy"]);ve(n,de({name:"trash-2"},()=>o,{iconNode:[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]],children:(c,p)=>{var t=X(),a=S(t);ue(a,e,"default",{},null),i(c,t)},$$slots:{default:!0}}))}function St(n,e,o){e(!e()),L(o,!l(o))}function Oe(n,e,o){L(e,!1),o(null)}function Nt(n,e,o){L(e,!0),Promise.resolve(o()).then(()=>{L(e,!1)})}var Ut=(n,e)=>e("blockUser"),zt=h('<button class="popover-item"><!> <span class="descriptor">block user</span></button>'),Ct=(n,e)=>e("unblockUser"),It=h('<button class="popover-item"><!> <span class="descriptor">unblock user</span></button>'),qt=(n,e)=>e("reportUser"),At=h('<button class="popover-item"><!> <span class="descriptor">report user</span></button>'),Dt=(n,e)=>e("reportUser"),Lt=h('<button class="popover-item" disabled><!> <span class="descriptor">user reported</span></button>'),Ot=h("<!> <!>",1),jt=(n,e)=>e("deletePost"),Bt=h('<button class="popover-item"><!> <span class="descriptor">edit</span></button> <button class="popover-item"><!> <span class="descriptor">delete</span></button>',1),Rt=(n,e)=>e("flagPost"),Et=h('<button class="popover-item"><!> <span class="descriptor">flag post</span></button>'),Ht=h("<!> <!>",1),Vt=h('<h2> </h2> <p> </p> <div class="dialog-options svelte-1g8jhne"><button aria-label="close modal" formmethod="dialog" class="standard svelte-1g8jhne">cancel</button> <button aria-label="submit" type="submit" class="standard svelte-1g8jhne"> </button></div>',1),Ft=h('<p> </p> <div class="dialog-options svelte-1g8jhne"><button aria-label="close modal" formmethod="dialog" class="standard svelte-1g8jhne">close</button></div>',1),Yt=h('<p>Something went wrong</p> <div class="dialog-options svelte-1g8jhne"><button aria-label="close modal" formmethod="dialog" class="standard svelte-1g8jhne">close</button></div>',1),Xt=h('<!> <dialog aria-label="modal" class="svelte-1g8jhne"><form method="POST"><input type="hidden" id="profile-user-id" name="profile-user-id"> <input type="hidden" id="post-id" name="post-id"> <!></form></dialog>',1);function Ge(n,e){je(e,!0);let o=D(e,"editState",15,!1),u=D(e,"mode",7),c=D(e,"profileUserId",3,null),p=D(e,"blocked",3,!1),t=D(e,"flagged",3,!1),a=D(e,"postId",3,null),m=D(e,"success",7),g=ne(!1),f=ne(!1),_;const w={blockUser:"Block uesr?",deletePost:"Delete post?",flagPost:"Flag post?",reportUser:"Report user?",unblockUser:"Unblock user?"},U={blockUser:"This user will no longer be able to see or interact with your profile data, posts, or private collections. They will be able to see your public and open collections.",deletePost:"This post will be permanently removed.",flagPost:"This will notify site admins that something about this post is fishy.",reportUser:"This will notify site admins that something about this user is fishy.",unblockUser:"This grants this user the same permission to see your activity that everyone else has."},b={blockUser:"User blocked",deletePost:"Post deleted",flagPost:"Post flagged",reportUser:"User reported",unblockUser:"User unblocked"},P={blockUser:"block",deletePost:"delete",flagPost:"flag",reportUser:"report",unblockUser:"unblock"},T={blockUser:"block",deletePost:"delete",flagPost:"flagPost",reportUser:"flag",unblockUser:"unblock"},A={blockUser:"?/blockUser",deletePost:"?/deletePost",flagPost:"?/flagPost",reportUser:"?/reportUser",unblockUser:"?/blockUser"};let z=ne(void 0);function k(y){L(g,!l(g)),L(z,Ie(y)),L(f,!0)}let C=ne(!1);rt(()=>{_.addEventListener("click",y=>{const q=_.getBoundingClientRect();(y.clientX<q.left||y.clientX>q.right||y.clientY<q.top||y.clientY>q.bottom)&&_.close()}),_&&l(f)==!0&&_.showModal(),_&&!l(f)&&_.close()});var $=Xt();Fe("keydown",it,y=>{y.key==="Escape"&&_.close()});var Z=S($);De(Z,()=>vt,(y,q)=>{q(y,{get open(){return l(g)},set open(V){L(g,Ie(V))},children:(V,we)=>{var O=Ht(),G=S(O);De(G,()=>ct,(R,j)=>{j(R,{children:(K,Me)=>{Pt(K,{size:"16",color:"var(--freq-color-text-muted)"})},$$slots:{default:!0}})});var J=v(G,2);De(J,()=>dt,(R,j)=>{j(R,{transition:xt,children:(K,Me)=>{var ze=X(),Ce=S(ze);{var qe=fe=>{var pe=Ot(),ge=S(pe);{var ke=M=>{var I=zt();I.__click=[Ut,k];var le=r(I);wt(le,{size:"16",color:"var(--freq-color-text-muted)"}),E(2),s(I),i(M,I)},te=(M,I)=>{{var le=d=>{var N=It();N.__click=[Ct,k];var he=r(N);kt(he,{size:"16",color:"var(--freq-color-text-muted)"}),E(2),s(N),i(d,N)};x(M,d=>{p()&&d(le)},I)}};x(ge,M=>{p()?M(te,!1):M(ke)})}var _e=v(ge,2);{var ae=M=>{var I=At();I.__click=[qt,k];var le=r(I);Le(le,{size:"16",color:"var(--freq-color-text-muted)"}),E(2),s(I),i(M,I)},ie=(M,I)=>{{var le=d=>{var N=Lt();N.__click=[Dt,k];var he=r(N);Le(he,{size:"16",color:"var(--freq-color-text-muted)"}),E(2),s(N),i(d,N)};x(M,d=>{t()&&d(le)},I)}};x(_e,M=>{t()?M(ie,!1):M(ae)})}i(fe,pe)},Ae=(fe,pe)=>{{var ge=te=>{var _e=Bt(),ae=S(_e);ae.__click=[St,o,g];var ie=r(ae);Tt(ie,{size:"16",color:"var(--freq-color-text-muted)"}),E(2),s(ae);var M=v(ae,2);M.__click=[jt,k];var I=r(M);Mt(I,{size:"16",color:"var(--freq-color-text-muted)"}),E(2),s(M),i(te,_e)},ke=(te,_e)=>{{var ae=ie=>{var M=Et();M.__click=[Rt,k];var I=r(M);Le(I,{size:"16",color:"var(--freq-color-text-muted)"}),E(2),s(M),i(ie,M)};x(te,ie=>{u("postMenu")&&ie(ae)},_e)}};x(fe,te=>{u()=="sessionUserPostMenu"?te(ge):te(ke,!1)},pe)}};x(Ce,fe=>{u()=="profileMenu"?fe(qe):fe(Ae,!1)})}i(K,ze)},$$slots:{default:!0}})}),i(V,O)},$$slots:{default:!0}})});var ee=v(Z,2),Y=r(ee),se=r(Y);Te(se);var re=v(se,2);Te(re);var me=v(re,2);{var ye=y=>{var q=Vt(),V=S(q),we=r(V,!0);s(V);var O=v(V,2),G=r(O,!0);s(O);var J=v(O,2),R=r(J);R.__click=[Oe,f,m];var j=v(R,2);j.__click=[Nt,C,m];var K=r(j,!0);s(j),s(J),B(()=>{W(we,w[l(z)]),W(G,U[l(z)]),R.disabled=l(C),H(j,"formaction",A[l(z)]),j.disabled=l(C),W(K,P[l(z)])}),i(y,q)},xe=(y,q)=>{{var V=O=>{var G=Ft(),J=S(G),R=r(J,!0);s(J);var j=v(J,2),K=r(j);K.__click=[Oe,f,m],s(j),B(()=>W(R,b[l(z)])),i(O,G)},we=(O,G)=>{{var J=R=>{var j=Yt(),K=v(S(j),2),Me=r(K);Me.__click=[Oe,f,m],s(K),i(R,j)};x(O,R=>{m()==!1&&R(J)},G)}};x(y,O=>{m()==!0?O(V):O(we,!1)},q)}};x(me,y=>{m()==null?y(ye):y(xe,!1)})}s(Y),Ne(Y,y=>{var q;return(q=Ue)==null?void 0:q(y)}),s(ee),nt(ee,y=>_=y,()=>_),B(()=>{H(Y,"id",T[l(z)]),H(Y,"action",A[l(z)]),be(se,c()),be(re,a()),H(re,"form",T[l(z)])}),Fe("close",ee,()=>L(f,!1)),i(n,$),Be()}Ke(["click"]);function Zt(n,e){e(!e())}var Gt=h('<form method="POST" name="editPostText" class="vertical" action="?/editPost"><input id="post-data" name="post-data" type="hidden"> <textarea cols="1" rows="4" id="edited-text" name="edited-text" spellcheck="true" required></textarea> <div class="edit-submit-options svelte-1hf0syz"><button class="standard">cancel</button> <button type="submit" class="standard" formaction="?/editPost">submit edit</button></div></form>');function Jt(n,e){je(e,!0);let o=D(e,"editState",15,!1),u=ne(!1);var c=Gt(),p=r(c);Te(p);var t=v(p,2);lt(t);var a=v(t,2),m=r(a);m.__click=[Zt,o];var g=v(m,2);s(a),s(c),Ne(c,(f,_)=>{var w;return(w=Ue)==null?void 0:w(f,_)},()=>()=>(L(u,!0),async({update:f})=>{L(u,!1),await f()})),B(f=>{be(p,f),be(t,e.postData.text),g.disabled=l(u)},[()=>JSON.stringify(e.postData)]),i(n,c),Be()}Ke(["click"]);function Je(n,e){const o=ce(e,["children","$$slots","$$events","$$legacy"]);ve(n,de({name:"heart"},()=>o,{iconNode:[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}]],children:(c,p)=>{var t=X(),a=S(t);ue(a,e,"default",{},null),i(c,t)},$$slots:{default:!0}}))}var Kt=h("<span> </span>"),Qt=h('<!> <span class="descriptor">like</span>',1),Wt=h('<!> <span class="descriptor">liked</span>',1),$t=h('<form method="POST" id="submitReaction" action="?/submitReaction"><input type="hidden" name="post-id" id="post-id"> <input type="hidden" name="reaction-type" id="reaction-type" value="like"> <button class="like" formaction="?/submitReaction"><div class="row-group-icon-description"><!> <!></div></button></form>');function ea(n,e){let o=D(e,"reactionCount",3,0),u=ne(!1);var c=$t(),p=r(c);Te(p);var t=v(p,2),a=v(t,2),m=r(a),g=r(m);{var f=b=>{var P=Kt(),T=r(P,!0);s(P),B(()=>W(T,o())),i(b,P)};x(g,b=>{o()>0&&b(f)})}var _=v(g,2);{var w=b=>{var P=Qt(),T=S(P);Je(T,{class:"icon",size:"16",color:"var(--freq-color-text-muted)"}),E(2),i(b,P)},U=b=>{var P=Wt(),T=S(P);Je(T,{class:"icon",size:"16",color:"var(--freq-color-text-muted)",fill:"var(--freq-color-text-muted)"}),E(2),i(b,P)};x(_,b=>{e.reactionActive?b(U,!1):b(w)})}s(m),s(a),s(c),Ne(c,(b,P)=>{var T;return(T=Ue)==null?void 0:T(b,P)},()=>()=>(L(u,!0),async({update:b})=>{await b(),L(u,!1)})),B(()=>{be(p,e.postId),a.disabled=l(u)}),i(n,c)}function ta(n,e){const o=ce(e,["children","$$slots","$$events","$$legacy"]);ve(n,de({name:"save"},()=>o,{iconNode:[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]],children:(c,p)=>{var t=X(),a=S(t);ue(a,e,"default",{},null),i(c,t)},$$slots:{default:!0}}))}var aa=h('<li class="list-modal"><div class="list-modal-li-row"><div class="list-modal-li-row-button-spacing"><form method="POST" action="?/saveToCollection"><input type="hidden" id="collection-id" name="collection-id"> <button class="add" type="submit">+ save</button></form></div> </div></li>'),oa=h('<ol class="list-modal"></ol>'),sa=h('Item saved to your collection <a class="svelte-1s94jns"> </a>.',1),ra=h('<form method="POST" action="?/getCollectionList"><input type="hidden" id="post-id" name="post-id"> <button class="like" type="submit"><div class="row-group-icon-description"><!> <span class="descriptor">Save</span></div></button></form> <!> <!>',1);function ia(n,e){let o=D(e,"showCollectionsListModal",15,!1),u=D(e,"showSuccessModal",15,!1),c=D(e,"collections",19,()=>[]),p=ne(!1),t=ne(void 0),a=ne(void 0),m=ne(void 0);var g=ra(),f=S(g),_=r(f);Te(_);var w=v(_,2),U=r(w),b=r(U);ta(b,{class:"icon",size:"16",color:"var(--freq-color-text-muted)"}),E(2),s(U),s(w),s(f),Ne(f,A=>{var z;return(z=Ue)==null?void 0:z(A)});var P=v(f,2);_t(P,{get showModal(){return o()},set showModal(k){o(k)},headerText:k=>{E();var C=Ve("Save item to a collection");i(k,C)},list:k=>{var C=oa();mt(C,21,c,ft,($,Z)=>{var ee=aa(),Y=r(ee),se=r(Y),re=r(se),me=r(re);Te(me);var ye=v(me,2);s(re),Ne(re,(y,q)=>{var V;return(V=Ue)==null?void 0:V(y,q)},()=>()=>(L(p,!0),L(t,Ie(l(Z).collection_id)),L(a,Ie(l(Z).title)),L(m,`/collection/${l(Z).collection_id}`),async({update:y})=>(await y(),L(p,!1),{savedToCollectionId:l(t),savedToCollectionTitle:l(a),savedToCollectionRoute:l(m)}))),s(se);var xe=v(se);s(Y),s(ee),B(()=>{var y;be(me,(y=l(Z))==null?void 0:y.collection_id),ye.disabled=l(p),W(xe,` ${l(Z).title??""}`)}),i($,ee)}),s(C),i(k,C)},$$slots:{headerText:!0,list:!0}});var T=v(P,2);pt(T,{get showModal(){return u()},set showModal(k){u(k)},headerText:k=>{E();var C=Ve("Success!");i(k,C)},message:k=>{E();var C=sa(),$=v(S(C)),Z=r($,!0);s($),E(),B(()=>{H($,"href",l(m)),W(Z,l(a))}),i(k,C)},$$slots:{headerText:!0,message:!0}}),B(()=>be(_,e.postId)),i(n,g)}function la(n,e){const o=ce(e,["children","$$slots","$$events","$$legacy"]);ve(n,de({name:"reply"},()=>o,{iconNode:[["polyline",{points:"9 17 4 12 9 7"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4"}]],children:(c,p)=>{var t=X(),a=S(t);ue(a,e,"default",{},null),i(c,t)},$$slots:{default:!0}}))}function na(n,e){const o=ce(e,["children","$$slots","$$events","$$legacy"]);ve(n,de({name:"link-2"},()=>o,{iconNode:[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12"}]],children:(c,p)=>{var t=X(),a=S(t);ue(a,e,"default",{},null),i(c,t)},$$slots:{default:!0}}))}var ca=h('<iframe style="border: 0; width: 100%; height: 42px;" title="Bandcamp player" seamless></iframe>'),da=h('<iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" title="Soundcloud player"></iframe>'),va=h('<div class="youtube svelte-qhmpvb"><iframe width="100%" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="" class="svelte-qhmpvb"></iframe></div>'),ua=h('<iframe width="100%" height="120" frameborder="0" title="Mixcloud player"></iframe>');function ma(n,e){let o=oe(()=>e.embedInfo.id),u=oe(()=>e.embedInfo.source);var c=X(),p=S(c);{var t=m=>{var g=ca();B(()=>H(g,"src",`https://bandcamp.com/EmbeddedPlayer/${l(o)??""}/size=small/bgcol=333333/linkcol=ffffff/transparent=true/`)),i(m,g)},a=(m,g)=>{{var f=w=>{var U=da();B(()=>H(U,"src",`https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/${l(o)??""}&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true`)),i(w,U)},_=(w,U)=>{{var b=T=>{var A=va(),z=r(A);s(A),B(()=>H(z,"src",`https://www.youtube.com/embed/${l(o)??""}`)),i(T,A)},P=(T,A)=>{{var z=k=>{var C=ua();B(()=>H(C,"src",`https://player-widget.mixcloud.com/widget/iframe/?hide_cover=1&feed=${l(o)??""}`)),i(k,C)};x(T,k=>{l(u)=="mixcloud"&&k(z)},A)}};x(w,T=>{l(u)=="youtube"?T(b):T(P,!1)},U)}};x(m,w=>{l(u)=="soundcloud"?w(f):w(_,!1)},g)}};x(p,m=>{l(u)=="bandcamp"?m(t):m(a,!1)})}i(n,c)}var fa=h('<span class="now-playing-text"><!> <!></span>'),_a=h('<span class="now-playing-text"><!> <!></span>'),pa=h('<span class="now-playing-text"><!> <!></span>');function ga(n,e){var o=X(),u=S(o);{var c=t=>{var a=fa(),m=r(a);Ye(m,{size:"16",color:"var(--freq-color-text-medium-dark)"});var g=v(m),f=v(g);Ye(f,{size:"16",color:"var(--freq-color-text-medium-dark)"}),s(a),B(()=>{H(a,"aria-details",`Now Playing album ${e.itemTitle??""} by ${e.artistName??""}`),W(g,` ${e.artistName??""} • ${e.itemTitle??""} `)}),i(t,a)},p=(t,a)=>{{var m=f=>{var _=_a(),w=r(_);Xe(w,{size:"16",color:"var(--freq-color-text-medium-dark)"});var U=v(w),b=v(U);Xe(b,{size:"16",color:"var(--freq-color-text-medium-dark)"}),s(_),B(()=>{H(_,"aria-details",`Now Playing track ${e.itemTitle??""} by ${e.artistName??""}`),W(U,` ${e.artistName??""} • ${e.itemTitle??""} `)}),i(f,_)},g=(f,_)=>{{var w=U=>{var b=pa(),P=r(b);Ze(P,{size:"16",color:"var(--freq-color-text-medium-dark)"});var T=v(P),A=v(T);Ze(A,{size:"16",color:"var(--freq-color-text-medium-dark)"}),s(b),B(()=>{H(b,"aria-details",`Now Playing mix ${e.itemTitle??""} by ${e.artistName??""}`),W(T,` ${e.artistName??""} • ${e.itemTitle??""} `)}),i(U,b)};x(f,U=>{e.itemType=="episode"&&U(w)},_)}};x(t,f=>{e.itemType=="recording"?f(m):f(g,!1)},a)}};x(u,t=>{e.itemType=="release_group"?t(c):t(p,!1)})}i(n,o)}var ha=h('<span class="status-badge">edited</span>'),ba=h('<a><div class="row-group-icon-description"><!> <span class="descriptor">reply</span></div></a>'),ya=h('<div class="row-group-icons"><!> <!> <!></div> <div class="row-group-icon-description"><!></div>',1),xa=h('<div class="box svelte-nwi32j"><div class="double-border svelte-nwi32j"><div class="post-row"><div class="row-group-user-data"><!> <div class="row-group-column"><a><span class="display-name"> </span></a> <a><span class="date" aria-label="permalink"> <!></span></a></div></div> <div class="row-group"><!></div></div> <div class="post-body"><!> <!> <!></div> <div class="post-row"><!></div></div></div>');function Xa(n,e){var fe,pe,ge,ke,te,_e,ae,ie,M,I,le;je(e,!0);let o=D(e,"sessionUserId",3,null),u=D(e,"editState",15,!1),c=D(e,"mode",3,null),p=D(e,"collections",19,()=>[]),t=D(e,"showCollectionsModal",15,!1),a=D(e,"showSaveSucessModal",15,!1);const m=(((fe=e.post)==null?void 0:fe.created_at)??((pe=e.post)==null?void 0:pe.timestamp)).toISOString(),g=Date.parse(m).toString(),f=`/posts/${e.post.username}/now-playing/${g}`,_={id:(ge=e.post)==null?void 0:ge.embed_id,source:(ke=e.post)==null?void 0:ke.embed_source,title:((te=e.post)==null?void 0:te.release_group_name)??((_e=e.post)==null?void 0:_e.recording_name)??((ae=e.post)==null?void 0:ae.episode_title),artist:(ie=e.post)==null?void 0:ie.artist_name,account:(M=e.post)==null?void 0:M.embed_account,url:(I=e.post)==null?void 0:I.listen_url};console.log((le=e.post)==null?void 0:le.reaction_user_ids.includes(o()));let w=oe(()=>{var d,N;return(d=e.post)!=null&&d.reaction_user_ids?(N=e.post)==null?void 0:N.reaction_user_ids.includes(o()):null}),U=oe(()=>{var d;return((d=e.post)==null?void 0:d.reaction_active)??null}),b=oe(()=>{var d;return(d=e.post)==null?void 0:d.reaction_count}),P=oe(()=>{var d,N;return((d=e.post)==null?void 0:d.id)??((N=e.post)==null?void 0:N.post_id)}),T={img_url:e.post.avatar_url,last_fm_img_url:e.post.avatar_last_fm_img_url,artist_name:e.post.avatar_artist_name,release_group_name:e.post.avatar_release_group_name};var A=xa(),z=r(A),k=r(z),C=r(k),$=r(C);const Z=oe(()=>`${e.post.display_name}'s avatar`);ht($,{item:T,get artistName(){return e.post.avatar_artist_name},get releaseGroupName(){return e.post.avatar_release_group_name},get altText(){return l(Z)},imgClass:"avatar"});var ee=v($,2),Y=r(ee),se=r(Y),re=r(se,!0);s(se),s(Y);var me=v(Y,2);H(me,"href",f);var ye=r(me),xe=r(ye),y=v(xe);na(y,{size:"15",color:"var(--freq-color-text-muted)"}),s(ye),s(me),s(ee),s(C);var q=v(C,2),V=r(q);{var we=d=>{var N=ha();i(d,N)};x(V,d=>{e.post.status==="edited"&&d(we)})}s(q),s(k);var O=v(k,2),G=r(O);{var J=d=>{const N=oe(()=>e.post.recording_name??e.post.release_group_name??e.post.episode_title);ga(d,{get artistName(){return e.post.artist_name},get itemTitle(){return l(N)},get itemType(){return e.post.item_type}})};x(G,d=>{e.post.artist_name&&d(J)})}var R=v(G,2);{var j=d=>{bt(d,{get text(){return e.post.text}})},K=d=>{Jt(d,{get postData(){return e.post},get editState(){return u()},set editState(N){u(N)}})};x(R,d=>{u()?d(K,!1):d(j)})}var Me=v(R,2);{var ze=d=>{ma(d,{embedInfo:_})};x(Me,d=>{(_==null?void 0:_.id)!=null&&d(ze)})}s(O);var Ce=v(O,2),qe=r(Ce);{var Ae=d=>{var N=ya(),he=S(N),Re=r(he);const Qe=oe(()=>l(U)??l(w));ea(Re,{get postId(){return l(P)},get reactionActive(){return l(Qe)},get reactionCount(){return l(b)}});var Ee=v(Re,2);{var We=F=>{var Q=ba();H(Q,"href",f);var Pe=r(Q),Se=r(Pe);la(Se,{size:"16",color:"var(--freq-color-text-muted)"}),E(2),s(Pe),s(Q),i(F,Q)};x(Ee,F=>{c()=="feed"&&F(We)})}var $e=v(Ee,2);{var et=F=>{ia(F,{get postId(){return l(P)},get collections(){return p()},get showCollectionsListModal(){return t()},set showCollectionsListModal(Q){t(Q)},get showSuccessModal(){return a()},set showSuccessModal(Q){a(Q)}})};x($e,F=>{(e.post.artist_mbid||e.post.user_added_metadata_id)&&F(et)})}s(he);var He=v(he,2),tt=r(He);{var at=F=>{const Q=oe(()=>e.post.id??e.post.now_playing_post_id);Ge(F,{mode:"sessionUserPostMenu",get postId(){return l(Q)},get success(){return e.userActionSuccess},get editState(){return u()},set editState(Pe){u(Pe)}})},ot=(F,Q)=>{{var Pe=Se=>{const st=oe(()=>e.post.id??e.post.now_playing_post_id);Ge(Se,{mode:"postMenu",get postId(){return l(st)},get success(){return e.userActionSuccess}})};x(F,Se=>{o()&&Se(Pe)},Q)}};x(tt,F=>{e.post.user_id==o()?F(at):F(ot,!1)})}s(He),i(d,N)};x(qe,d=>{c()!="sample"&&d(Ae)})}s(Ce),s(z),s(A),B(d=>{H(Y,"href",`/user/${e.post.username??""}`),W(re,e.post.display_name),W(xe,`${d??""} `)},[()=>gt(e.post.created_at??e.post.timestamp)]),i(n,A),Be()}export{na as L,Xa as N,Ge as U};
