import"../chunks/Bg9kRutz.js";import{p as na,a as E,a6 as ma,f as da,t as ua,b as pa,$ as va,c as d,d as r,g as e,e as l,r as u,s as F}from"../chunks/CIC73nbL.js";import{s as _a}from"../chunks/zPX_AMPA.js";import{t as f,a as b}from"../chunks/D1sabymj.js";import{h as ba}from"../chunks/CZBN_KMn.js";import{b as o,r as n}from"../chunks/pfHeeLMb.js";import{b as ca}from"../chunks/26D3B16x.js";import{p as c}from"../chunks/D8QYH9wd.js";import{i as fa}from"../chunks/QnRASlD3.js";import"../chunks/BadVv_ud.js";import{P as ga}from"../chunks/h0YdFdS4.js";import{N as xa}from"../chunks/BniDsu-1.js";import"../chunks/DOrtXGrH.js";import"../chunks/CBTFtqMS.js";import{A as ha}from"../chunks/jJ5yvjTe.js";var ya=f("<span>profile info</span>"),wa=f("<span>Success!</span>"),Aa=f("<span>Your profile has been updated.</span>"),Ia=f('<div class="panel" id="profile-info"><!> <div class="form-wrapper svelte-427bvk"><form id="account-data" class="form-column" method="post" action="?/update"><div class="label-group"><label class="text-label" for="email" form="account-data">Email</label> <a class="label-link" href="/account/update-email">update email</a></div> <input class="text" type="text" name="email" id="email" form="account-data" disabled> <div class="label-group"><label class="text-label" for="username" form="account-data">Username</label> <a class="label-link" href="/account/update-username">update username</a></div> <input class="text" type="text" name="username" id="username" form="account-data" disabled> <label class="text-label" for="displayName">Display name</label> <input class="text" type="text" name="displayName" id="displayName"> <label class="text-label" for="description">about me</label> <textarea id="about" name="about" rows="3" cols="1" maxlength="140" spellcheck="true"></textarea> <label class="text-label" for="website">Website</label> <input class="text" type="text" name="website" id="website"> <input type="hidden" name="avatarItem" id="avatarmItem"> <input type="hidden" name="avatarUrl" id="avatarUrl"> <input type="hidden" name="newAvatarUrl" id="newAvatarUrl"> <input type="hidden" name="avatarMbid" id="avatarMbid"> <input type="hidden" name="newAvatarMbid" id="newAvatarMbid"> <input type="hidden" name="avatarName" id="avatarName"></form> <div class="form-column"><label class="text-label" for="avatarUrl">Avatar</label> <!> <div class="actions svelte-427bvk"><button form="account-data" class="double-border-top" type="submit"><div class="inner-border"> </div></button> <form class="signout" method="post" action="?/signout"><button class="double-border-top" type="submit"><div class="inner-border">Sign Out</div></button></form></div></div></div></div> <!>',1);function Ra(K,v){na(v,!0);let Q=l(()=>v.data.user),m=l(()=>v.data.profile),V=l(()=>{var a;return(a=v.form)==null?void 0:a.success}),g=E(!1),G=l(()=>{var a;return((a=e(m))==null?void 0:a.display_name)??""}),X=l(()=>{var a;return((a=e(m))==null?void 0:a.username)??""}),Z=l(()=>{var a;return((a=e(m))==null?void 0:a.website)??""}),$=l(()=>{var a;return((a=e(m))==null?void 0:a.about)??""}),aa=l(()=>{var a;return(a=e(Q))==null?void 0:a.email}),s=E(c({})),ea=l(()=>{var a,t;return((a=e(s))==null?void 0:a.release_group_mbid)??((t=e(m))==null?void 0:t.avatar_mbid)??""}),x=l(()=>{var a,t;return((a=e(s))==null?void 0:a.avatar_url)??((t=e(m))==null?void 0:t.avatar_url)??""}),ta=l(()=>{var a,t;return((a=e(s))==null?void 0:a.last_fm_img_url)??((t=e(m))==null?void 0:t.avatar_last_fm_img_url)??""}),ra=l(()=>{var a,t;return((a=e(s))==null?void 0:a.artist_name)??((t=e(m))==null?void 0:t.avatar_artist_name)??""}),la=l(()=>{var a,t;return((a=e(s))==null?void 0:a.release_group_name)??((t=e(m))==null?void 0:t.avatar_release_group_name)??""}),H=l(()=>{var a,t,i;return{img_url:e(x),last_fm_img_url:e(ta),artist_name:e(ra),artist_mbid:(a=e(s))==null?void 0:a.artist_mbid,release_group_name:e(la),release_group_mbid:(t=e(s))==null?void 0:t.release_group_mbid,label:(i=e(s))==null?void 0:i.label}}),h=E(null),y=l(()=>!!(e(g)&&!e(h)));ma(()=>{fa()});var J=Ia();ba(a=>{va.title=`
		Account
	`});var w=da(J),L=d(w);ga(L,{headerText:t=>{var i=ya();b(t,i)}});var R=r(L,2),A=d(R),I=r(d(A),2);n(I);var N=r(I,4);n(N);var U=r(N,4);n(U);var M=r(U,4);ca(M);var k=r(M,4);n(k);var P=r(k,2);n(P);var T=r(P,2);n(T);var S=r(T,2);n(S);var O=r(S,2);n(O);var D=r(O,2);n(D);var W=r(D,2);n(W),u(A);var Y=r(A,2),j=r(d(Y),2);ha(j,{get displayName(){return e(G)},get avatarUrl(){return e(x)},get avatarInfo(){return e(H)},get newItemAdded(){return e(g)},set newItemAdded(a){F(g,c(a))},get avatarItem(){return e(s)},set avatarItem(a){F(s,c(a))},get imgPromise(){return e(h)},set imgPromise(a){F(h,c(a))}});var q=r(j,2),_=d(q),z=d(_),sa=d(z,!0);u(z),u(_);var B=r(_,2),ia=d(B);u(B),u(q),u(Y),u(R),u(w);var oa=r(w,2);xa(oa,{get showModal(){return e(V)},headerText:i=>{var p=wa();b(i,p)},message:i=>{var p=Aa();b(i,p)},$$slots:{headerText:!0,message:!0}}),ua(a=>{var t,i,p,C;o(I,e(aa)),o(N,e(X)),o(U,e(G)),o(M,e($)),o(k,e(Z)),o(P,a),o(T,e(x)),o(S,((t=e(s))==null?void 0:t.img_url)??((i=e(s))==null?void 0:i.last_fm_img_url)??null),o(O,e(ea)),o(D,((p=e(s))==null?void 0:p.release_group_mbid)??null),o(W,((C=e(s))==null?void 0:C.release_group_name)??null),_.disabled=e(y),_a(sa,e(y)?"Loading...":"Update profile"),ia.disabled=e(y)},[()=>JSON.stringify(e(H))]),b(K,J),pa()}export{Ra as component};
