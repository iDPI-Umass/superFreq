import"../chunks/Bg9kRutz.js";import{p as Ae,f as z,b as Se,c as s,d as n,g as a,r as t,t as B,$ as va,e as r,n as j}from"../chunks/CIC73nbL.js";import{s as w}from"../chunks/zPX_AMPA.js";import{i as x}from"../chunks/w9zPIjBD.js";import{d as da,a as v,t as u,b as Ne}from"../chunks/D1sabymj.js";import{h as ca}from"../chunks/CZBN_KMn.js";import{a as ua}from"../chunks/BdK7rzmN.js";import{s as D,r as ma,b as pa}from"../chunks/pfHeeLMb.js";import{d as Te}from"../chunks/26D3B16x.js";import{g as G}from"../chunks/QnRASlD3.js";import{e as fa}from"../chunks/4DH-dQQX.js";import{N as _a,U as ga}from"../chunks/DLJZCxYD.js";import{P as oe}from"../chunks/h0YdFdS4.js";import{G as ba}from"../chunks/DifRGFGW.js";import{N as ha}from"../chunks/B-Ht43KG.js";import{F as wa}from"../chunks/DnkLRlIL.js";import{e as xa,i as Ua}from"../chunks/ChSzfhcg.js";import{p as ya}from"../chunks/Cu7UW-DA.js";import"../chunks/69_IOA4Y.js";import"../chunks/BkhXqVo8.js";import"../chunks/DOrtXGrH.js";import"../chunks/CentS020.js";import{C as ka}from"../chunks/CBTFtqMS.js";import{I as Ia}from"../chunks/ohR4yWQn.js";var Pa=u('<a class="panel-header-link"> </a>'),Ca=(L,o)=>G(`/user/${o.username}/now-playing-posts`),Na=u('<div class="panel-medium"><!> <div class="posts-spacing svelte-1mvojoo"></div> <div class="button-spacer svelte-1mvojoo"><button class="standard svelte-1mvojoo">see more</button></div></div>'),Aa=u(`<div class="panel-medium"><div class="panel-button-buffer svelte-1mvojoo"><p class="svelte-1mvojoo">This user hasn't posted anything yet.</p></div></div>`);function Sa(L,o){Ae(o,!0);let y=ya(o,"sessionUserId",3,null);var m=da(),H=z(m);{var O=U=>{var I=Na(),S=s(I);oe(S,{headerText:F=>{var C=Pa(),q=s(C);t(C),B(()=>{D(C,"href",`/user/${o.username}/now-playing-posts`),w(q,`${o.displayName??""}'s Now Playing posts`)}),v(F,C)}});var i=n(S,2);xa(i,21,()=>o.posts,Ua,(R,F)=>{_a(R,{get post(){return a(F)},get sessionUserId(){return y()},mode:"feed"})}),t(i);var T=n(i,2),P=s(T);P.__click=[Ca,o],t(T),t(I),v(U,I)},k=(U,I)=>{{var S=i=>{var T=Aa();v(i,T)};x(U,i=>{(!o.posts||o.posts.length==0)&&i(S)},I)}};x(H,U=>{o.posts&&o.posts.length>0?U(O):U(k,!1)})}v(L,m),Se()}Te(["click"]);var Ta=()=>G("/account"),Fa=u('<button class="mini svelte-1ezepdk">edit</button>'),Ma=()=>G("/account"),ja=u('<button class="double-border-top"><div class="inner-border-condensed">edit profile</div></button>'),za=u('<form method="POST" action="?/followUser"><input type="hidden" name="profile-user-id" id="profile-user-id"> <button class="standard" type="submit" formaction="?/followUser"><!></button></form> <!>',1),Ba=u("<span>top albums</span>"),Da=()=>G("/user/top-albums"),Ga=u('<button class="standard">edit</button>'),La=u("<span><!></span>"),Ra=u('<div class="panel-medium"><!> <!></div>'),Ha=u("<span>top albums</span>"),Oa=()=>G("/user/top-albums"),qa=u('<div class="panel-medium"><!> <div class="panel-button-buffer"><button class="standard">choose your top albums</button></div></div>'),Ea=u('New <a href="/about/updates#updates">updates and bug fixes</a> ',1),Ja=u("<!> <!> <!>",1),Ka=u('<div class="profile-info"><div class="profile-info-box-left"><div class="avatar-user-data"><div class="cover-art-widget svelte-1ezepdk"><div class="avatar-image svelte-1ezepdk"><!></div> <!></div> <div class="profile-info-box-column"><div class="profile-user-data-column"><div class="profile-displayname-username-column"><h2> </h2> <p class="data-muted"> </p></div> <p> </p></div></div></div> <div class="profile-buttons-group"><!></div></div> <div class="profile-info-box-right"><div class="profile-stats-box" aria-label="user metrics"><div class="metric" aria-label="metric"><a class="metrics"><div class="numeral"><p class="metric-numerals"> </p></div> <p class="data-muted-uppercase">collections</p></a></div> <div class="metric" aria-label="metric"><a class="metrics"><div class="numeral"><p class="metric-numerals"> </p></div> <p class="data-muted-uppercase">posts</p></a></div> <div class="metric" aria-label="metric"><a class="metrics"><div class="numeral"><p class="metric-numerals"> </p></div> <p class="data-muted-uppercase">collections followed</p></a></div> <div class="metric" aria-label="metric"><a class="metrics"><div class="numeral"><p class="metric-numerals"> </p></div> <p class="data-muted-uppercase">users followed</p></a></div></div></div></div> <div class="border-full-vw"></div> <div class="content svelte-1ezepdk"><!> <!></div>',1);function gt(L,o){Ae(o,!0);let y=r(()=>o.data.sessionUserId),m=r(()=>o.data.profileData),H=r(()=>o.data.feedItems),O=r(()=>o.data.remaining),k=r(()=>o.data.profileUsername),U=r(()=>o.data.posts),I=r(()=>o.data.sessionUserCollections),S=r(()=>o.data.updatesPageUpdatedAt),i=r(()=>a(m).profileUserData),T=r(()=>a(m).followInfo),P=r(()=>a(m).permission),R=r(()=>a(m).profileUserBlockInfo),F=r(()=>a(m).profileUserFlagInfo);const C=r(()=>{var e;return(e=a(i))==null?void 0:e.id});let q=r(()=>{var e;return a(P)?(e=a(m))==null?void 0:e.collectionCount:null}),Fe=r(()=>{var e;return a(P)?(e=a(m))==null?void 0:e.collectionFollowingCount:null}),Me=r(()=>{var e;return a(P)?(e=a(m))==null?void 0:e.userFollowingCount:null}),je=r(()=>{var e;return a(P)?(e=a(m))==null?void 0:e.nowPlayingPostsCount:null}),M=r(()=>{var e;return a(P)?(e=a(m))==null?void 0:e.topAlbumsCollection:null}),ze=r(()=>!!a(M)),Be=r(()=>{var e;return((e=a(T))==null?void 0:e.follows_now)??!1}),De=r(()=>{var e;return((e=a(R))==null?void 0:e.active)??!1}),Ge=r(()=>{var e;return((e=a(F))==null?void 0:e.active)??!1}),E=r(()=>{var e;return(e=a(i))==null?void 0:e.display_name}),Le=r(()=>{var e;return(e=a(i))==null?void 0:e.avatar_url}),Re=r(()=>{var e;return(e=a(i))==null?void 0:e.last_fm_img_url}),le=r(()=>{var e;return(e=a(i))==null?void 0:e.avatar_artist_name}),ie=r(()=>{var e;return(e=a(i))==null?void 0:e.avatar_release_group_name}),He=r(()=>({img_url:a(Le),last_fm_img_url:a(Re),artist_name:a(le),release_group_name:a(ie)})),ne=r(()=>{var e;return((e=a(i))==null?void 0:e.id)==a(y)}),Oe=r(()=>{var e;return((e=o.form)==null?void 0:e.showCollectionsModal)??!1}),qe=r(()=>{var e;return((e=o.form)==null?void 0:e.updateSuccess)??!1});var ve=Ka();ca(e=>{B(()=>va.title=`
		${a(E)??""}'s Profile
	`)});var J=z(ve),K=s(J),Q=s(K),V=s(Q),W=s(V),Ee=s(W);const Je=r(()=>`${a(E)}'s avatar: ${a(ie)} by ${a(le)}`);ka(Ee,{get item(){return a(He)},get altText(){return a(Je)}}),t(W);var Ke=n(W,2);{var Qe=e=>{var l=Fa();l.__click=[Ta],v(e,l)};x(Ke,e=>{a(ne)&&e(Qe)})}t(V);var de=n(V,2),ce=s(de),X=s(ce),Y=s(X),Ve=s(Y,!0);t(Y);var ue=n(Y,2),We=s(ue,!0);t(ue),t(X);var me=n(X,2),Xe=s(me,!0);t(me),t(ce),t(de),t(Q);var pe=n(Q,2),Ye=s(pe);{var Ze=e=>{var l=ja();l.__click=[Ma],v(e,l)},$e=e=>{var l=za(),c=z(l),f=s(c);ma(f);var _=n(f,2),b=s(_);{var p=d=>{var g=Ne("unfollow");v(d,g)},h=d=>{var g=Ne("+ follow");v(d,g)};x(b,d=>{a(Be)==!0?d(p):d(h,!1)})}t(_),t(c),ua(c,d=>{var g;return(g=fa)==null?void 0:g(d)});var N=n(c,2);const A=r(()=>{var d;return(d=o.form)==null?void 0:d.userActionSuccess});ga(N,{mode:"profileMenu",get blocked(){return a(De)},get flagged(){return a(Ge)},get profileUserId(){return a(C)},get success(){return a(A)}}),B(()=>pa(f,a(C))),v(e,l)};x(Ye,e=>{a(ne)?e(Ze):e($e,!1)})}t(pe),t(K);var fe=n(K,2),_e=s(fe),Z=s(_e),$=s(Z),ge=s($),be=s(ge),ea=s(be,!0);t(be),t(ge),j(2),t($),t(Z);var ee=n(Z,2),ae=s(ee),he=s(ae),we=s(he),aa=s(we,!0);t(we),t(he),j(2),t(ae),t(ee);var te=n(ee,2),se=s(te),xe=s(se),Ue=s(xe),ta=s(Ue,!0);t(Ue),t(xe),j(2),t(se),t(te);var ye=n(te,2),re=s(ye),ke=s(re),Ie=s(ke),sa=s(Ie,!0);t(Ie),t(ke),j(2),t(re),t(ye),t(_e),t(fe),t(J);var Pe=n(J,4),Ce=s(Pe);{var ra=e=>{var l=Ra(),c=s(l);oe(c,{headerText:p=>{var h=Ba();v(p,h)},button:p=>{var h=La(),N=s(h);{var A=d=>{var g=Ga();g.__click=[Da],v(d,g)};x(N,d=>{var g;((g=a(i))==null?void 0:g.id)==a(y)&&d(A)})}t(h),v(p,h)}});var f=n(c,2);ba(f,{get collectionContents(){return a(M)},get collectionReturned(){return a(ze)},collectionType:"release_groups",showTags:!1,layout:"condensed-grid",mode:"view"}),t(l),v(e,l)},oa=(e,l)=>{{var c=f=>{var _=qa(),b=s(_);oe(b,{headerText:A=>{var d=Ha();v(A,d)}});var p=n(b,2),h=s(p);h.__click=[Oa],t(p),t(_),v(f,_)};x(e,f=>{var _,b;((_=a(M))==null?void 0:_.length)==0&&((b=a(i))==null?void 0:b.id)==a(y)&&f(c)},l)}};x(Ce,e=>{a(M)&&a(M).length>0?e(ra):e(oa,!1)})}var la=n(Ce,2);{var ia=e=>{var l=Ja(),c=z(l);Ia(c,{mode:"compact",children:(p,h)=>{j();var N=Ea(),A=n(z(N),2);B(()=>w(A,` as of ${a(S)??""}`)),v(p,N)},$$slots:{default:!0}});var f=n(c,2);ha(f,{});var _=n(f,2);const b=r(()=>{var p;return(p=o.form)==null?void 0:p.userActionSuccess});wa(_,{get sessionUserId(){return a(y)},get feedItems(){return a(H)},mode:"feed",get userActionSuccess(){return a(b)},get remaining(){return a(O)},get collections(){return a(I)},get showCollectionsListModal(){return a(Oe)},get showSaveSucessModal(){return a(qe)}}),v(e,l)},na=e=>{Sa(e,{get posts(){return a(U)},get displayName(){return a(E)},get username(){return a(k)}})};x(la,e=>{var l;((l=a(i))==null?void 0:l.id)==a(y)?e(ia):e(na,!1)})}t(Pe),B(()=>{var e,l,c;w(Ve,(e=a(i))==null?void 0:e.display_name),w(We,(l=a(i))==null?void 0:l.username),w(Xe,((c=a(i))==null?void 0:c.about)??""),D($,"href",`/user/${a(k)??""}/collections`),w(ea,a(q)),D(ae,"href",`/user/${a(k)??""}/now-playing-posts`),w(aa,a(je)),D(se,"href",`/user/${a(k)??""}/collections-following`),w(ta,a(Fe)),D(re,"href",`/user/${a(k)??""}/users-following`),w(sa,a(Me))}),v(L,ve),Se()}Te(["click"]);export{gt as component};
