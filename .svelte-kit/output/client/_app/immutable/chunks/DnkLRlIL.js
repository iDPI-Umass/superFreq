import"./Bg9kRutz.js";import{p as ue,b as fe,c as s,d as n,r,g as a,f as me,e as i,t as k,n as ge}from"./CIC73nbL.js";import{s as h}from"./zPX_AMPA.js";import{i as f}from"./w9zPIjBD.js";import{e as ye,i as xe}from"./ChSzfhcg.js";import{t as d,a as l}from"./D1sabymj.js";import{a as he}from"./BdK7rzmN.js";import{s as A}from"./pfHeeLMb.js";import{d as be}from"./26D3B16x.js";import{p as R}from"./Cu7UW-DA.js";import{e as we}from"./4DH-dQQX.js";import{g as Ie}from"./QnRASlD3.js";import{p as V}from"./DOrtXGrH.js";import{P as Ce}from"./h0YdFdS4.js";import{N as Te}from"./DLJZCxYD.js";import{C as P}from"./CBTFtqMS.js";var Se=d("<span>feed</span>"),Ue=d('<div class="feed-item-one-liner"><p>Nothing in your feed? Try following some more <a href="/users">users</a> and <a href="/collections">collections</a>.</p></div>'),Me=d('<a><div class="feed-item-user-data"><!> </div></a> <div class="feed-post-spacer"><div class="feed-item-now-playing"><!></div></div>',1),Ye=d('<a><div class="feed-item-one-liner"><!> </div></a>'),ke=d('<a><div class="feed-item-one-liner"><!> </div></a>'),Ae=d('<a><div class="feed-item-one-liner"><!> </div></a>'),Pe=d('<a><div class="feed-item-one-liner"><!> <span class="blurb"> <span class="feed-item-subject"> </span></span></div></a>'),je=d('<a><div class="feed-item-one-liner"><!> <span class="blurb"> <span class="feed-item-subject"> </span></span></div></a>'),Ne=d('<a><div class="feed-item-one-liner"><!> <span class="blurb"> <span class="feed-item-subject">Top Albums</span> collection</span></div></a>'),Fe=d('<div class="feed-item"><!></div>'),Le=d('<div class="button-spacer svelte-gp797e"><button class="standard svelte-gp797e" formaction="?/loadMore">load more</button></div>'),He=()=>Ie("/feed"),Oe=d('<div class="button-spacer svelte-gp797e"><button class="standard svelte-gp797e">see more</button></div>'),qe=d('<div class="feed-panel"><!> <!> <!> <form method="POST" action="?/loadMore" class="svelte-gp797e"><!></form> <!></div>');function sa(se,t){ue(t,!0);let re=R(t,"userActionSuccess",3,null),te=R(t,"collections",19,()=>[]),X=R(t,"showCollectionsListModal",15,!1),Z=R(t,"showSaveSucessModal",15,!1);function U(o){return{img_url:o.avatar_url,last_fm_img_url:o.avatar_last_fm_img_url,artist_name:o.avatar_artist_name,release_group_name:o.avatar_release_group_name}}var W=qe(),$=s(W);Ce($,{headerText:e=>{var M=Se();l(e,M)}});var ee=n($,2);{var oe=o=>{var e=Ue();l(o,e)};f(ee,o=>{t.feedItems.length==0&&o(oe)})}var ae=n(ee,2);ye(ae,17,()=>t.feedItems,xe,(o,e)=>{var M=Fe(),_e=s(M);{var ve=j=>{var E=Me(),N=me(E),G=s(N),m=s(G);const b=i(()=>U(a(e))),F=i(()=>`${a(e).display_name}'s avatar`);P(m,{get item(){return a(b)},get altText(){return a(F)},imgClass:"feed-avatar"});var L=n(m);r(G),r(N);var _=n(N,2),v=s(_),w=s(v);Te(w,{get sessionUserId(){return t.sessionUserId},get post(){return a(e)},mode:"feed",get userActionSuccess(){return re()},get collections(){return te()},get showCollectionsModal(){return X()},set showCollectionsModal(c){X(c)},get showSaveSucessModal(){return Z()},set showSaveSucessModal(c){Z(c)}}),r(v),r(_),k(c=>{A(N,"href",c),h(L,` ${(a(e).user_id==t.sessionUserId?"You":a(e).display_name)??""}
                    posted:`)},[()=>`/posts/${a(e).username}/now-playing/${V(a(e).timestamp)}`]),l(j,E)},ce=(j,E)=>{{var N=m=>{var b=Ye(),F=s(b),L=s(F);const _=i(()=>U(a(e))),v=i(()=>`${a(e).display_name}'s avatar`);P(L,{get item(){return a(_)},get altText(){return a(v)},imgClass:"feed-avatar"});var w=n(L);r(F),r(b),k(()=>{A(b,"href",`/user/${a(e).username}`),h(w,` ${a(e).display_name??""} followed you`)}),l(m,b)},G=(m,b)=>{{var F=_=>{var v=ke(),w=s(v),c=s(w);const I=i(()=>U(a(e))),C=i(()=>`${a(e).display_name}'s avatar`);P(c,{get item(){return a(I)},get altText(){return a(C)},imgClass:"feed-avatar"});var H=n(c);r(w),r(v),k((g,p)=>{A(v,"href",g),h(H,` ${(a(e).user_id==t.sessionUserId?"You":a(e).display_name)??""} commented on ${p??""} post`)},[()=>{var g;return`/posts/${a(e).parent_post_username}/now-playing/${V(a(e).parent_post_created_at)}#${(g=a(e).username)==null?void 0:g.concat(V(a(e).timestamp))}`},()=>a(e).parent_post_user_id==t.sessionUserId?"your":a(e).parent_post_display_name.concat("'s")]),l(_,v)},L=(_,v)=>{{var w=I=>{var C=Ae(),H=s(C),g=s(H);const p=i(()=>U(a(e))),T=i(()=>`${a(e).display_name}'s avatar`);P(g,{get item(){return a(p)},get altText(){return a(T)},imgClass:"feed-avatar"});var O=n(g);r(H),r(C),k((q,u)=>{A(C,"href",q),h(O,` ${(a(e).user_id==t.sessionUserId?"You":a(e).display_name)??""} liked ${u??""} post`)},[()=>`/posts/${a(e).parent_post_username}/now-playing/${V(a(e).parent_post_created_at)}`,()=>a(e).parent_post_user_id==t.sessionUserId?"your":a(e).parent_post_display_name.concat("'s")]),l(I,C)},c=(I,C)=>{{var H=p=>{var T=Pe(),O=s(T),q=s(O);const u=i(()=>U(a(e))),S=i(()=>`${a(e).display_name}'s avatar`);P(q,{get item(){return a(u)},get altText(){return a(S)},imgClass:"feed-avatar"});var Y=n(q,2),y=s(Y),x=n(y),z=s(x,!0);r(x),r(Y),r(O),r(T),k(()=>{A(T,"href",`/collection/${a(e).collection_id}`),h(y,`${(a(e).user_id==t.sessionUserId?"You":a(e).display_name)??""}
                      followed ${(a(e).collection_owner_id==t.sessionUserId?"your":"a")??""} collection: `),h(z,a(e).collection_title)}),l(p,T)},g=(p,T)=>{{var O=u=>{var S=je(),Y=s(S),y=s(Y);const x=i(()=>U(a(e))),z=i(()=>`${a(e).display_name}'s avatar`);P(y,{get item(){return a(x)},get altText(){return a(z)},imgClass:"feed-avatar"});var B=n(y,2),J=s(B),K=n(J),Q=s(K,!0);r(K),r(B),r(Y),r(S),k(()=>{A(S,"href",`/collection/${a(e).collection_id}`),h(J,`${(a(e).user_id==t.sessionUserId?"You":a(e).display_name)??""}
                      edited the collection: `),h(Q,a(e).collection_)}),l(u,S)},q=(u,S)=>{{var Y=y=>{var x=Ne(),z=s(x),B=s(z);const J=i(()=>U(a(e))),K=i(()=>`${a(e).display_name}'s avatar`);P(B,{get item(){return a(J)},get altText(){return a(K)},imgClass:"feed-avatar"});var Q=n(B,2),pe=s(Q);ge(2),r(Q),r(z),r(x),k(()=>{A(x,"href",`/user/${a(e).username}`),h(pe,`${(a(e).user_id==t.sessionUserId?"You":a(e).display_name)??""}
                    edited their `)}),l(y,x)};f(u,y=>{a(e).item_type=="collection_edit"&&a(e).item_type.is_top_albums&&y(Y)},S)}};f(p,u=>{a(e).item_type=="collection_id"&&!a(e).item_type.is_top_albums?u(O):u(q,!1)},T)}};f(I,p=>{a(e).item_type=="collection_follow"?p(H):p(g,!1)},C)}};f(_,I=>{a(e).item_type=="reaction"?I(w):I(c,!1)},v)}};f(m,_=>{a(e).item_type=="comment"?_(F):_(L,!1)},b)}};f(j,m=>{a(e).item_type=="social_follow"&&a(e).target_user_id==t.sessionUserId?m(N):m(G,!1)},E)}};f(_e,j=>{a(e).item_type=="now_playing_post"?j(ve):j(ce,!1)})}r(M),l(o,M)});var D=n(ae,2),ne=s(D);{var ie=o=>{var e=Le();l(o,e)};f(ne,o=>{t.remaining&&t.remaining>0&&o(ie)})}r(D),he(D,o=>{var e;return(e=we)==null?void 0:e(o)});var le=n(D,2);{var de=o=>{var e=Oe(),M=s(e);M.__click=[He],r(e),l(o,e)};f(le,o=>{t.mode=="mini"&&o(de)})}r(W),l(se,W),fe()}be(["click"]);export{sa as F};
